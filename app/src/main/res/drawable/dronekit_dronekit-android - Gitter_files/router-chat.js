webpackJsonp([19],[function(e,t,n){"use strict";n(259);var i=n(3),o=n(2),r=n(305),a=n(11),s=n(16)("app:router-chat"),l=n(306),c=n(373),u=n(14),d=n(38),h=n(185),f=n(15),p=n(323),m=n(375);n(240),n(265),n(266),n(201),n(304),n(124),n(383),n(272),n(274),n(245),u(function(){function e(e){if(e&&e.data&&"string"==typeof e.data){if(e.origin!==o.env("basePath"))return void s("Ignoring message from "+e.origin);try{return JSON.parse(e.data)}catch(t){return}}}a.on("navigation",function(e,t,n){f.hasParentFrameSameOrigin()?f.postMessage({type:"navigation",url:e,urlType:t,title:n}):window.parent.location.href=e}),n(135).installLinkHandler(),window.addEventListener("message",function(t){var n=e(t);if(n){s("Received message %j",n);var i=function(e){var t="app";e.event&&e.event.origin&&(t=e.event.origin),e.event={origin:t,preventDefault:function(){},stopPropagation:function(){},stopImmediatePropagation:function(){}}};switch(n.type){case"keyboard":i(n),a.trigger("keyboard."+n.name,n.event,n.handler),a.trigger("keyboard.all",n.name,n.event,n.handler);break;case"focus":i(n),a.trigger("focus.request."+n.focus,n.event);break;case"permalink.navigate":var r=n.query,l=r&&r.at;l&&a.trigger("chatCollectionView:permalinkHighlight",l);break;case"change:room":h.start("room-switch.render"),s("changing room: %j",n.newTroupe),u.dialogRegion.destroy(),o.setTroupe(n.newTroupe),n.permalinkChatId&&a.trigger("chatCollectionView:permalinkHighlight",n.permalinkChatId),a.trigger("focus.request.chat");break;case"about.to.leave.current.room":o.troupe().set("aboutToLeave",!0);break;case"roomList":a.trigger("chat-cache:preload",n.rooms)}}}),f.postMessage({type:"context.troupeId",troupeId:o.getTroupeId(),name:o.troupe().get("name")}),a.on("route",function(e){f.postMessage({type:"route",hash:e})}),a.on("permalink.requested",function(e,t,n){if(!o.inOneToOneTroupeContext()){var i=o.troupe().get("url"),r=t.id;if(n&&n.appendInput){var s=o.env("basePath")+i+"?at="+r,l=t.get("sent")&&t.get("sent").format("LLL");a.trigger("input.append",":point_up: ["+l+"]("+s+")")}f.postMessage({type:"permalink.requested",url:i,permalinkType:e,id:r})}}),a.on("realtime.testConnection",function(e){f.postMessage({type:"realtime.testConnection",reason:e})}),a.on("realtime:newConnectionEstablished",function(){f.postMessage({type:"realtime.testConnection",reason:"newConnection"})}),a.on("unreadItemsCount",function(e){f.postMessage({type:"unreadItemsCount",count:e,troupeId:o.getTroupeId()})}),a.on("keyboard.all",function(e,t,n){if(!t.origin||"app"!==t.origin){var i={type:"keyboard",name:e,event:{origin:t.origin},handler:n};f.postMessage(i)}}),a.on("chat.edit.show",function(){f.postMessage({type:"chat.edit.show"})}),a.on("chat.edit.hide",function(){f.postMessage({type:"chat.edit.hide"})}),a.on("focus.request.app.in",function(e){f.postMessage({type:"focus",focus:"in",event:e})}),a.on("focus.request.app.out",function(e){f.postMessage({type:"focus",focus:"out",event:e})}),a.on("ajaxError",function(){f.postMessage({type:"ajaxError"})});var t=function(e){a.triggerParent("user_notification",{title:"Failed to remove user",text:e,className:"notification-error"})};a.on("command.room.remove",function(e){e&&d.room["delete"]("/users/"+e+"?type=username","").fail(function(e){t(e.status<500?e.responseJSON.error:"")})});var u=new l({model:o.troupe(),template:!1,el:"body",chatCollection:m});u.render(),new c({template:!1,el:"body"}).render();var g=i.Router.extend({routes:{"":"hideModal",share:"share","delete":"delete",people:"people",notifications:"notifications",markdown:"markdown",keys:"keys",integrations:"integrations",add:"addPeople","tags/:roomId":"editTags",autojoin:"autojoin"},autojoin:function(){d.post("/v1/rooms/"+o.getTroupeId()+"/users",{username:o().user.username}).then(function(){o.troupe().set("roomMember",!0)})},hideModal:function(){u.dialogRegion.destroy()},people:function(){n.e(20,function(e){var t=n(384);u.dialogRegion.show(new t({rosterCollection:p.roster}))})},notifications:function(){n.e(21,function(e){var t=n(117);u.dialogRegion.show(new t({}))})},markdown:function(){n.e(22,function(e){var t=n(387);u.dialogRegion.show(new t({}))})},keys:function(){n.e(23,function(e){var t=n(389);u.dialogRegion.show(new t({}))})},addPeople:function(){n.e(24,function(e){var t=o.troupe(),i=o.env("maxFreeOrgRoomMembers"),r="PUBLIC"!==t.get("security")&&t.get("githubType").indexOf("ORG")>=0&&!t.get("premium")&&t.get("userCount")>=i;if(r){var a=n(396);u.dialogRegion.show(new a({}))}else{var s=n(391);u.dialogRegion.show(new s({}))}})},editTags:function(){n.e(25,function(e){var t=n(398);u.dialogRegion.show(new t({roomId:o.troupe().get("id")}))})},integrations:function(){o.isTroupeAdmin()?n.e(26,function(e){var t=n(408);u.dialogRegion.show(new t({}))}):window.location="#"},share:function(){n.e(27,function(e){var t=n(410);u.dialogRegion.show(new t.Modal({}))})},"delete":function(){n.e(28,function(e){var t=n(413);u.dialogRegion.show(new t({}))})}}),v=new g,b=!1,w=function(){v.navigate("",{trigger:!0}),b=!1};a.on("keyboard.help.markdown",function(e){"markdown"===b?w():(a.trigger("focus.request.out",e),v.navigate("markdown",{trigger:!0}),b="markdown")}),a.on("keyboard.help.keyboard",function(e){"keys"===b?w():(a.trigger("focus.request.out",e),v.navigate("keys",{trigger:!0}),b="keys")}),a.on("keyboard.document.escape",function(){b&&w()}),r.syncRoom(),i.history.start()})},,,,,,,,,,,function(e,t,n){"use strict";var i=n(4),o=n(3),r=n(2);e.exports=function(){var e=r.env("basePath"),t={triggerParent:function(){var t=Array.prototype.slice.call(arguments,0);window.parent.postMessage(JSON.stringify({child_window_event:t}),e)}};return window.addEventListener("message",function(n){if(n.origin===e){var i;try{i=JSON.parse(n.data)}catch(o){return}i.child_window_event&&(i.child_window_event.push(n),t.trigger.apply(t,i.child_window_event))}},!1),i.extend(t,o.Events),t}()},,,function(e,t){"use strict";function n(e,t,n,i){e.addEventListener(t,this,!1),this.handleEvent=function(o){e.removeEventListener(t,this,!1),n.call(i,o)}}e.exports=function(e,t){new n(window,"DOMContentLoaded",e,t)}},function(e,t,n){"use strict";function i(){if(window.parent===window)return!1;try{return window.location.host==window.parent.location.host}catch(e){return!1}}function o(e){try{var t=JSON.stringify(e);a("post: %j to origin %s",t,r.env("basePath")),window.parent.postMessage(t,r.env("basePath"))}catch(n){a("Unable to post message: %j",n)}}var r=n(2),a=n(16)("app:frame-utils");i()&&o({type:"childframe:loaded"}),e.exports={hasParentFrameSameOrigin:i,postMessage:o}},,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(31);e.exports=function(e,t){var n=i(e,t);return n.src}},function(e,t,n){"use strict";function i(e){return{src:l+"?s="+e,size:e,srcset:l+"?s="+2*e+" 2x"}}function o(e){return-1!==e.indexOf("google")?"sw":"s"}function r(e,t){var n=c(e.gravatarImageUrl,!0);if(!n)return i(t);-1!==n.hostname.indexOf("github")&&e.username&&n.set("hostname","avatars"+s(e.username)+".githubusercontent.com");var r=o(n.hostname),a=t;"undefined"!=typeof window&&(a=t*(window.devicePixelRatio||1)),n.query[r]=a;var l=n.toString();n.query[r]=2*t;var u=n.toString()+" 2x";return{src:l,size:t,srcset:u}}function a(e,t,n){return-1===e.indexOf("_")?"https://avatars"+s(e)+".githubusercontent.com/"+e+"?"+(t?"v="+t:"")+"&s="+n:"/api/private/user-avatar/"+e+"?s="+n}var s=(n(4),n(32)),l=(n(33),"https://avatars1.githubusercontent.com/u/0"),c=n(34);e.exports=function(e,t){if(t=t||60,e){if(e.avatarUrlSmall)return{src:e.avatarUrlSmall.replace("=60","="+t),size:t,srcset:e.avatarUrlSmall.replace("=60","="+2*t)+" 2x"};if(e.gravatarImageUrl)return r(e,t);if(e.username){var n=e.gravatarVersion||e.gv;return{src:a(e.username,n,t),size:t,srcset:a(e.username,n,2*t)+" 2x"}}}return i(t)}},function(e,t){"use strict";e.exports=function(e){if(!e||!e.length)return 1;for(var t=5381,n=0;n<e.length&&8>n;n++)t=(t<<5)+t+e.charCodeAt(n);return(t>0?t:-t)%3}},function(e,t){e.exports={target:"webpack",isBrowser:!0}},function(e,t,n){"use strict";function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);var c,u,d,h,f=s.test(e),p=typeof t,m=this,g=0;for("object"!==p&&"string"!==p&&(n=t,t=null),n&&"function"!=typeof n&&(n=a.parse),t=r(t);g<l.length;g++)u=l[g],c=u[0],h=u[1],c!==c?m[h]=e:"string"==typeof c?~(d=e.indexOf(c))&&("number"==typeof u[2]?(m[h]=e.slice(0,d),e=e.slice(d+u[2])):(m[h]=e.slice(d),e=e.slice(0,d))):(d=c.exec(e))&&(m[h]=d[1],e=e.slice(0,e.length-d[0].length)),m[h]=m[h]||(u[3]||"port"===h&&f?t[h]||"":""),u[4]&&(m[h]=m[h].toLowerCase());n&&(m.query=n(m.query)),o(m.port,m.protocol)||(m.host=m.hostname,m.port=""),m.username=m.password="",m.auth&&(u=m.auth.split(":"),m.username=u[0]||"",m.password=u[1]||""),m.href=m.toString()}var o=n(35),r=n(36),a=n(37),s=/^\/(?!\/)/,l=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];i.prototype.set=function(e,t,n){var i=this;return"query"===e?("string"==typeof t&&t.length&&(t=(n||a.parse)(t)),i[e]=t):"port"===e?(i[e]=t,o(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="")):"hostname"===e?(i[e]=t,i.port&&(t+=":"+i.port),i.host=t):"host"===e?(i[e]=t,/\:\d+/.test(t)&&(t=t.split(":"),i.hostname=t[0],i.port=t[1])):i[e]=t,i.href=i.toString(),i},i.prototype.toString=function(e){e&&"function"==typeof e||(e=a.stringify);var t,n=this,i=n.protocol+"//";return n.username&&(i+=n.username,n.password&&(i+=":"+n.password),i+="@"),i+=n.hostname,n.port&&(i+=":"+n.port),i+=n.pathname,t="object"==typeof n.query?e(n.query):n.query,t&&(i+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(i+=n.hash),i},i.qs=a,i.location=r,e.exports=i},function(e,t){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,n){(function(t){"use strict";var i,o={hash:1,query:1};e.exports=function(e){e=e||t.location||{},i=i||n(34);var r,a={},s=typeof e;if("blob:"===e.protocol)a=new i(unescape(e.pathname),{});else if("string"===s){a=new i(e,{});for(r in o)delete a[r]}else if("object"===s)for(r in e)r in o||(a[r]=e[r]);return a}}).call(t,function(){return this}())},function(e,t){"use strict";function n(e){for(var t,n=/([^=?&]+)=([^&]*)/g,i={};t=n.exec(e);i[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return i}function i(e,t){t=t||"";var n=[];"string"!=typeof t&&(t="?");for(var i in e)o.call(e,i)&&n.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return n.length?t+n.join("&"):""}var o=Object.prototype.hasOwnProperty;t.stringify=i,t.parse=n},function(e,t,n){"use strict";var i=n(6),o=n(2),r=n(11),a=n(16)("app:api-client");e.exports=function(){function e(e,t){t||(t="");var n=o.env("apiBasePath");return e?n+e()+t:n+t}function t(e,t){return t||(t=""),e?e()+t:t}function n(e,t){return t||(t=""),e?e()+t:t}function s(){var e=i.Deferred();return o.getAccessToken(function(t){e.resolve(t)}),e}function l(e,t,n,o,r,l,c){c=d(c,o),"delete"!==n||l||delete c.contentType;var h;return h=c.contentType===p?JSON.stringify(l):l,s().then(function(o){var s=e(t,r);a("%s: %s",n,s);var l=i.ajax({url:s,contentType:c.contentType,dataType:c.dataType,type:n,global:c.global,data:h,context:c.context,timeout:c.timeout,async:c.async,headers:{"x-access-token":o}});return l.fail(function(e){c.global&&u(e,n,s)}),l})}function c(e){for(var t=Object.keys(b),n=0;n<t.length;n++){var i=t[n],o=b[i];if(o.test(e))return i}}function u(e,t,n){var i=e.status,o=c(n);if("error"==e.statusText&&404===i)r.trigger("bugreport","ajaxError: unreachable: "+t+" "+(o||n),{tags:{type:"ajax",subtype:"unreachable",url:n}});else{if(500>i)return;r.trigger("bugreport","ajaxError: HTTP "+i+" on "+t+" "+(o||n),{tags:{type:"ajax",subtype:"HTTP"+i,url:n}})}r.trigger("ajaxError")}function d(e,t){return e||(e={}),Object.keys(t).forEach(function(n){void 0===e[n]&&(e[n]=t[n])}),e}function h(e,t){return v.reduce(function(n,i){var o=i[0],r=i[1];return n[o]=l.bind(n,e,t,o,r),n},{url:function(n){return e(t,n)},channel:function(e){return n(t,e)},channelGenerator:function(e){return function(){return n(t,e)}}})}var f=6e4,p="application/json",m={timeout:f,dataType:"json"},g={timeout:f,dataType:"json",contentType:p},v=[["get",m],["post",g],["patch",g],["put",g],["delete",g]],b={githubIssues:/^\/api\/private\/gh\/[^/]+\/[^/]+\/issues/,githubUsers:/^\/api\/private\/gh\/users\//};return d(h(e),{user:h(e,function(){return"/v1/user/"+o.getUserId()}),room:h(e,function(){return"/v1/rooms/"+o.getTroupeId()}),userRoom:h(e,function(){return"/v1/user/"+o.getUserId()+"/rooms/"+o.getTroupeId()}),priv:h(e,function(){return"/private"}),web:h(t)})}()},function(e,t,n){"use strict";var i=n(4),o=n(3),r=n(2),a=n(40),s=n(65),l=n(66),c=n(68),u=n(69),d=n(71).LiveCollection,h=n(114),f=n(116),p=r.getUserId(),m=o.Model.extend({idAttribute:"id",initialize:function(){this.listenTo(this,"sync",this.triggerSynced),this.listenTo(this,"request",this.triggerSyncing),this.listenTo(this,"error",this.triggerSyncError),this.listenTo(this,"remove",function(){this.stopListening(this)})},triggerSynced:function(){this.trigger("syncStatusChange","synced")},triggerSyncing:function(){this.trigger("syncStatusChange","syncing")},triggerSyncError:function(){this.trigger("syncStatusChange","syncerror")},parse:function(e){return e.sent&&(e.sent=a(e.sent,a.defaultFormat)),e.editedAt&&(e.editedAt=a(e.editedAt,a.defaultFormat)),e.unread&&e.fromUser&&e.fromUser.id===p&&(e.unread=!1),e},toJSON:function(){var e=i.clone(this.attributes),t=this.get("sent");return t&&(e.sent=t.format()),delete e.html,e},sync:f.sync}),g=d.extend({model:m,modelName:"chat",client:function(){return h.getClient()},urlTemplate:"/v1/rooms/:troupeId/chatMessages",contextModel:r.contextModel(),comparator:function(e,t){var n=e.get("sent"),i=t.get("sent");return n?i?n.valueOf()-i.valueOf():-1:i?1:0},initialize:function(){this.listenTo(this,"add remove",function(e,t){t.once("sort",function(){s.calc.call(this,e)})}),this.listenTo(this,"sync",function(e){e instanceof o.Model&&this.checkClientClockSkew(e)}),this.listenTo(this,"change:sent",function(e){this.checkClientClockSkew(e)}),this.listenTo(this,"reset sync",function(){s.parse(this)}),this.listenTo(r.troupe(),"change:id",function(){this.setAtTop(!1)})},getQuery:function(){return{lean:!0}},getSnapshotExtras:function(){return{lean:!0}},parse:function(e){return s.parse(e)},findModelForOptimisticMerge:function(e){var t=this.find(function(t){return!t.id&&t.get("text")===e.get("text")});return t},checkClientClockSkew:function(e){var t=e.attributes.sent,n=e.previousAttributes().sent;if(t&&n){var i=t.valueOf()-n.valueOf();i>2e4&&u.warn("Clock skew is "+i+"ms")}},sync:f.sync});c.mixin(g,l);var v=o.Model.extend({idAttribute:"id"}),b=d.extend({model:v,modelName:"chatReadBy",client:function(){return h.getClient()},urlTemplate:"/v1/rooms/:troupeId/chatMessages/:chatId/readBy",contextModel:function(){return new o.Model({troupeId:r.getTroupeId(),chatId:this.chatMessageId})},initialize:function(e,t){var n=t.userCollection;n&&(this.transformModel=function(e){var t=n.get(e.id);return t?t.toJSON():e}),this.chatMessageId=t.chatMessageId},sync:f.sync});e.exports={ReadByModel:v,ReadByCollection:b,ChatModel:m,ChatCollection:g}},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(4),o=n(3);e.exports=function(){function e(e){return i.isArray(e)?new o.Collection(e):e}function t(e){var t=null;if(0===e)return e;for(;e--&&(t=this.at(e),!t.get("burstStart")););return e}function n(e){if(e===this.length-1)return e;for(var t=null;e<this.length&&(t=this.at(e),!t.get("burstStart"));)e++;return e}function r(e){if(!("burstStart"in e.attributes)){var i=this.indexOf(e),o=t.call(this,i),r=n.call(this,i);s(this,o,r)}}function a(e,t){var n=e.get("fromUser"),i=e.get("sent"),o=n&&n.username,r=i&&new Date(i).valueOf()||Date.now();if(e.get("status"))return t.burstStart=!0,t.prevFinal=!0,void(t.time=r);if(!t.user)return t.burstStart=!0,t.prevFinal=!0,t.user=o,void(t.time=r);var a=r-t.time>l?!0:!1;return t.prevIsStatus||o!==t.user||a?(t.burstStart=!0,t.prevFinal=!0,t.user=o,void(t.time=r)):(t.burstStart=!1,t.prevFinal=!1,void(t.user=o))}function s(t,n,i){var o=e(t);if(o){n="undefined"!=typeof n?n:0,i="undefined"!=typeof i?i:o.length-1;var r={user:null,burstStart:!1,prevFinal:!1,prevIsStatus:!1,time:null};return o.slice(n,i+1).forEach(function(e,t){t+=n,t>0&&(r.prevIsStatus=o.at(t-1).get("status")),a(e,r),e.set("burstStart",r.burstStart),t>0&&o.at(t-1).set("burstFinal",r.prevFinal)}),o.toJSON()}}var l=3e5;return{calc:r,parse:s}}()},function(e,t,n){"use strict";var i=n(4),o=n(67),r=n(2),a=n(11),s=n(16)("app:infinite-mixin");e.exports=function(){return{initialize:function(){this.atTop=!1,this.atBottom=!0},getLoadLimit:function(){return Math.round((window.screen.height-150)/20)},getCollectionLimit:function(){return 5*this.getLoadLimit()},ignoreDataChange:function(e){return"create"===e.operation?!this.atBottom:!1},fetchLatest:function(e,t,n){var r=this;if(!this.atBottom&&!this.loading){var a=this.getLoadLimit(),l=this.getQuery&&this.getQuery()||{};l=i.defaults(l,{limit:a});var c=o.index(this.pluck("id"),o.identityTransform);s("Fetch latest: options=%j data=%j",e,l),this.trigger("fetch:latest"),this.fetch({remove:"remove"in e?e.remove:!1,add:"add"in e?e.add:!0,merge:"merge"in e?e.merge:!0,data:l,success:function(e,i){r.trigger("fetch:latest:complete"),r.setAtBottom(!0);var s=i.map(o.idTransform),l=s.some(function(e){return c[e]});if(!l){var u=Object.keys(c).map(function(e){return r.get(e)});r.remove(u)}i.length<a?r.setAtTop(!0):r.trimTop(),t&&t.call(n)},error:function(e){r.trigger("fetch:latest:complete"),t&&t.call(n||null,e)}})}},fetchMoreBefore:function(e,t,n){if(!this.atTop&&!this.loading){var r;this.length&&(r=o.min(this.pluck("id")));var a=this.getLoadLimit(),l=this.getQuery&&this.getQuery()||{};l=i.defaults(l,{beforeId:r,limit:a});var c=this;s("Fetch before: options=%j data=%j",e,l),this.trigger("fetch:before"),this.fetch({remove:"remove"in e?e.remove:!1,add:"add"in e?e.add:!0,merge:"merge"in e?e.merge:!0,data:l,success:function(e,i){c.trigger("fetch:before:complete"),i.length<a&&c.setAtTop(!0),c.trimBottom(),t&&t.call(n)},error:function(e){c.trigger("fetch:before:complete"),t&&t.call(e)}})}},fetchMoreAfter:function(e,t,n){var r=this;if(!this.atBottom&&!this.loading){var a;this.length&&(a=o.max(this.pluck("id")));var l=this.getLoadLimit(),c=this.getQuery&&this.getQuery()||{};c=i.defaults(c,{afterId:a,limit:l}),s("Fetch after: options=%j data=%j",e,c),this.trigger("fetch:after"),this.fetch({remove:"remove"in e?e.remove:!1,add:"add"in e?e.add:!0,merge:"merge"in e?e.merge:!0,data:c,success:function(e,i){r.trigger("fetch:after:complete"),i.length<l&&r.setAtBottom(!0),r.trimTop(),t&&t.call(n)},error:function(e){r.trigger("fetch:after:completed"),t&&t.call(e)}})}},fetchAtPoint:function(e,t,n,r){if(t||(t={}),!this.loading){var a=this.getLoadLimit(),l=o.index(this.pluck("id"),o.identityTransform),c=this.getQuery&&this.getQuery()||{};c=i.defaults(c,e,{limit:a});var u=this;s("Fetch around: options=%j data=%j",t,c),this.trigger("fetch:at"),this.fetch({remove:"remove"in t?t.remove:!1,add:"add"in t?t.add:!0,merge:"merge"in t?t.merge:!0,data:c,success:function(e,t){u.trigger("fetch:at:complete");var i=t.map(o.idTransform),a=i.some(function(e){return l[e]});if(!a){u.setAtBottom(!1),u.setAtTop(!1);var s=Object.keys(l).map(function(e){return u.get(e)});u.remove(s)}u.trimBottom(),n&&n.call(r)},error:function(e){u.trigger("fetch:at:complete"),n&&n.call(e)}})}},fetchFromMarker:function(e,t,n,i){return this.fetchAtPoint({marker:e},t,n,i)},ensureLoaded:function(e,t,n){function i(e,i){t&&t.call(n,e,i)}var o=this.get(e);return o?i(null,o):void this.fetchAtPoint({aroundId:e},{},function(t){return t?i(t):i(null,this.get(e))},this)},trimTop:function(){var e=this.getCollectionLimit();if(this.length>e){var t=this.slice(0,-e);this.remove(t),this.setAtTop(!1)}},trimBottom:function(){var e=this.getCollectionLimit();if(this.length>e){var t=this.slice(e);this.remove(t),this.setAtBottom(!1)}},getSnapshotState:function(){var e;this.getSnapshotExtras&&(e=this.getSnapshotExtras());var t=r().snapshots;if(t){var n=t[this.modelName];if(n&&this.contextModel.get("troupeId")===r.getTroupeId()){this.setAtTop(!1),this.setAtBottom(!n.aroundId),this.listenToOnce(this,"snapshot",function(){delete t[this.modelName]});var o=i.extend(n,e);return o}}if(!this.length)return e;if(this.atBottom)return i.extend({limit:this.length},e);var a=this.at(this.length-1).get("id");return i.extend({limit:this.length,beforeInclId:a},e)},setAtTop:function(e){!!e!=!!this.atTop&&(this.atTop=!!e,this.trigger("atTopChanged",this.atTop))},setAtBottom:function(e){!!e!=!!this.atBottom&&(this.atBottom=!!e,this.trigger("atBottomChanged",this.atBottom),a.trigger("atBottomChanged",this.atBottom))}}}()},function(e,t){"use strict";e.exports=function(){function e(e,t){return e===t?0:e>t?1:-1}function t(e){return e&&e.id}function n(e){return e}return{naturalComparator:e,identityTransform:n,idTransform:t,index:function(e,n){n||(n=t);for(var i={},o=0;o<e.length;o++){var r=e[o],a=n(r);i[a]?i[a].push(r):i[a]=[r]}return i},extractDateFromDateTime:function(e){return e?new Date(e.getFullYear(),e.getMonth(),e.getDate()):null},extractTimeFromDateTime:function(e){if(!e)return null;var t=e.getHours()+":"+e.getMinutes();return t},formatDate:function(e){return e?e.toLocaleDateString():""},max:function(t,n){n||(n=e);for(var i=t[0],o=1;o<t.length;o++){var r=t[o];n(r,i)>0&&(i=r)}return i},min:function(t,n){n||(n=e);for(var i=t[0],o=1;o<t.length;o++){var r=t[o];n(i,r)>0&&(i=r)}return i}}}()},function(e,t,n){var i,o;i=[n(4)],o=function(e){return function(n){var i;i=t,i.mixins={},i.mixin=function(t){var n=e.chain(arguments).toArray().rest().flatten().value(),o={};e(n).each(function(n){e.isString(n)&&(n=i.mixins[n]),e(n).each(function(n,i){e.isFunction(n)?(t.prototype[i]&&(o[i]=o[i]||[t.prototype[i]],o[i].push(n)),t.prototype[i]=n):e.isObject(n)&&(t.prototype[i]=e.extend({},n,t.prototype[i]||{}))})}),e(o).each(function(n,i){t.prototype[i]=function(){var t=this,i=arguments,o=void 0;return e(n).each(function(n){var r=e.isFunction(n)?n.apply(t,i):n;o=void 0===r?o:r}),o}})};var o;return i.patch=function(t){o=t.Model.extend;var n=function(e,t){var n=o.call(this,e,t),r=n.prototype.mixins;return r&&n.prototype.hasOwnProperty("mixins")&&i.mixin(n,r),n};e([t.Model,t.Collection,t.Router,t.View]).each(function(t){t.mixin=function(){i.mixin(this,e.toArray(arguments))},t.extend=n})},i.unpatch=function(t){e([t.Model,t.Collection,t.Router,t.View]).each(function(e){e.mixin=void 0,e.extend=o})},i}(window),window.Cocktail}.apply(t,i),!(void 0!==o&&(e.exports=o))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(){return navigator.userAgent.toLowerCase().indexOf("mobile")>=0}function o(e){c.getAccessToken(function(t){var n=i();return e({token:t,version:c.env("version"),troupeId:c.getTroupeId(),connType:n?"mobile":"online",client:n?"mobweb":"web",eyeballs:v?1:0})})}function r(){if(w)return w;var e=c.env("websockets");return w=new f({fayeUrl:e.fayeUrl,authProvider:o,fayeOptions:e.options,extensions:[_,k]}),w.on("stats",function(e,t,n){u.trigger("stats."+e,t,n)}),g&&(y=setInterval(function(){p("Performing ping"),w.testConnection("ping")},m)),w.subscribeTemplate({urlTemplate:"/v1/user/:userId",contextModel:c.contextModel(),onMessage:function(e){var t=c.user();"patch"===e.operation&&e.model&&e.model.id===t.id&&t.set(e.model),T[e.notification]&&u.trigger(e.notification,e)}}),w}function a(){return w&&w.getClientId()}function s(e){r().reset(e)}function l(e){r().testConnection(e)}var c=n(2),u=n(11),d=n(69),h=n(115),f=n(71).RealtimeClient,p=n(16)("app:realtime"),m=3e4,g=!0,v=!0;u.on("eyeballStateChange",function(e){p("Switching eyeball state to %s",e),v=e});var b,w,y,_={incoming:function(e,t){if("/meta/handshake"!==e.channel)return t(e);if(e.successful){var n=e.ext;if(n&&(n.appVersion&&n.appVersion!==c.env("version")?(p("Application version mismatch"),b||(b=[setTimeout(function(){u.trigger("app.version.mismatch"),u.trigger("stats.event","reload.warning.10m")},6e5),setTimeout(function(){u.trigger("app.version.mismatch"),u.trigger("stats.event","reload.warning.1hr")},36e5),setTimeout(function(){u.trigger("stats.event","reload.forced"),setTimeout(function(){window.location.reload(!0)},3e4)},216e5)])):b&&(b.forEach(function(e){clearTimeout(e)}),b=null),n.context)){var i=n.context;i.troupe&&c.setTroupe(i.troupe),i.user&&c.setUser(i.user)}}t(e)}},x=!1,k={incoming:function(e,t){e.error&&e.advice&&"none"===e.advice.reconnect&&(x||(x=!0,d.error("Access denied",e),window.alert("Realtime communications with the server have been disconnected."),h())),t(e)}},T={user_notification:1,activity:1};u.on("eyeballsInvalid",function(e){p("Resetting connection after invalid eyeballs"),s(e)}),u.on("reawaken",function(){p("Recycling connection after reawaken"),s(a())}),document.addEventListener&&document.addEventListener("deviceReady",function(){document.addEventListener("online",function(){p("online"),l("device_ready")},!1)},!1),e.exports={getClientId:a,subscribe:function(e,t,n){return r().subscribe(e,t,n)},testConnection:l,reset:s,getClient:function(){return r()}},window._realtime=e.exports},function(e,t,n){"use strict";function i(e){try{window.parent.location.href=e}catch(t){window.location.href=e}}var o=n(38);e.exports=function(){return o.web.post("/logout").then(function(e){i(e&&e.redirect?e.redirect:"/")}).fail(function(){i("/")})}},function(e,t,n){"use strict";var i=n(4),o=n(38),r={create:"post",update:"put",patch:"patch","delete":"delete",read:"get"};e.exports={sync:function(e,t,n){var a=n.url||i.result(t,"url");if(!a)throw new Error("URL required");var s,l=r[e];return s="get"===l?o[l](a,n.data):o[l](a,t),n.success&&(s=s.then(n.success)),n.error&&(s=s.fail(n.error)),t.trigger("request",t,null,n),s}}},,,,,function(e,t,n){"use strict";var i=n(6),o=n(4),r=n(118),a=n(122),s=n(123);n(124),n(128);var l=r.LayoutView.extend({template:a,className:"modal",events:{"click .close":"hide","click [data-action=close]":"hide","click [data-component=modal-btn]":"onMenuItemClicked"},regions:{modalBody:"#modal-body-region"},initialize:function(e){this.options={menuItems:[],title:null},o.extend(this.options,e),this.view=this.options.view||this.view},serializeData:function(){var e=this.menuItems||this.options.menuItems;return{title:this.options.title,hasMenuItems:!!e.length,menuItems:e}},onMenuItemClicked:function(e){e.preventDefault();var t=i(e.target).attr("data-action");this.view.trigger("menuItemClicked",t),this.trigger("menuItemClicked",t)},onRender:function(){var e=this;this.$el.hide(),this.modalBody.show(this.view),s()||this.disableAutoFocus||window.setTimeout(function(){try{var t=e.$el.find("input[type=text], input[type=url], input[type=tel], input[type=number], input[type=color], input[type=email]")[0];t&&(t.focus(),t.select())}catch(n){}},100)},setButtonState:function(e,t){var n=this.$el.find("button[data-action="+e+"]");t?n.removeAttr("disabled"):n.attr("disabled",!0)},hideActions:function(){var e=this.$el.find(".modal-footer .action");e.hide()},showActions:function(){var e=this.$el.find(".modal-footer .action");e.show()},showPremium:function(){var e=this.$el.find(".premium");e.removeClass("hidden"),e.show()},hidePremium:function(){var e=this.$el.find(".modal-footer .premium");e.addClass("hidden"),e.hide()},onDestroy:function(){this.view.destroy(),this.view.dialog=null},prepare:function(){this.rendered||(this.render(),this.rendered=!0)},show:function(){this.view.dialog=this;var e=this;this.isShown||(this.prepare(),i("body").addClass("modal-open"),this.isShown=!0,this.$el.trigger("show"),this.trigger("show"),this.escape(),this.backdrop(function(){e.$el.parent().length||e.$el.appendTo(e.$backdrop),e.$el.show(),e.$el.addClass("in"),e.$el.trigger("shown"),e.trigger("shown")}))},hide:function(e){return e&&e.preventDefault(),this.navigable?void(window.location="#"):void this.hideInternal()},navigationalHide:function(){this.hideInternal()},hideInternal:function(){this.isShown&&(this.isShown=!1,i("body").removeClass("modal-open"),this.escape(),this.$el.trigger("hide").removeClass("in"),this.trigger("hide"),this.hideModal())},hideModal:function(){this.$el.hide().trigger("hidden"),this.trigger("hidden"),this.backdrop(),this.destroy()},backdrop:function(e){if(this.isShown){this.$backdrop=i('<div class="modal-backdrop" />').appendTo(document.body);var t=this.$backdrop;this.$backdrop.click(function(e){e.target===this&&t.modal.hide()}),this.$backdrop.modal=this,this.$backdrop.addClass("in"),e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),this.removeBackdrop()):e&&e()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},escape:function(){function e(e){27==e.which&&t.hide()}var t=this;this.isShown?i(document).on("keydown",e):this.isShown||i(document).off("keydown",e)}});e.exports=l},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){var o;return'    <h1 class="modal--default__header__title">'+this.escapeExpression((o=null!=(o=t.title||(null!=e?e.title:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"title",hash:{},data:i}):o))+"</h1> "},3:function(e,t,n,i){var o;return null!=(o=t.each.call(e,null!=e?e.menuItems:e,{name:"each",hash:{},fn:this.program(4,i,0),inverse:this.noop,data:i}))?o:""},4:function(e,t,n,i){var o;return"\n      <button\n        "+(null!=(o=t["if"].call(e,null!=e?e.className:e,{name:"if",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?o:"")+"\n        "+(null!=(o=t["if"].call(e,null!=e?e.action:e,{name:"if",hash:{},fn:this.program(8,i,0),inverse:this.noop,data:i}))?o:"")+"\n        "+(null!=(o=t["if"].call(e,null!=e?e.disabled:e,{name:"if",hash:{},fn:this.program(10,i,0),inverse:this.noop,data:i}))?o:"")+'\n        data-component="modal-btn">\n        '+this.escapeExpression(this.lambda(null!=e?e.text:e,e))+"\n      </button>\n\n"},5:function(e,t,n,i){var o;return'class="'+this.escapeExpression(this.lambda(null!=e?e.className:e,e))+" "+(null!=(o=t["if"].call(e,null!=e?e.pull:e,{name:"if",hash:{},fn:this.program(6,i,0),inverse:this.noop,data:i}))?o:"")+'"  '},6:function(e,t,n,i){var o;return"pull-"+this.escapeExpression((o=null!=(o=t.pull||(null!=e?e.pull:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"pull",hash:{},data:i}):o))},8:function(e,t,n,i){return'   data-action="'+this.escapeExpression(this.lambda(null!=e?e.action:e,e))+'" '},10:function(e,t,n,i){return' disabled="true" '},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a,s='<div class="modal--default">\n\n  <header class="modal--default__header">\n'+(null!=(o=t["if"].call(e,null!=e?e.title:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+'\n    <span class="modal--default__header__icon icon-cancel-circle" data-action="close"></span>\n  </header>\n\n  <section class="modal--default__content" id="modal-body-region"></section>\n\n  <footer class="modal--default__footer">\n';return r=null!=(r=t.hasMenuItems||(null!=e?e.hasMenuItems:e))?r:t.helperMissing,a={name:"hasMenuItems",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i},o="function"==typeof r?r.call(e,a):r,t.hasMenuItems||(o=t.blockHelperMissing.call(e,o,a)),null!=o&&(s+=o),s+"  </footer>\n\n</div>\n"},useData:!0})},function(e,t){"use strict";var n=!!navigator.userAgent.match(/(iPhone|iPod|Android|BlackBerry)/);e.exports=function(){return n}},function(e,t,n){"use strict";n(125),n(126),e.exports=function(){return null}()},function(e,t,n){"use strict";var i=n(21)["default"];e.exports=function(){function e(e,n){var o=t++,r=this.getPrerendered(e,n.hash,o);return this.prerenderedViews||(this.prerenderedViews={}),this.prerenderedViews[o]={widgetName:e,model:n.hash},new i.SafeString(r)}var t=1;return i.registerHelper("widget",e),e}()},function(e,t,n){"use strict";var i=n(127),o=n(21)["default"];
o.registerHelper("cdn",i)},function(e,t,n){"use strict";var i=n(2);e.exports=function(){function e(e){return"../"+e}function t(e){return"/_s/l/"+e}function n(e,t){var n=t&&t.nonrelative,i=n?"https://":"//";return t&&t.notStatic===!0?i+r[0]+"/"+e:i+r[0]+l+"/"+e}function o(e,t){for(var n=0,i=0;i<e.length;i+=3)n+=e.charCodeAt(i);var o=r[n%a],s=t&&t.nonrelative,c=s?"https://":"//";return t&&t.notStatic===!0?c+o+"/"+e:c+o+l+"/"+e}var r=i.env("cdns"),a=r&&r.length,s=i.env("assetTag"),l=s?"/_s/"+s:"";return"file:"===window.location.protocol?e:a?1==a?n:o:t}()},function(e,t,n){var i=n(129);"string"==typeof i&&(i=[[e.id,i,""]]);n(131)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(130)(),t.push([e.id,"/*\n  THERE IS A LOT OF SPECIFIC LOGIC IN HERE THAT SHOULD BE REMOVED\n  CURRENTLY I CAN'T FIND A POSTCSS PLUGIN WHICH CONVERTS COLORS PROPERLY\n  FOR EXAMPLE darken(10%)\n  AS SUCH THERE IS A LOT OF SPECIFIC CONDITIONALS TO GET THE DESIRED RESULTS\n*/\n\n\n.modal--default {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  position: relative;\n  width: 620px;\n  max-width: 95%;\n  background: white;\n  border-radius: .5rem;\n  text-align: left;\n  /*\n   * TODO this is shared in several places ... should it be in a mixin\n   */\n  box-shadow: 0 0 .4em rgba(0, 0, 0, .3);\n  -webkit-transition: box-shadow .2s linear;\n  transition: box-shadow .2s linear;\n  -webkit-box-align: start;\n  -webkit-align-items: flex-start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n}\n\n.modal--default__header {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: row;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  position: relative;\n  box-sizing: border-box;\n  width: 100%;\n  max-width: 100%;\n  padding: 1em;\n  background: white;\n  border-top-left-radius: .5rem;\n  border-top-right-radius: .5rem;\n}\n\n.modal--default__header__title {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 2.132rem;\n  font-weight: 400;\n  line-height: 3.4rem;\n  max-width: 100%;\n}\n\n.modal--default__header__icon {\n  margin-left: auto;\n  font-size: 1.2em;\n  color: #949494;\n  -webkit-transition: color .2s linear;\n  transition: color .2s linear;\n}\n\n.modal--default__header__icon:hover {\n  cursor: pointer;\n  color: #3a3133;\n}\n\n.modal--default__content {\n  position: relative;\n  box-sizing: border-box;\n  width: 100%;\n  padding: 1em;\n  background: #f2f0ed;\n}\n\n/* MESSAGES -> error || info || success*/\n.modal--default__content__error {\n  color: #ed1965;\n}\n\n.modal--default__content__success {\n  color: #46bc99;\n}\n\n.modal--default__content__info {\n  color: #f68d42;\n}\n\n.modal--default__footer {\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  text-align: center;\n  position: relative;\n  box-sizing: border-box;\n  width: 100%;\n  padding: 1em;\n  background: white;\n  border-bottom-left-radius: .5rem;\n  border-bottom-right-radius: .5rem;\n\n}\n\n.modal--default__footer:after {\n  clear: both;\n}\n\n/* TODO Figure out how to manage this better */\n\n.modal--default__footer *:last-child {\n  margin-right: 0;\n  margin-left: auto;\n}\n\n.modal--default__footer *:first-child {\n  float: left;\n}\n\n.modal--default__footer *:only-child {\n  float: right;\n}\n\n.modal--default__footer .pull-left {\n  float: left;\n}\n\n.modal--default__footer .pull-right {\n  float: right;\n}\n\n/* FOOTER BUTTONS  */\n.modal--default__footer__btn  {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.2rem;\n  font-weight: 400;\n  line-height: 1.9rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #46bc99;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n}\n.modal--default__footer__btn:hover {\n  text-decoration: none;\n}\n.modal--default__footer__btn:hover {\n  background: #3ea17f;\n}\n.modal--default__footer__btn[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n.modal--default__footer__btn[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.modal--default__footer__btn--negative  {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.2rem;\n  font-weight: 400;\n  line-height: 1.9rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #ed1965;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n  color: #ed1965;\n  background: white;\n  border: 1px solid #f5e0dc;\n}\n\n.modal--default__footer__btn--negative:hover {\n  text-decoration: none;\n}\n\n.modal--default__footer__btn--negative:hover {\n  background: #f5e0dc;\n  border: 1px solid #ed1965;\n}\n\n.modal--default__footer__btn--negative[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.modal--default__footer__btn--negative[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.modal--default__footer__btn--neutral  {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.2rem;\n  font-weight: 400;\n  line-height: 1.9rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #f2f0ed;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n  color: black;\n  border: 1px solid #d5d5d5;\n}\n\n.modal--default__footer__btn--neutral:hover {\n  text-decoration: none;\n}\n\n.modal--default__footer__btn--neutral:hover {\n  background: #d5d5d5;\n}\n\n.modal--default__footer__btn--neutral[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.modal--default__footer__btn--neutral[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n\n/* FOOTER LINKS */\n.modal--default__footer__link {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.2rem;\n  font-weight: 400;\n  line-height: 1.9rem;\n  border: none;\n  background: none;\n  outline: none;\n  color: #46bc99;\n  text-transform: uppercase;\n  font-weight: 400;\n  text-decoration: none;\n  letter-spacing: 0.1em;\n}\n.modal--default__footer__link:hover {\n  cursor: pointer;\n  color: #3ea17f;\n}\n\n.modal--default__footer__link--negative {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.2rem;\n  font-weight: 400;\n  line-height: 1.9rem;\n  border: none;\n  background: none;\n  outline: none;\n  color: #ed1965;\n  text-transform: uppercase;\n  font-weight: 400;\n  text-decoration: none;\n  letter-spacing: 0.1em;\n}\n\n.modal--default__footer__link--negative:hover {\n  cursor: pointer;\n  color: #d5145b;\n}\n\n.modal--default__footer__link--neutral {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.2rem;\n  font-weight: 400;\n  line-height: 1.9rem;\n  border: none;\n  background: none;\n  outline: none;\n  color: #949494;\n  text-transform: uppercase;\n  font-weight: 400;\n  text-decoration: none;\n  letter-spacing: 0.1em;\n}\n\n.modal--default__footer__link--neutral:hover {\n  cursor: pointer;\n  color: #858585;\n}\n\n.modal--default__footer__btn,\n.modal--default__footer__btn--negative,\n.modal--default__footer__btn--neutral,\n.modal--default__footer__link,\n.modal--default__footer__link--negative,\n.modal--default__footer__link--neutral {\n}\n\n/* Flexbox layout break in IE.\n * Migrating to floats solved the problem but you don't get nice vertical centring\n * therefore we need to add a margin-top to text links ... ugh\n * jp 5/11/15\n * */\n.modal--default__footer__link,\n.modal--default__footer__link--negative,\n.modal--default__footer__link--neutral {\n  margin-top: 10px;\n}\n",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=d[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(s(i.parts[r],t))}else{for(var a=[],r=0;r<i.parts.length;r++)a.push(s(i.parts[r],t));d[i.id]={id:i.id,refs:1,parts:a}}}}function o(e){for(var t=[],n={},i=0;i<e.length;i++){var o=e[i],r=o[0],a=o[1],s=o[2],l=o[3],c={css:a,media:s,sourceMap:l};n[r]?n[r].parts.push(c):t.push(n[r]={id:r,parts:[c]})}return t}function r(){var e=document.createElement("style"),t=p();return e.type="text/css",t.appendChild(e),e}function a(){var e=document.createElement("link"),t=p();return e.rel="stylesheet",t.appendChild(e),e}function s(e,t){var n,i,o;if(t.singleton){var s=g++;n=m||(m=r()),i=l.bind(null,n,s,!1),o=l.bind(null,n,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=a(),i=u.bind(null,n),o=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=r(),i=c.bind(null,n),o=function(){n.parentNode.removeChild(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}function l(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=v(t,o);else{var r=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function c(e,t){var n=t.css,i=t.media;t.sourceMap;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function u(e,t){var n=t.css,i=(t.media,t.sourceMap);i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([n],{type:"text/css"}),r=e.href;e.href=URL.createObjectURL(o),r&&URL.revokeObjectURL(r)}var d={},h=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},f=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),p=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,g=0;e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=f());var n=o(e);return i(n,t),function(e){for(var r=[],a=0;a<n.length;a++){var s=n[a],l=d[s.id];l.refs--,r.push(l)}if(e){var c=o(e);i(c,t)}for(var a=0;a<r.length;a++){var l=r[a];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete d[l.id]}}}};var v=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},,function(e,t,n){"use strict";function i(){if(l){if(l.permission)return l.permission;switch(c.checkPermission()){case 0:return"granted";case 1:return"default";case 2:return"denied"}}}function o(e){var t=e.link,n=e.title,i=e.text,o=e.icon||s("images/icon-logo-red-64.png"),r=new l(n,{body:i,icon:o});setTimeout(function(){r.close()},1e4),r.onclick=function(){if(window.focus(),t){var e=u.parse(t);d.routeLink(e,{appFrame:!0})}}}function r(){h||(h=!0,a.on("user_notification",function(e){o(e)}))}var a=n(11),s=n(127),l=window.Notification,c=window.webkitNotifications,u=n(134),d=n(135),h=!1;e.exports={hasNotBeenSetup:function(){return"default"===i()},hasBeenDenied:function(){return"denied"===i()},hasBeenGranted:function(){return"granted"===i()},enable:function(){l&&("granted"===i()?r():l.requestPermission(function(){r()}))}}},function(e,t){"use strict";function n(e){var t=document.createElement("a");return t.href=e,{protocol:t.protocol,hostname:t.hostname,port:t.port,pathname:t.pathname,search:t.search,hash:t.hash,host:t.host,href:t.href}}function i(e){return decodeURIComponent(e.replace(/\+/g," "))}function o(e){var t={};if(!e)return t;for(var n,o=e.substring(1),r=/([^&=]+)=?([^&]*)/g;n=r.exec(o);)t[i(n[1])]=i(n[2]);return t}function r(e){var t=document.createElement("a");return t.href=document.location.href,["href","protocol","hostname","search","hash","pathname"].forEach(function(n){if(e.hasOwnProperty(n)&&void 0!==e[n]){if(("protocol"===n||"hostname"===n)&&""===e[n])return;t[n]=e[n]}}),t.href}e.exports={parse:n,parseSearch:o,format:r}},function(e,t,n){"use strict";function i(e,t){var n=e.protocol+"//"+e.host,i=n===a.env("basePath"),o=window.location,r=t&&t.appFrame;if(!r&&o.scheme===e.scheme&&o.host===e.host&&o.pathname===e.pathname&&o.search===e.search)return window.location=e.href,!0;if(i&&l(e.pathname)){var c=e.pathname.substring(1),u="chat";return c===a.user().get("username")&&(u="home"),s.trigger("navigation",e.pathname+e.search,u,c),!0}}function o(){r(document).on("click","a",function(e){var t=e.currentTarget,n=c.get(t,"disableRouting");n||i(t)&&e.preventDefault()})}var r=n(6),a=n(2),s=n(11),l=n(136),c=n(138);e.exports={installLinkHandler:o,routeLink:i}},function(e,t,n){"use strict";var i=new RegExp("^\\/("+n(137).join("|")+")\\b");e.exports=function(e){return e?i.test(e)?!1:/\/archives\/(all|\d{4}\/\d{2}\/\d{2})/.test(e)?!1:/^\/orgs\//.test(e)?!1:/\/[^]+/.test(e):!1}},function(e,t){e.exports=["_s","about","api","explore","home","login","mobile","settings","logout","apps"]},function(e,t){"use strict";function n(e){var t=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});return"data-"+t.toLowerCase()}document.documentElement.dataset?e.exports={get:function(e,t){return e&&e.dataset&&e.dataset[t]},set:function(e,t,n){e.dataset[t]=n}}:e.exports={get:function(e,t){return e&&e.getAttribute(n(t))},set:function(e,t,i){return e.setAttribute(n(t),i)}}},,function(e,t){"use strict";e.exports=function(){return{currentView:null,show:function(e){this.currentView&&this.currentView.hideInternal(),this.currentView=e,e.navigable=!0,e.show()},destroy:function(){this.currentView&&(this.currentView.navigationalHide(),this.currentView=null)}}}()},function(e,t,n){"use strict";var i=n(118),o=n(142),r=n(143),a=(n(2),n(189));n(191),e.exports=i.LayoutView.extend({behaviors:{Isomorphic:{chat:{el:"#chat-container",init:function(e){var t=this.chatCollectionView=new r(e({collection:this.collection,decorators:this.options.decorators}));return this.options.monitorScrollPane&&a.monitorViewForUnreadItems(this.options.monitorScrollPane,t),t}}}},ui:{primaryScroll:".primary-scroll"},onRender:function(){o()&&this.ui.primaryScroll.addClass("scroller")}})},function(e,t){"use strict";function n(){var e=document.createElement("div");e.className="scrollbar-measure",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t>0}var i;e.exports=function(){return void 0!==i?i:i=n()}},function(e,t,n){"use strict";var i=n(6),o=n(118),r=n(11),a=n(144),s=n(180),l=n(182),c=n(2),u=n(185),d=n(16)("app:chat-collection-view");n(186),n(188),e.exports=function(){function e(e){var t=e.previousSibling;return t?3===t.nodeType&&!t.previousSibling&&t.textContent.match(/^[\s\n\r]*$/):!0}function t(e){var t=e.nextSibling;return t?3===t.nodeType&&!t.nextSibling&&t.textContent.match(/^[\s\n\r]*$/):!0}function n(t,n){for(;e(n)&&n!==t;)n=n.parentElement;return n===t}function h(e,n){for(;t(n)&&n!==e;)n=n.parentElement;return n===e}function f(e,t){var n=e.filter(function(e){var n=e.get("fromUser");return n&&n.id===t});return n[n.length-1]}function p(e,t,n){for(var i,o=[],r=0,a=e.children;r<a.length&&(i=a.findByIndex(r),i.el!==t);)r++;for(;r<a.length;){if(i=a.findByIndex(r),o.push(i.model),i.el===n)return o;r++}return[]}function m(e){var t=e.map(function(t){var n;if(e.length>1&&t.get("burstStart")){var i=t.get("fromUser"),o=i&&i.username;o&&(o="@"+o),n=o+"\n"+t.get("text")}else n=t.get("text");return n?("\n"!==n.charAt(n.length-1)&&(n+="\n"),n):""}).join("");return"\n"===t.charAt(t.length-1)?t.substring(0,t.length-1):t}var g="#content-frame",v=o.CollectionView.extend({template:!1,reorderOnSort:!0,behaviors:{InfiniteScroll:{reverseScrolling:!0,scrollElementSelector:g,contentWrapperSelector:"#chat-container"},SmoothScroll:{scrollElementSelector:g,contentWrapper:"#chat-container"}},events:{copy:"onCopy"},childView:a.ChatItemView,childViewOptions:function(e){var t={decorators:this.decorators,rollers:this.rollers};if(e&&e.id){var n=this.$el.find(".model-id-"+e.id)[0];n&&(t.el=n)}return t},initialize:function(e){this.firstRender=!0,this.viewComparator=this.collection.comparator,this.listenTo(r,"chatCollectionView:scrollToBottom",function(){this.collection.fetchLatest({},function(){this.rollers.scrollToBottom(),this.clearHighlight()},this)}),this.listenTo(r,"chatCollectionView:selectedChat",function(e,t){var n=this.collection.get(e);this.clearHighlight(),n&&(this.highlightChat(n,t.highlights),this.highlighted=n,this.scrollToChat(n))}),this.listenTo(r,"chatCollectionView:permalinkHighlight",this.highlightPermalinkChat),this.listenTo(r,"chatCollectionView:clearHighlight",this.clearHighlight),this.listenTo(r,"chatCollectionView:loadAndHighlight",this.loadAndHighlight);var t=document.querySelector(g);this.rollers=new s(t,this.el),this.decorators=e.decorators||[],this.listenTo(r,"chat.send",function(){this.rollers.scrollToBottom(),this.collection.fetchLatest({},function(){},this)}),this.listenTo(this.collection,"fetch:after",function(){d("Switching rollers to stable and locking"),this.rollers.stable(),this.rollers.setModeLocked(!0)}),this.listenTo(this.collection,"fetch:after:complete",function(){d("Unlocking rollers"),this.rollers.setModeLocked(!1)}),this.listenTo(r,"command.collapse.chat",this.collapseChats),this.listenTo(r,"command.expand.chat",this.expandChats),this.listenTo(r,"chatCollectionView:pageUp",this.pageUp),this.listenTo(r,"chatCollectionView:pageDown",this.pageDown),this.listenTo(r,"chatCollectionView:editLastChat",this.editLastChat),this.listenTo(r,"chatCollectionView:substLastChat",this.substLastChat),this.listenTo(r,"chatCollectionView:viewportResize",this.viewportResize),this.listenTo(r,"chatCollectionView:scrollToChatId",this.scrollToChatId),this.listenTo(c.troupe(),"change:id",function(){this.scrollToBottom()})},onTrackViewportCenter:function(){if(!this.isScrolledToBottom()){var e=this.rollers.getMostCenteredElement();this.rollers.stable(e)}},scrollToBottom:function(){this.rollers.scrollToBottom()},isScrolledToBottom:function(){return this.rollers.isScrolledToBottom()},pageUp:function(){this.scroll.pageUp()},pageDown:function(){this.scroll.pageDown()},scrollToChat:function(e){var t=this.children.findByModel(e);if(t)return this.rollers.scrollToElement(t.el,{centre:!0}),!0},scrollToChatId:function(e){var t=this.collection.get(e);if(t)return this.scrollToChat(t);var n=this;this.collection.ensureLoaded(e,function(){var t=n.collection.get(e);return t?this.scrollToChat(t):void 0}.bind(this))},highlightChat:function(e,t){e.set("highlights",t||[])},clearHighlight:function(){var e=this.highlighted;if(e)try{this.highlightChat(e)}catch(t){d("Could not clear previously highlighted item")}},findLastCollapsibleChat:function(){for(var e=this.collection,t=e.length-1;t>=0;t--){var n=e.at(t);if(n.get("isCollapsible"))return n}},setLastCollapsibleChat:function(e){var t=this.findLastCollapsibleChat();if(t){var n=this.children.findByModel(t);n&&n.setCollapse(e)}},collapseChats:function(){this.setLastCollapsibleChat(!0)},expandChats:function(){this.setLastCollapsibleChat(!1)},onCopy:function(e){if(window.getSelection){e.originalEvent&&(e=e.originalEvent);var t=window.getSelection();if(t&&t.rangeCount&&t.getRangeAt){var o=t.getRangeAt(0),r=""+t,a=i(o.startContainer).parents(".chat-item")[0],s=i(o.endContainer).parents(".chat-item")[0];if(a&&s){var l=i(o.startContainer).parents(".js-chat-item-text")[0],c=i(o.endContainer).parents(".js-chat-item-text")[0];if(l&&c&&l===c){if(o.startOffset>0||o.endOffset<o.endContainer.textContent.length)return;var u=n(l,o.startContainer),d=h(l,o.endContainer);if(!u||!d)return}var f=p(this,a,s);if(o.startContainer.textContent.length&&o.startContainer.textContent.length===o.startOffset&&f.shift(),0===o.endOffset&&f.pop(),f.length){var g=m(f);e.clipboardData.setData("text/plain",r),e.clipboardData.setData("text/x-markdown",g),e.preventDefault()}}}}},editLastChat:function(e){var t=f(this.collection,e);if(t){var n=this.children.findByModel(t);n&&n.toggleEdit()}},substLastChat:function(e,t,n,i){var o=f(this.collection,e);if(o){var r=this.children.findByModel(o);r&&r.subst(t,n,i)}},viewportResize:function(e){e?this.rollers.adjustScrollContinuously(500):this.rollers.adjustScroll(500)},highlightPermalinkChat:function(e){var t=this;this.collection.ensureLoaded(e,function(e,n){if(!e&&n){var i=l(t.collection,n);i.forEach(function(e){var n=t.children.findByModel(e);n&&n.highlight()}),t.scrollToChat(i[0])}})},loadAndHighlight:function(e,t){this.collection.ensureLoaded(e,function(e,n){e||n&&(this.clearHighlight(),n&&(this.highlightChat(n,t&&t.highlights),this.highlighted=n,this.scrollToChat(n)))}.bind(this))},onBeforeRender:function(){if(u.start("chat-collection.render"),this._renderStartTime=Date.now(),!this.collection.length&&this.isRendered)for(var e,t=this.el;e=t.firstChild;)t.removeChild(e)},onRender:function(){var e=this.collection.length;if(e){u.end("chat-collection.render"),this.collection.loading||u.end("room-switch.render");var t=c(),n=t.permalinkChatId;n&&(this.highlightPermalinkChat(n),delete t.permalinkChatId)}}});return v}()},function(e,t,n){"use strict";var i=n(6),o=n(4),r=n(2),a=n(39),s=n(145),l=n(118),c=n(40),u=n(161),d=n(149),h=n(163),f=n(164),p=n(165),m=n(166),g=n(11),v=n(68),b=n(167),w=n(168),y=n(173),_=n(162),x=n(159),k=n(175);n(176),n(154),n(177),n(179),e.exports=function(){var e=640,t=6e5,n={"click .js-chat-item-edit":"toggleEdit","click .js-chat-item-collapse":"toggleCollapse","click .js-chat-item-readby":"showReadBy","click .js-chat-item-from":"mentionUser","click .js-chat-item-time":"permalink","mouseover .js-chat-item-readby":"showReadByIntent","click .webhook":"expandActivity",click:"onClick",dblclick:"onDblClick","click .js-chat-item-actions":"showActions"},T={"click .js-chat-item-edit":"toggleEdit",click:"onTouchClick"},C=l.ItemView.extend({attributes:{"class":"chat-item"},ui:{actions:".js-chat-item-actions",collapse:".js-chat-item-collapse",text:".js-chat-item-text"},behaviors:{Widgets:{},UnreadItems:{},Highlight:{},LastMessageSeen:{}},modelEvents:{syncStatusChange:"onSyncStatusChange",change:"onChange"},isEditing:!1,events:u.isMobile?T:n,keyboardEvents:{"chat.edit.escape":"onKeyEscape","chat.edit.send":"onKeySend"},expandActivity:function(){i(".webhook .commits").slideToggle("fast")},initialize:function(e){if(this.rollers=e.rollers,this._oneToOne=r.inOneToOneTroupeContext(),this.isPermalinkable=!this._oneToOne,this.userCollection=e.userCollection,this.decorated=!1,this.isInEditablePeriod()){var n=this.model.get("sent"),i=n?n.valueOf()-Date.now()+t:t;this.timeChangeTimeout=setTimeout(this.timeChange.bind(this),i+50)}this.listenToOnce(this,"messageInViewport",this.decorate)},onDestroy:function(){clearTimeout(this.timeChangeTimeout)},template:function(e){return e.status?f(e):h(e)},serializeData:function(){var e=this.model.toJSON();return e.fromUser&&(e.username=e.fromUser.username),e.sent||(e.sent=c()),e.readByText=this.getReadByText(e.readBy),e.html||(e.html=o.escape(e.text)),e.isPermalinkable=this.isPermalinkable,e},getReadByText:function(e){return e?this._oneToOne?" ":(e>10&&(e=10),e):""},onChange:function(){this.updateRender(this.model.changed)},onKeyEscape:function(){this.inputBox&&(this.toggleEdit(),this.focusInput())},onKeySend:function(e){this.inputBox&&this.inputBox.processInput(),e.preventDefault()},renderText:function(){var e=this.model,t=e.get("html")||o.escape(e.get("text"));0===t.length&&(t="<i>This message was deleted</i>",this.$el.addClass("deleted")),this.ui.text[0].innerHTML=t,this.decorated&&this.decorate()},decorate:function(){this.decorated=!0,this.options.decorators.forEach(function(e){e.decorate(this)},this)},onRender:function(){this.updateRender(),this.timeChange()},timeChange:function(){var e=this.canEdit();this.$el.toggleClass("isEditable",this.isInEditablePeriod()),this.$el.toggleClass("canEdit",e)},updateRender:function(e){function t(e,t){t?o.add(e):o.remove(e)}var n=this.model,i=this.$el,o=this.el.classList;if((!e||"html"in e||"text"in e)&&this.renderText(),(!e||"mentioned"in e)&&t("mentioned",n.get("mentioned")),(!e||"fromUser"in e)&&t("isViewers",this.isOwnMessage()),(!e||"editedAt"in e)&&t("hasBeenEdited",this.hasBeenEdited()),(!e||"burstStart"in e)&&(t("burstStart",!!n.get("burstStart")),t("burstContinued",!n.get("burstStart"))),(!e||"burstFinal"in e)&&t("burstFinal",!!n.get("burstFinal")),e&&"readBy"in e){var a=n.get("readBy"),s=n.previous("readBy"),l=i.find(".js-chat-item-readby"),c="chat-item__icon--read-by-some";0===l.length?a&&x(function(){l.addClass(c)}):0===s!=(0===a)&&l.toggleClass(c,!!a)}if(e&&"collapsed"in e){var u=n.get("collapsed");u?this.collapseEmbeds():this.expandEmbeds()}if(!e||"isCollapsible"in e){var d=!!n.get("isCollapsible"),h=this.ui.collapse;k(h[0],d)}r.isLoggedIn()||this.ui.actions.hide()},focusInput:function(){i("#chat-input-textarea").focus()},saveChat:function(e){this.isEditing&&(this.canEdit()&&e!=this.model.get("text")&&(this.model.set("text",e),this.model.set("html",null),this.model.save()),this.focusInput(),this.toggleEdit())},isOwnMessage:function(){return this.model.get("fromUser")?this.model.get("fromUser").id===r.getUserId():!1},isInEditablePeriod:function(){var e=this.model.get("sent");if(!e)return!0;var n=Date.now()-e.valueOf();return t>=n},isEmbedded:function(){return r().embedded},canEdit:function(){return this.model.id&&this.isOwnMessage()&&this.isInEditablePeriod()&&!this.isEmbedded()},hasBeenEdited:function(){return!!this.model.get("editedAt")},hasBeenRead:function(){return!!this.model.get("readBy")},onToggleEdit:function(){this.toggleEdit()},toggleEdit:function(){if(this.isEditing)this.isEditing=!1,this.showText(),this.stopListening(g,"focus.request.chat.edit"),g.trigger("chat.edit.hide");else if(this.canEdit()){var e=this;this.isEditing=!0,this.showInput(),this.listenTo(g,"focus.request.chat.edit",function(){e.inputBox.$el.focus(),g.trigger("focus.change.chat.edit")}),g.trigger("chat.edit.show")}},subst:function(e,t,n){if(this.canEdit()){var i=e.replace(/(^|[^\[])\^/g,"$1"),o=new RegExp(i,n?"gi":"i"),r=this.model.get("text").replace(o,t);this.model.set({text:r,html:null}).save()}},setCollapse:function(e){e=!!e;var t=this.model.get("id"),n=!!this.model.get("collapsed");e!==n&&(n?b.uncollapse(t):b.collapse(t),this.model.set("collapsed",!n))},onToggleCollapse:function(){this.toggleCollapse()},toggleCollapse:function(){var e=this.model.get("collapsed");this.setCollapse(!e)},collapseEmbeds:function(){var e=this,t=e.$el.find(".embed"),n=this.ui.collapse.find("i");clearTimeout(e.embedTimeout),this.ui.collapse.removeClass("chat-item__icon--collapse"),this.ui.collapse.addClass("chat-item__icon--expand"),n.removeClass("octicon-fold"),n.addClass("octicon-unfold"),e.rollers&&t.each(function(t,n){e.rollers.startTransition(n,500)}),t.css("overflow",void 0),t.css("max-height","0"),t.addClass("animateOut"),e.embedTimeout=setTimeout(function(){e.renderText()},600)},expandEmbeds:function(){function t(t){setTimeout(function(){t.each(function(t,n){var o=i(n).height();e>=o?i(n).css("max-height",o+"px"):i(n).css("overflow","hidden")})},3e3)}var n=this;clearTimeout(n.embedTimeout);var o=this.ui.collapse.find("i");o.addClass("octicon-fold"),o.removeClass("octicon-unfold"),this.ui.collapse.removeClass("chat-item__icon--expand"),this.ui.collapse.addClass("chat-item__icon--collapse"),n.expandFunction=function(e){e.addClass("animateOut"),x(function(){n.rollers&&n.rollers.startTransition(e,500),e.removeClass("animateOut"),t(e)})},n.renderText(),n.embedTimeout=setTimeout(function(){var e=n.$el.find(".embed");n.rollers&&e.each(function(e,t){n.rollers.startTransition(t,500)}),e.removeClass("animateOut"),t(e)},10)},showText:function(){this.renderText(),this.inputBox&&(this.stopListening(this.inputBox),this.inputBox.remove(),delete this.inputBox)},showInput:function(){var e=this.ui.text;e.html("<textarea class='trpChatInput'></textarea>");var t=this.model.get("text"),n=e.find("textarea").val(t);x(function(){n.focus(),n.val("").val(t)}),this.inputBox=new m({el:n}),this.listenTo(this.inputBox,"save",this.saveChat)},showReadByIntent:function(e){S.hoverTimeout(e,function(){this.showReadBy(e)},this)},showReadBy:function(e){if(!this.popover){e.preventDefault();var t=new S({model:this.model,userCollection:this.userCollection,scroller:this.$el.parents(".primary-scroll"),placement:"vertical",minHeight:"88px",width:"300px",title:"Read By",targetElement:e.target});t.show(),S.singleton(this,t)}},showActions:function(e){if(e.preventDefault(),!this.popover){var t=new M({model:this.model,chatItemView:this,targetElement:e.target,placement:"horizontal",width:"100px"});this.listenTo(t,"render",function(){this.ui.actions.addClass("selected")}.bind(this)),this.listenTo(t,"destroy",function(){this.ui.actions.removeClass("selected")}.bind(this)),t.show(),S.singleton(this,t)}},mentionUser:function(){var e="@"+this.model.get("fromUser").username+" ";g.trigger("input.append",e)},permalink:function(e){this.isPermalinkable&&g.trigger("permalink.requested","chat",this.model,{appendInput:!!e.altKey})},highlight:function(){var e=this;this.$el.addClass("chat-item__highlighted"),setTimeout(function(){e.$el.removeClass("chat-item__highlighted")},5e3)},onTouchClick:function(){this.triggerMethod("selected",this.model)},onClick:function(){this.triggerMethod("selected",this.model),window.getSelection&&this.dblClickTimer&&(clearTimeout(this.dblClickTimer),this.dblClickTimer=null,window.getSelection().selectAllChildren(this.el))},onDblClick:function(){if(window.getSelection){var e=this;e.dblClickTimer=setTimeout(function(){e.dblClickTimer=null},200)}},onSyncStatusChange:function(e){this.$el.toggleClass("synced","synced"==e).toggleClass("syncing","syncing"==e).toggleClass("syncerror","syncerror"==e)},attachElContent:_.attachElContent});v.mixin(C,w);var E=l.CollectionView.extend({childView:s,className:"popoverReadBy",initialize:function(e){this.collection=new a.ReadByCollection(null,{listen:!0,chatMessageId:this.model.id,userCollection:e.userCollection}),this.collection.loading=!0},onDestroy:function(){var e=this.collection;this.stopListening(e),e.unlisten(),e.stopListening()}});v.mixin(E,y);var S=d.extend({
initialize:function(e){d.prototype.initialize.apply(this,arguments),this.view=new E({model:this.model,userCollection:e.userCollection})}}),I=l.ItemView.extend({template:p,initialize:function(e){this.chatItemView=e.chatItemView},events:{"click .js-chat-action-collapse":"toggleCollapse","click .js-chat-action-expand":"toggleCollapse","click .js-chat-action-edit":"edit","click .js-chat-action-reply":"reply","click .js-chat-action-quote":"quote","click .js-chat-action-delete":"delete"},toggleCollapse:function(){this.chatItemView.triggerMethod("toggleCollapse")},edit:function(){this.chatItemView.triggerMethod("toggleEdit")},reply:function(){var e="@"+this.model.get("fromUser").username+" ";g.trigger("input.append",e)},quote:function(){g.trigger("input.append","> "+this.model.get("text"),{newLine:!0})},"delete":function(){this.model.set("text",""),this.model.save()},serializeData:function(){var e=!this.model.get("text"),t={actions:[{name:"reply",description:"Reply"}]};if(e||t.actions.push({name:"quote",description:"Quote"}),!e&&this.chatItemView.canEdit()?(t.actions.push({name:"edit",description:"Edit"}),t.actions.push({name:"delete",description:"Delete"})):(t.actions.push({name:"edit",description:"Edit",disabled:!0}),t.actions.push({name:"delete",description:"Delete",disabled:!0})),!e&&this.model.get("isCollapsible")){var n=this.model.get("collapsed")?{name:"expand",description:"Expand"}:{name:"collapse",description:"Collapse"};t.actions.push(n)}return t}}),M=d.extend({initialize:function(e){d.prototype.initialize.apply(this,arguments),this.view=new I({model:this.model,chatItemView:e.chatItemView})},events:{click:"hide"}});return{ChatItemView:C,ReadByView:E,ReadByPopover:S,ActionsView:I,ActionsPopover:M}}()},function(e,t,n){"use strict";var i=n(3),o=n(118),r=n(2),a=n(146),s=n(147),l=n(148),c=n(154),u=n(31);n(157);var d=n(162),h=64,f=30,p="https://avatars.githubusercontent.com/u/0";e.exports=function(){function e(e,t){e||(e=t.model?t.model.toJSON():t.user||{});var n,i=t.avatarSize||"s",o="m"==i?h:f,a=r.getUserId(),s=u(e,o),l=e.id===a||!!e.online;return n=t.showStatus?l?"online":"offline":"",{id:e.id,showStatus:t.showStatus,userDisplayName:e.displayName,avatarSrcSet:s,avatarSize:i||"s",imgSize:o,presenceClass:n,online:l,offline:!l,role:e.role,invited:e.invited,removed:e.removed,inactive:e.removed||e.invited}}var t=o.ItemView.extend({tagName:"div",className:"avatar",template:s,events:{mouseover:"showDetailIntent",click:"showDetail","error img":"onImageError"},ui:{tooltip:":first-child",wrapper:".trpDisplayPicture",image:"img"},modelEvents:{change:"update"},behaviors:function(){var e=this.options;return e.showTooltip!==!1?{Tooltip:{":first-child":{titleFn:"getTooltip",placement:e.tooltipPlacement||"vertical"}}}:void 0},initialize:function(e){e.user&&(this.model=new i.Model(e.user))},onRender:function(){var e=this.ui.image[0];e&&(e.onerror=this.onImageError.bind(this))},onDestroy:function(){var e=this.ui.image[0];e&&(e.onerror=null)},showDetailIntent:function(e){l.hoverTimeout(e,function(){this.showDetail(e)},this)},showDetail:function(e){if(!a()&&(e.preventDefault(),!this.popover)){this.ui.tooltip.tooltip("hide");var t=this.model,n=new l({model:t,targetElement:e.target});n.show(),l.singleton(this,n)}},update:function(){var e=this.serializeData();this.updatePresence(e),this.updateAvatar(e)},updatePresence:function(e){if(this.options.showStatus){var t=this.ui.wrapper;t.toggleClass("online",e.online),t.toggleClass("offline",!e.online)}},updateAvatar:function(e){var t=this.ui.image[0],n=e.avatarSrcSet;t.src=n.src,t.srcset=n.srcset},getUserId:function(){return this.model.id},serializeData:function(){var t=this.options||{},n=this.model&&this.model.toJSON();return e(n,t)},getTooltip:function(){return this.model.get("displayName")},onImageError:function(e){var t=e.currentTarget,n=this.options||{},i=n.avatarSize||"s",o="m"==i?h:f,r=this.model&&this.model.toJSON(),a=u(r,o);t.src===a.src&&(t.src=p,t.srcset="")},attachElContent:d.attachElContent});return t.getPrerendered=function(t,n){return"<span class='widget' data-widget-id='"+n+"'>"+s(e(null,t))+"</span>"},c.register({avatar:t}),t}()},function(e,t){"use strict";var n;e.exports=function(){return"undefined"==typeof n&&(n=document.body.classList.contains("mobile")),n}},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){var o;return this.escapeExpression((o=null!=(o=t.role||(null!=e?e.role:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"role",hash:{},data:i}):o))},3:function(e,t,n,i){return"invited"},5:function(e,t,n,i){return'<div class="trpStatus" id="status"> </div>'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a,s=t.helperMissing,l="function",c=this.escapeExpression,u=this.lambda,d='<div\n  class="trpDisplayPicture avatar-'+c((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===l?r.call(e,{name:"id",hash:{},data:i}):r))+" avatar-"+c((r=null!=(r=t.avatarSize||(null!=e?e.avatarSize:e))?r:s,typeof r===l?r.call(e,{name:"avatarSize",hash:{},data:i}):r))+" "+c((r=null!=(r=t.presenceClass||(null!=e?e.presenceClass:e))?r:s,typeof r===l?r.call(e,{name:"presenceClass",hash:{},data:i}):r))+" "+(null!=(o=t["if"].call(e,null!=e?e.role:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+" "+(null!=(o=t["if"].call(e,null!=e?e.inactive:e,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?o:"")+'">\n  <img src="'+c(u(null!=(o=null!=e?e.avatarSrcSet:e)?o.src:o,e))+'" srcset="'+c(u(null!=(o=null!=e?e.avatarSrcSet:e)?o.srcset:o,e))+'" height="'+c((r=null!=(r=t.imgSize||(null!=e?e.imgSize:e))?r:s,typeof r===l?r.call(e,{name:"imgSize",hash:{},data:i}):r))+'" width="'+c((r=null!=(r=t.imgSize||(null!=e?e.imgSize:e))?r:s,typeof r===l?r.call(e,{name:"imgSize",hash:{},data:i}):r))+'" class="avatar__image">\n  ';return r=null!=(r=t.showStatus||(null!=e?e.showStatus:e))?r:s,a={name:"showStatus",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i},o=typeof r===l?r.call(e,a):r,t.showStatus||(o=t.blockHelperMissing.call(e,o,a)),null!=o&&(d+=o),d+"\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var i=n(118),o=n(3),r=n(30),a=n(149),s=n(152),l=n(153),c=n(11),u=n(2),d=n(116);e.exports=function(){var e=i.ItemView.extend({template:s,modelEvents:{change:"render"},serializeData:function(){var e=this.model.toJSON();return e.blog&&(e.blog.match(/^https?:\/\//)?e.blogUrl=e.blog:e.blogUrl="http://"+e.blog),e.inactive=e.invited||e.removed,e.avatarUrl=r({username:e.login},128),e}}),t=i.ItemView.extend({template:l,modelEvents:{change:"render"},events:{"click #button-onetoone":function(){this.parentPopover.hide();var e=this.model.get("login");c.trigger("navigation","/"+e,"chat",e,this.model.id)},"click #button-mention":function(){this.parentPopover.hide();var e=this.model.get("login");c.trigger("input.append","@"+e+" ")},"click #button-remove":function(){this.parentPopover.hide();var e=this.model.get("login");c.trigger("command.room.remove",e)}},serializeData:function(){var e=this.model.toJSON(),t=e.login!==u.user().get("username"),n=e.has_gitter_login&&t,i=t,o=t&&u.isTroupeAdmin();return u.inOneToOneTroupeContext()&&u.troupe().get("user").username===e.login&&(n=!1),e.inactive=e.invited||e.removed,e.chatPrivately=n,e.mentionable=i,e.removable=o,e}}),n=a.extend({initialize:function(n){n.placement="horizontal",n.minHeight="88px";var i,r;this.model?(i=this.model.get("username"),r=this.model.get("displayName")):(i=n.username,r=n.displayName);var s=new o.Model({login:i,name:r});s.sync=d.sync,s.url="/private/gh/users/"+i,s.fetch(),n.footerView=new t({model:s}),a.prototype.initialize.apply(this,arguments),this.view=new e({model:s,userCollection:n.userCollection})}});return n}()},function(e,t,n){"use strict";var i=n(6),o=n(4),r=n(118),a=n(150),s=n(151);e.exports=function(){function e(e){for(var t=0;e&&e!=document;){var n=window.getComputedStyle(e,null);if(n){var i=n.getPropertyValue("z-index");i&&"auto"!==i&&(i=parseInt(i,10),i>t&&(t=i))}e=e.parentNode}return t}var t=10,n=750,l={animation:!0,selector:!1,title:"",footerView:null,delay:300,container:!1,placement:"right",scroller:null,width:"",minHeight:""},c=r.ItemView.extend({template:s,className:"popover",initialize:function(t){o.bindAll(this,"leave","enter"),this.options=o.extend({},l,t),this.view=this.options.view,this.titleView=this.options.titleView,this.title=this.options.title,this.footerView=this.options.footerView,this.options.scroller&&(this.$scroller=i(this.options.scroller),this.scroller=this.$scroller[0]),this.targetElement=this.options.targetElement,this.$targetElement=i(this.targetElement),this.zIndex=e(this.targetElement),this.$targetElement.on("mouseenter",this.enter),this.$targetElement.on("mouseleave",this.leave),this.once("destroy",function(){this.mutant&&this.mutant.disconnect()})},serializeData:function(){return this.options},onRender:function(){var e=this.$el;this.view.parentPopover=this,this.zIndex&&(this.el.style.zIndex=this.zIndex+1),this.titleView?e.find(".popover-title").append(this.titleView.render().el):this.title?e.find(".popover-title").text(this.title):e.find(".popover-title").hide(),e.find(".popover-content").append(this.view.render().el),e.find(".popover-inner").css("width",this.options.width).css("min-height",this.options.minHeight);var t=this.footerView;t&&(t.parentPopover=this,e.find(".popover-footer-content").append(t.render().el)),e.on("mouseenter",this.enter),e.on("mouseleave",this.leave),e.addClass("popover-hidden"),e.removeClass("fade top bottom left right in")},enter:function(){this.timeout&&clearTimeout(this.timeout)},leave:function(){if(!this.options.delay)return e.hide();var e=this;this.timeout=setTimeout(function(){e.hide()},e.options.delay)},onDestroy:function(){this.$el.off("mouseenter",this.enter),this.$el.off("mouseleave",this.leave),this.$targetElement.off("mouseenter",this.enter),this.$targetElement.off("mouseleave",this.leave),this.titleView&&this.titleView.destroy(),this.view.destroy(),this.footerView&&this.footerView.destroy()},show:function(){var e=this.render().$el,t=this.el;e.detach().css({left:"auto",display:"block"}),e.appendTo(i("body")),this.reposition(),e.removeClass("popover-hidden"),this.mutant=new a(t,this.reposition,{scope:this,timeout:20,transitions:!0,observers:{attributes:!0,characterData:!0}})},reposition:function(){try{var e=this.$el,n=this.el,i=this.getTargetPosition();if(0===i.top&&0===i.left&&0===i.height&&0===i.width)return;var o=n.offsetWidth,r=n.offsetHeight,a=this.options.placement;switch(a){case"vertical":a=this.selectBestVerticalPlacement(e,this.targetElement);break;case"horizontal":a=this.selectBestHorizontalPlacement(e,this.targetElement)}var s;switch(a){case"bottom":s={top:i.top+i.height,left:i.left+i.width/2-o/2};break;case"top":s={top:i.top-r,left:i.left+i.width/2-o/2-2};break;case"left":s={top:i.top+i.height/2-r/2,right:document.body.clientWidth-i.left+t};break;case"right":s={top:i.top+i.height/2-r/2,left:i.left+i.width}}this.applyPlacement(s,a)}finally{this.mutant&&this.mutant.takeRecords()}},selectBestVerticalPlacement:function(e,t){var n=i(t);if(this.scroller){var o=this.scroller.scrollTop,r=this.scroller.scrollTop+this.scroller.clientHeight,a=(o+r)/2;return t.offsetTop>a?"top":"bottom"}var s=n.offsetParent();return s&&n.offset().top+e.height()+20>=s[0].clientHeight?"top":"bottom"},selectBestHorizontalPlacement:function(e,t){var n=t.getBoundingClientRect();return n.left<document.body.clientWidth/2?"right":"left"},applyPlacement:function(e,t){var n,i,o,r=this.$el,a=r[0],s=a.offsetWidth,l=a.offsetHeight,c=0;if("bottom"==t||"top"==t)e.left<0&&(c=-2*e.left,e.left=0);else if(e.top<0)c=-2*e.top,e.top=0;else{var u=this.scroller?this.scroller.clientHeight:window.innerHeight;e.top+l>u&&(c=2*(u-e.top-l-10),e.top=u-l-10)}var d={top:e.top};e.right?(d.left="initial",d.right=e.right):(d.left=e.left,d.right="initial"),r.css(d).addClass(t).addClass("in"),n=a.offsetWidth,i=a.offsetHeight,"top"==t&&i!=l&&(e.top=e.top+l-i,o=!0),"bottom"==t||"top"==t?this.replaceArrow(c-s+n,n,"left"):this.replaceArrow(c-l+i,i,"top"),o&&r.offset(e)},replaceArrow:function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},hide:function(){this.timeout&&clearTimeout(this.timeout);var e=this.$el;return e.removeClass("in"),e.addClass("popover-hidden"),setTimeout(function(){e.detach()},350),e.trigger("hidden"),this.trigger("hide"),this.destroy(),this},getTargetPosition:function(){var e=this.targetElement,t=o.extend({},e.getBoundingClientRect(),this.$targetElement.offset());return t},getTitle:function(){return this.options.title},arrow:function(){return this.$arrow||(this.$arrow=this.$el.find(".arrow")),this.$arrow}});return c.hoverTimeout=function(e,t,o){var r=setTimeout(function(){r&&t.call(o,e)},n);i(e.target).one("mouseout click",function(){clearTimeout(r),r=null})},c.singleton=function(e,t){e.popover=t,e.listenToOnce(t,"hide",function(){e.popover=null})},c}()},function(e,t,n){var i,o;!function(n){"use strict";function r(e,t,n){var i,o;return function(){var r=Date.now();i&&i+t>r?(clearTimeout(o),o=setTimeout(function(){i=r,e.apply(n)},t)):(i=r,e.apply(n))}}function a(e,t){return e.bind?e.bind(t):function(){var n=Array.prototype.slice.call(arguments);e.apply(t,n)}}function s(e,t){e||(e={});for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e}function l(e){this._callback=e,this._onModifications=r(function(){this._callback([])},5,this)}function c(e,t,n){this.element=e,this.callback=t,this.context=n,e.addEventListener("load",this,!1),e.addEventListener("error",this,!1)}function u(e){var t=!(1!==e.nodeType||"IMG"!==e.tagName||e.complete||e.getAttribute("width")&&e.getAttribute("height"));return t}function d(e,t){return e.dataset?e.dataset[t]:e.getAttribute("data-"+t)}function h(e,t,n){return e.dataset?void(e.dataset[t]=n):e.setAttribute("data-"+t,n)}function f(e,t){return e.dataset?void delete e.dataset[t]:void e.removeAttribute(attrName)}function p(){var e=g.createElement("fakeelement"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var n in t)if(void 0!==e.style[n])return t[n]}function m(e,t,n){function i(){try{t.apply(l)}finally{o.takeRecords()}}var o=this;n||(n={}),o._eventHandlers={};var l=n.scope||null,c=n.timeout||0;o._transitionInterval=n.timeout||10;var u;u=c?r(i,c):i,o._callback=u,o._findLoadingImages(e),o._mutationCallback=a(o._mutationCallback,o),o.observer=new v(o._mutationCallback);var d=s(n.observers,{attributes:!1,childList:!0,characterData:!1,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1});if(o.observer.observe(e,d),n.transitions){var h=n.ignoreTransitions&&n.ignoreTransitions.reduce(function(e,t){return e[t]=1,e},{});o._transitionEndHandler={target:e,handleEvent:function(e){o.endTransition(e.target),h&&h[e.propertyName]||u()}},e.addEventListener(w,o._transitionEndHandler,!1)}}l.prototype={observe:function(e){this._target=e,e.addEventListener("DOMSubtreeModified",this._onModifications,!1)},disconnect:function(){this._target&&(this._target.removeEventListener("DOMSubtreeModified",this._onModifications,!1),delete this._target)},takeRecords:function(){var e=this._target;this._target&&(e.removeEventListener("DOMSubtreeModified",this._onModifications,!1),e.addEventListener("DOMSubtreeModified",this._onModifications,!1))}},c.prototype={_detach:function(){this.element&&(this.element.removeEventListener("load",this,!1),this.element.removeEventListener("error",this,!1),this.element=null,this.callback=null,this.context=null)},handleEvent:function(e){this.callback.call(this.context,e,this)}};var g=n.document,v=n.MutationObserver||n.MozMutationObserver||n.WebKitMutationObserver||l,b=0,w=p();return m.prototype={_addListener:function(e){if(!d(e,"gLoadListenerId")){var t=++b;h(e,"gLoadListenerId",t),this._eventHandlers[t]=new c(e,function(e,t){t._detach(),this._callback()},this)}},_removeListener:function(e){var t=d(e,"gLoadListenerId");if(t){f(e,"gLoadListenerId");var n=this._eventHandlers[t];n&&(delete this._eventHandlers[t],n._detach())}},_mutationCallback:function(e){var t=this;e.forEach(function(e){var n;if("childList"===e.type){if(e.addedNodes)for(var i=0;i<e.addedNodes.length;i++)n=e.addedNodes[i],1===n.nodeType&&(n.children.length?t._findLoadingImages(n):u(n)&&t._addListener(n));if(e.removedNodes)for(var o=0;o<e.removedNodes.length;o++)n=e.removedNodes[o],1===n.nodeType&&(n.children.length||"IMG"===n.tagName&&t._removeListener(n))}}),this._callback()},_findLoadingImages:function(e){for(var t=e.querySelectorAll("img"),n=0;n<t.length;n++){var i=t[n];u(i)&&this._addListener(i)}},takeRecords:function(){return this.observer.takeRecords()},startTransition:function(e,t){var i=this,o=i._transitions;o?o.push(e):i._transitions=o=[e],t&&n.setTimeout(function(){i.endTransition(e)},t),1!==o.length||i._transitionTimer||(i._transitionTimer=n.setInterval(i._callback,i._transitionInterval))},endTransition:function(e){var t=this,i=t._transitions;if(i){for(var o=i.length-1;o>=0;o--)i[o]===e&&i.splice(o,1);0===i.length&&(delete t._transitions,n.clearTimeout(t._transitionTimer),delete t._transitionTimer)}},disconnect:function(){if(this.observer.disconnect(),this._transitionEndHandler){var e=this._transitionEndHandler.target;e.removeEventListener(w,this._transitionEndHandler,!1)}n.clearTimeout(self._transitionTimer);var t=this._eventHandlers;Object.keys(t).forEach(function(e){var n=t[e];n&&(delete t[e],n._detach())})}},n.Mutant=m,i=[],o=function(){return m}.apply(t,i),!(void 0!==o&&(e.exports=o)),m}(window)},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){return'<div class="popover-footer">\n  <div class="popover-footer-content"></div>\n</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o;return'<div>\n  <div class="arrow"></div>\n  <div class="popover-inner">\n    <h5 class="popover-title"></h5>\n    <div class="popover-content"></div>\n  </div>\n</div>\n'+(null!=(o=t["if"].call(e,null!=e?e.footerView:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){var o;return"  <div class='invited'>\n    <p><small>"+this.escapeExpression((o=null!=(o=t.login||(null!=e?e.login:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"login",hash:{},data:i}):o))+" is not on Gitter yet.</small></p>\n  </div>\n"},3:function(e,t,n,i){var o;return"      <li>\n        <div class='trpUserDetails__icon'>\n          <i class='octicon octicon-organization'></i>\n        </div>\n        <div class=\"trpUserDetails__text\">"+this.escapeExpression((o=null!=(o=t.company||(null!=e?e.company:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"company",hash:{},data:i}):o))+"</div>\n      </li>\n"},5:function(e,t,n,i){var o;return"      <li>\n        <div class='trpUserDetails__icon'>\n          <i class='octicon octicon-location'></i>\n        </div>\n        <div class=\"trpUserDetails__text\">"+this.escapeExpression((o=null!=(o=t.location||(null!=e?e.location:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"location",hash:{},data:i}):o))+"</div>\n      </li>\n"},7:function(e,t,n,i){var o,r=t.helperMissing,a="function",s=this.escapeExpression;return'      <li>\n        <div class=\'trpUserDetails__icon\'>\n          <i class=\'octicon octicon-mail\'></i>\n        </div>\n        <div class="trpUserDetails__text"><a class="email" href="mailto:'+s((o=null!=(o=t.email||(null!=e?e.email:e))?o:r,typeof o===a?o.call(e,{name:"email",hash:{},data:i}):o))+'">'+s((o=null!=(o=t.email||(null!=e?e.email:e))?o:r,typeof o===a?o.call(e,{name:"email",hash:{},data:i}):o))+"</a></div>\n      </li>\n"},9:function(e,t,n,i){var o,r=t.helperMissing,a="function",s=this.escapeExpression;return'      <li>\n        <div class=\'trpUserDetails__icon\'>\n          <i class=\'octicon octicon-link\'></i>\n        </div>\n        <div class="trpUserDetails__text"><a target="_blank" href="'+s((o=null!=(o=t.blogUrl||(null!=e?e.blogUrl:e))?o:r,typeof o===a?o.call(e,{name:"blogUrl",hash:{},data:i}):o))+'" class="url" rel="nofollow me">'+s((o=null!=(o=t.blog||(null!=e?e.blog:e))?o:r,typeof o===a?o.call(e,{name:"blog",hash:{},data:i}):o))+"</a></div>\n      </li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s="function",l=this.escapeExpression;return(null!=(o=t["if"].call(e,null!=e?e.inactive:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+'<div style="float: left"><img src="'+l((r=null!=(r=t.avatarUrl||(null!=e?e.avatarUrl:e))?r:a,typeof r===s?r.call(e,{name:"avatarUrl",hash:{},data:i}):r))+'" class="avatar-l"/></div>\n<div class="trpPopoverDetails">\n  <h2>'+l((r=null!=(r=t.name||(null!=e?e.name:e))?r:a,typeof r===s?r.call(e,{name:"name",hash:{},data:i}):r))+'</h2>\n  <h3><a href="http://github.com/'+l((r=null!=(r=t.login||(null!=e?e.login:e))?r:a,typeof r===s?r.call(e,{name:"login",hash:{},data:i}):r))+'" target="_blank">'+l((r=null!=(r=t.login||(null!=e?e.login:e))?r:a,typeof r===s?r.call(e,{name:"login",hash:{},data:i}):r))+'</a></h3>\n  <div class="vcard-stats">\n      <strong class="vcard-stat-count">'+l((r=null!=(r=t.followers||(null!=e?e.followers:e))?r:a,typeof r===s?r.call(e,{name:"followers",hash:{},data:i}):r))+'</strong>\n      followers &nbsp;\n      <strong class="vcard-stat-count">'+l((r=null!=(r=t.public_repos||(null!=e?e.public_repos:e))?r:a,typeof r===s?r.call(e,{name:"public_repos",hash:{},data:i}):r))+'</strong>\n      repos &nbsp;\n      <strong class="vcard-stat-count">'+l((r=null!=(r=t.following||(null!=e?e.following:e))?r:a,typeof r===s?r.call(e,{name:"following",hash:{},data:i}):r))+'</strong>\n      following &nbsp;\n  </div>\n\n  <ul class="trpUserDetails">\n'+(null!=(o=t["if"].call(e,null!=e?e.company:e,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?o:"")+"\n"+(null!=(o=t["if"].call(e,null!=e?e.location:e,{name:"if",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?o:"")+"\n"+(null!=(o=t["if"].call(e,null!=e?e.email:e,{name:"if",hash:{},fn:this.program(7,i,0),inverse:this.noop,data:i}))?o:"")+"\n"+(null!=(o=t["if"].call(e,null!=e?e.blog:e,{name:"if",hash:{},fn:this.program(9,i,0),inverse:this.noop,data:i}))?o:"")+"  </ul>\n</div>\n"},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){return'  <button class="trpBtnRed trpButtonSmall" id="button-remove">\n    Remove\n  </button>\n'},3:function(e,t,n,i){var o;return'  <button class="trpBtnLightGrey trpButtonSmall" id="button-mention">\n    Mention\n  </button>\n  <a href="'+this.escapeExpression((o=null!=(o=t.html_url||(null!=e?e.html_url:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"html_url",hash:{},data:i}):o))+'" target="_blank" class="trpBtnLightGrey trpButtonSmall open-in-github">Open in GitHub</a>\n'},5:function(e,t,n,i){return'  <button class="trpBtnGreen trpButtonSmall" id="button-onetoone">\n    Chat Privately\n  </button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o;return(null!=(o=t["if"].call(e,null!=e?e.removable:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+(null!=(o=t["if"].call(e,null!=e?e.mentionable:e,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?o:"")+(null!=(o=t["if"].call(e,null!=e?e.chatPrivately:e,{name:"if",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?o:"")+"\n"},useData:!0})},function(e,t,n){"use strict";var i=n(4),o=n(118),r=n(155),a=n(156);e.exports=function(){function e(e){var t=i.keys(e);i.each(t,function(t){var n=e[t];l[t]=n})}function t(){this._widgets=[]}function n(e,n,i){if(!e)throw new Error("Cannot render the template since it's false, null or undefined.");var r;r="function"==typeof e?e:o.TemplateCache.get(e);var s=r(n),c=n.prerenderedViews;if(!c)return s;var u=a(s),d=i.widgetManager,h=u.querySelectorAll(".widget"),f=h.length;f&&!d&&(d=new t,i.widgetManager=d);for(var p=0;f>p;p++){var m=h[p],g=m.getAttribute("data-widget-id");if(g){var v=c[g];if(v){m.removeAttribute("data-widget-id");var b=l[v.widgetName],w=v.model;w.el=m,w.template=!1;var y=new b(w);y.render(),d.add(y)}}}return u}function s(e,t,n){var i=l[e];return i.getPrerendered(t,n)}var l={};t.prototype.add=function(e){this._widgets.push(e)},t.prototype.destroy=function(){i.each(this._widgets,function(e){e.destroy()}),this._widgets=[]};var c=o.Behavior.extend({initialize:function(){if(this.view.templateHelpers)throw new Error("Cannot use templateHelpers with Widgets");this.view.templateHelpers=function(){return{_view:this,getPrerendered:s}}},onDestroy:function(){this.view.widgetManager&&(this.view.widgetManager.destroy(),this.view.widgetManager=null)}});return o.Renderer={render:n},r.register("Widgets",c),{register:e,Behavior:c}}()},function(e,t,n){"use strict";var i=n(118);e.exports=function(){var e={};return i.Behaviors.behaviorsLookup=function(){return e},{register:function(t,n){e[t]=n}}}()},function(e,t){"use strict";e.exports=function(e){var t=document.createElement("DIV");t.innerHTML=e.trim();var n=t.children,i=n.length;if(1===i)return n[0];for(var o=document.createDocumentFragment(),r=0;i>r;r++)o.appendChild(n[0]);return o}},function(e,t,n){"use strict";function i(e){s(function(){if(a(e,":hover")){var t;try{t=new MouseEvent("mouseover")}catch(n){t=document.createEvent("MouseEvents"),t.initMouseEvent("mouseover",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null)}e.dispatchEvent(t)}})}var o=n(118),r=n(155),a=n(158),s=n(159),l=n(123);n(160);var c=o.Behavior.extend({onRender:function(){if(!l()){this.destroyTooltips(),this.tooltips||(this.tooltips={}),this.handlers||(this.handlers={});var e=this;Object.keys(this.options).forEach(function(t){if(!e.handlers[t]){var n=""===t?e.$el:e.$el.find(t),o=n[0];if(o){var r=e.createHandler(n,o,t);o.addEventListener("mouseover",r,!1),e.handlers[t]=r,i(o)}}})}},createHandler:function(e,t,n){var i=this;return{el:t,handleEvent:function(){t.removeEventListener("mouseover",this,!1),delete i.handlers[n],i.initTooltip(n,e,t)}}},initTooltip:function(e,t,n){var o,r=this.options[e];o=r.titleFn?this.view[r.titleFn].bind(this.view):r.title,this.tooltips[e]=t,t.tooltip({html:r.html,title:o,placement:r.placement,container:r.container||"body"}),i(n)},onDestroy:function(){this.destroyHandlers(),this.destroyTooltips()},destroyHandlers:function(){var e=this.handlers;delete this.handlers,e&&Object.keys(e).forEach(function(t){var n=e[t],i=n.el;i.removeEventListener("mouseover",n,!1)})},destroyTooltips:function(){var e=this.tooltips;delete this.tooltips,e&&Object.keys(e).forEach(function(t){var n=e[t];n.tooltip("destroy")})}});r.register("Tooltip",c),e.exports=c},function(e,t){"use strict";var n=Element.prototype,i=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;e.exports=function(e,t){return i.call(e,t)}},function(e,t){"use strict";function n(e){return window.setTimeout(e,1e3/60)}function i(e){window.clearTimeout(e)}var o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,r=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame;e.exports=o&&o.bind(window)||n,e.exports.cancel=r&&r.bind(window)||i},function(e,t,n){"use strict";var i=n(6),o=n(161),r=n(123);e.exports=function(){return!function(e){var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,i){var r,a,s,l,c;for(this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.enabled=!o.isMobile,s=this.options.trigger.split(" "),c=s.length;c--;)l=s[c],"click"==l?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=l&&(r="hover"==l?"mouseenter":"focus",a="hover"==l?"mouseleave":"blur",this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.onenter,this)),this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.onleave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},onenter:function(e){this.enter(e.currentTarget)},enter:function(t){t=t||this.$element[0];var n,i=e.fn[this.type].defaults,o={};return this._options&&e.each(this._options,function(e,t){i[e]!=t&&(o[e]=t)},this),n=e(t)[this.type](o).data(this.type),n.hoverState="in",n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),void(this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show))):n.show()},onleave:function(e){this.leave(e.currentTarget)},leave:function(t){t=t||this.$element[0];var n=e(t)[this.type](this._options).data(this.type);if("in"===n.hoverState)return n.hoverState="out",this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?void(this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},show:function(){var n,i,o,r,a,s,l=e.Event("show");if(t.prev&&t.prev!==this&&t.prev.hide(),t.prev=this,this.hasContent()&&this.enabled){if(this.$element.trigger(l),l.isDefaultPrevented())return;n=this.tip(),this.setContent(),this.options.animation&&n.addClass("fade"),a="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,n.detach().css({top:0,left:0,display:"block"}),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element),i=this.getPosition(),o=n[0].offsetWidth,r=n[0].offsetHeight;var a=this.options.placement;"vertical"===a&&(a=this.selectBestVerticalPlacement(n,this.$element))}switch(a){case"bottom":s={top:i.top+i.height,left:i.left+i.width/2-o/2};break;case"top":s={top:i.top-r,left:i.left+i.width/2-o/2};break;case"left":s={top:i.top+i.height/2-r/2,left:i.left-o};break;case"right":s={top:i.top+i.height/2-r/2,left:i.left+i.width}}this.applyPlacement(s,a),this.$element.trigger("shown")},selectBestVerticalPlacement:function(e,t){var n=t[0].getBoundingClientRect();return n.top<60?"bottom":"top"},applyPlacement:function(e,t){var n,i,o,r,a=this.tip(),s=a[0].offsetWidth,l=a[0].offsetHeight;a.offset(e).addClass(t).addClass("in"),n=a[0].offsetWidth,i=a[0].offsetHeight,"top"==t&&i!=l&&(e.top=e.top+l-i,r=!0),"bottom"==t||"top"==t?(o=0,e.left<0&&(o=-2*e.left,e.left=0,a.offset(e),n=a[0].offsetWidth,i=a[0].offsetHeight),this.replaceArrow(o-s+n,n,"left")):this.replaceArrow(i-l,i,"top"),r&&a.offset(e)},replaceArrow:function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){n.off(e.support.transition.end).detach()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.detach()})}var n=this.tip(),i=e.Event("hide");return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():n.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,n=this.options;return e="function"==typeof n.title?n.title.call(t[0]):n.title},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){
this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=e.fn.tooltip,i=r();e.fn.tooltip=function(n){return i?void 0:this.each(function(){var i=e(this),o=i.data("tooltip"),r="object"==typeof n&&n;o||i.data("tooltip",o=new t(this,r)),"string"==typeof n&&o[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),i}()},function(e,t){"use strict";e.exports=function(){return{panelWidthValue:"280px",menuSlideValue:"320px",hidePanelValue:"-280px",shiftedPanelValue:"-200px",shiftedMarginValue:"200px",isMobile:navigator.userAgent.match(/mobile/i)?!0:!1}}()},function(e,t){"use strict";function n(e){return"\n"===e||" "===e||"	"===e}e.exports={attachElContent:function(e){var t=this.el;if("string"==typeof e)return t.innerHTML=e,this;if(e.length){t.innerHTML="";for(var i=e.length,o=0;i>o;o++){var r=e[o];3===r.nodeType&&1===r.textContent.length&&n(r.textContent[0])||t.appendChild(r)}return this}return 1===e.nodeType?(t.innerHTML="",t.appendChild(e),this):(this.$el.html(e),this)}}},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){return"      "+this.escapeExpression((t.widget||e&&e.widget||t.helperMissing).call(e,"avatar",{name:"widget",hash:{user:null!=e?e.fromUser:e},data:i}))+"\n"},3:function(e,t,n,i){return'    <i class="chat-item__icon icon-check chat-item__icon--read chat-item__icon--read-by-some js-chat-item-readby"></i>\n'},5:function(e,t,n,i){return'    <i class="chat-item__icon icon-check chat-item__icon--read js-chat-item-readby"></i>\n'},7:function(e,t,n,i){return'      <div id=\'initial\' style="position:relative;top:-120px; left: 0; height:0;width:0;overflow:hidden"><a name="initial"/>_</a></div>\n'},9:function(e,t,n,i){return"      <div class='chat-item__time js-chat-item-time chat-item__time--permalinkable'>\n        "+this.escapeExpression((t.widget||e&&e.widget||t.helperMissing).call(e,"timeago",{name:"widget",hash:{tooltipFormat:"LLL [<br>(Alt-click to quote)]",locale:null!=e?e.locale:e,lang:null!=e?e.lang:e,time:null!=e?e.sent:e},data:i}))+"\n      </div>\n"},11:function(e,t,n,i){return"      <div class='chat-item__time js-chat-item-time'>\n        "+this.escapeExpression((t.widget||e&&e.widget||t.helperMissing).call(e,"timeago",{name:"widget",hash:{tooltipFormat:"LLL",locale:null!=e?e.locale:e,lang:null!=e?e.lang:e,time:null!=e?e.sent:e},data:i}))+"\n      </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s="function";return"<div class='chat-item__container'>\n  <div class='chat-item__aside'>\n    <div class=\"chat-item__avatar\">\n"+(null!=(o=t["if"].call(e,null!=e?e.fromUser:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+'    </div>\n  </div>\n  <div class="chat-item__actions js-chat-item-actions">\n'+(null!=(o=t["if"].call(e,null!=e?e.readByText:e,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.program(5,i,0),data:i}))?o:"")+"    <i class=\"chat-item__icon icon-ellipsis\"></i>\n  </div>\n  <div class='chat-item__content'>\n"+(null!=(o=t["if"].call(e,null!=e?e.initial:e,{name:"if",hash:{},fn:this.program(7,i,0),inverse:this.noop,data:i}))?o:"")+"    <div class='chat-item__details'>\n      <div class='chat-item__from js-chat-item-from'>"+this.escapeExpression((r=null!=(r=t.username||(null!=e?e.username:e))?r:a,typeof r===s?r.call(e,{name:"username",hash:{},data:i}):r))+"</div>\n"+(null!=(o=t["if"].call(e,null!=e?e.isPermalinkable:e,{name:"if",hash:{},fn:this.program(9,i,0),inverse:this.program(11,i,0),data:i}))?o:"")+"    </div>\n    <div class='chat-item__text js-chat-item-text'>\n      "+(null!=(r=null!=(r=t.html||(null!=e?e.html:e))?r:a,o=typeof r===s?r.call(e,{name:"html",hash:{},data:i}):r)?o:"")+"\n    </div>\n  </div>\n</div>\n"},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){return'      <div id=\'initial\' style="position:relative;top:-120px; left: 0; height:0;width:0;overflow:hidden"><a name="initial"/>_</a></div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s="function";return"<div class='chat-item__container chat-item__status'>\n  <div class='chat-item__aside'>\n\n  </div>\n  <div class=\"chat-item__actions js-chat-item-actions\">\n    <i class=\"chat-item__icon icon-ellipsis\"></i>\n  </div>\n  <div class='chat-item__content'>\n"+(null!=(o=t["if"].call(e,null!=e?e.initial:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+"    <div class='chat-item__details'>\n      <div class='chat-item__text js-chat-item-text'>"+this.escapeExpression((r=null!=(r=t.username||(null!=e?e.username:e))?r:a,typeof r===s?r.call(e,{name:"username",hash:{},data:i}):r))+" "+(null!=(r=null!=(r=t.html||(null!=e?e.html:e))?r:a,o=typeof r===s?r.call(e,{name:"html",hash:{},data:i}):r)?o:"")+"</div>\n    </div>\n  </div>\n</div>\n"},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){var o;return null!=(o=t["if"].call(e,null!=e?e.disabled:e,{name:"if",hash:{},fn:this.program(2,i,0),inverse:this.program(4,i,0),data:i}))?o:""},2:function(e,t,n,i){var o;return'    <div class="chat-item__action-disabled">\n      '+this.escapeExpression((o=null!=(o=t.description||(null!=e?e.description:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"description",hash:{},data:i}):o))+"\n    </div>\n"},4:function(e,t,n,i){var o,r=t.helperMissing,a="function",s=this.escapeExpression;return'    <div class="chat-item__action js-chat-action-'+s((o=null!=(o=t.name||(null!=e?e.name:e))?o:r,typeof o===a?o.call(e,{name:"name",hash:{},data:i}):o))+'">\n      '+s((o=null!=(o=t.description||(null!=e?e.description:e))?o:r,typeof o===a?o.call(e,{name:"description",hash:{},data:i}):o))+"\n    </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o;return null!=(o=t.each.call(e,null!=e?e.actions:e,{name:"each",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:""},useData:!0})},function(e,t,n){"use strict";var i=n(118),o=n(11),r=n(142),a=i.ItemView.extend({events:{input:"onTextChange",blur:"resetTextareaSize"},initialize:function(){r()&&this.$el.addClass("scroller"),this.onTextChange()},processInput:function(){this.trigger("save",this.$el.val())},onTextChange:function(){this.$el.val()?this.expandTextareaIfNeeded():this.shrinkTextarea()},resetTextareaSize:function(){this.shrinkTextarea(),this.expandTextareaIfNeeded()},shrinkTextarea:function(){this.$el.css("height",""),o.trigger("chatCollectionView:viewportResize",!1)},expandTextareaIfNeeded:function(){var e=this.$el,t=e[0],n=t.offsetHeight,i=t.scrollHeight,r=window.innerHeight/2,a=Math.min(i,r);a>n&&(e.css("height",a),o.trigger("chatCollectionView:viewportResize",!0))}});e.exports=a},function(e,t,n){"use strict";var i=n(38);e.exports=function(){return{collapse:function(e){i.userRoom.post("/collapsedItems",{chatId:e},{global:!1})},uncollapse:function(e){i.userRoom["delete"]("/collapsedItems/"+e,{},{global:!1})}}}()},function(e,t,n){"use strict";var i=n(4),o=n(11);n(169),e.exports=function(){return{initialize:function(){var e;if(e=i.result(this,"keyboardEvents")){var t=this,n=/\s+/,r=function(e,n){i.isFunction(n)||(n=t[n]),n&&t.listenTo(o,"keyboard."+e,n,t)};i.each(e,function(e,t){if(n.test(t)){var o=t.split(n);i.each(o,function(t){r(t,e)})}else r(t,e)})}}}}()},function(e,t,n){"use strict";var i=n(11),o=n(170),r=n(4),a=n(172);e.exports=function(){var e=o.cmd,t=o.room,n=o.gitter;a.filter=function(e){var t,n=e.target||e.srcElement;return"on"===n.getAttribute("data-prevent-keys")?!1:(t="chat-input-textarea"===n.id?"input.chat":"list-search-input"===n.id||n.classList.contains("js-search-input")?"input.search":/^trpChatInput/.test(n.className)?"input.chat.edit":/^(INPUT|TEXTAREA|SELECT)$/.test(n.tagName)?"input.other":"other",a.setScope(t),!0)};var s={backspace:{name:"backspace",scope:"other"},esc:[{name:"chat.escape",scope:"input.chat"},{name:"chat.edit.escape",scope:"input.chat.edit"},{name:"search.escape",scope:"input.search"},{name:"maininput.escape",scope:["input.chat","input.search"]},{name:"input.escape",scope:"input.other"},{name:"document.escape",scope:"other"}],enter:[{name:"search.go",scope:"input.search"},{name:"room.enter",scope:"other"},{name:"chat.compose.auto",scope:"input.chat"}],"shift+enter":[{name:"chat.compose.auto",scope:"input.chat"}],up:[{name:"room.up",scope:"other"},{name:"chat.edit.openLast",scope:"input.chat"},{name:"search.prev",scope:"input.search"}],down:[{name:"room.down",scope:"other"},{name:"search.next",scope:"input.search"}],tab:{name:"maininput.tab.next",scope:["input.chat","input.chat.edit","input.search"]},"+tab":{name:"maininput.tab.prev",scope:["input.chat","input.chat.edit","input.search"]},pageup:"pageUp",pagedown:"pageDown","q, r":{name:"quote",scope:"other"}};s["enter, "+e+"+enter"]=[{name:"chat.send",scope:"input.chat"},{name:"chat.edit.send",scope:"input.chat.edit"}],s[e+"+/, "+e+"+"+n+"+/"]="chat.toggle",s[e+"++f"]="focus.search",s[e+"+"+n+"+c"]="focus.chat",s[e+"+"+n+"+m"]="help.markdown",s[e+"+"+n+"+k"]="help.keyboard",s[e+"+"+t+"+up"]="room.up",s[e+"+"+t+"+down"]="room.down",s[e+"+"+t+"+enter"]="room.enter",r.each("123456789".split(""),function(t){s[e+"+"+n+"+"+t]="room."+t}),s[e+"+"+n+"+0"]="room.10";var l=function(e,t,n){r.isObject(t)&&(n=t.scope,t=t.name),n=n||"all";var o=function(n){a(e,n,function(e,n){i.trigger("keyboard."+t,e,n),i.trigger("keyboard.all",t,e,n)})};r.isArray(n)?r.each(n,o):o(n)};r.each(s,function(e,t){r.isArray(e)?r.each(e,function(e){l(t,e)}):l(t,e)})}()},function(e,t,n){"use strict";var i=n(171);e.exports=function(){switch(i()){case"Mac":return{cmd:"",room:"ctrl",gitter:"ctrl"};case"Windows":return{cmd:"ctrl",room:"",gitter:""};default:return{cmd:"ctrl",room:"",gitter:"alt"}}}()},function(e,t){"use strict";e.exports=function(){return function(){var e=navigator.platform;return e.indexOf("Mac")>-1?"Mac":e.indexOf("Win")>-1?"Windows":e.indexOf("Linux")>-1?"Linux":void 0}}()},,function(e,t,n){"use strict";var i=n(118),o=n(3),r=n(174),a=i.ItemView.extend({template:r});e.exports={loadingView:a,initialize:function(){this.showEmptyView=this.showLoadingView},showLoadingView:function(){if(this.collection.loading){var e=i.getOption(this,"loadingView");this.loadingModel||(this.loadingModel=new o.Model);var t=this.children.findByModel(this.loadingModel);return e&&!t&&(this.addChild(this.loadingModel,e,0),this.listenToOnce(this.collection,"loaded",function(){return this.removeChildView(this.loadingModel),0===this.collection.length?(this.constructor.prototype.showEmptyView.call(this),!0):void 0})),!0}return this.constructor.prototype.showEmptyView.call(this),!0}}},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="trpLoading"></div>'},useData:!0})},function(e,t){"use strict";e.exports=function(e,t){e&&("none"===e.style.display?t&&(e.style.display=""):t||(e.style.display="none"))}},function(e,t,n){"use strict";function i(e){l.push(e),1===l.length&&setTimeout(o,500)}function o(){var e=l.shift();if(e){c<l.length&&(c=l.length);var t=e.classList;if(t.remove("unread"),l.length){var n=c>10?60:70;setTimeout(o,n)}else c=0}}var r=n(2),a=n(118),s=n(155),l=[],c=0,u=a.Behavior.extend({modelEvents:{"change:unread":"unreadChanged"},onRender:function(){if(r.isLoggedIn()){var e=this.view.model;if(e){var t=e.get("unread");t&&this.el.classList.add("unread")}}},unreadChanged:function(e,t,n){if(t)return void this.el.classList.add("unread");var o=e.previous("unread");o&&(n&&n.fast?(this.el.classList.add("fast"),this.el.classList.remove("unread")):i(this.el))}});s.register("UnreadItems",u),e.exports=u},function(e,t,n){"use strict";var i=n(118),o=n(178),r=n(155);e.exports=function(){var e=i.Behavior.extend({modelEvents:{"change:highlights":"onRender"},onRender:function(){if(this.view.model){var e=this.view.model.get("highlights");this.highlighted&&o.removeHighlights(this.view.el),e&&e.length&&(this.highlighted=!0,o.highlight(this.view.el,e))}}});return r.register("Highlight",e),e}()},function(e,t){"use strict";e.exports=function(){function e(e,t,n){var i=document.createElement("em");i.classList.add("highlight"),i.textContent=t,e.splitText(n),e.nextSibling.nodeValue=e.nextSibling.nodeValue.substr(t.length,e.nextSibling.nodeValue.length),i.appendChild(e.splitText(n)),e.parentNode.insertBefore(i,e.nextSibling)}function t(t,n){for(var i,o=document.createTreeWalker(t,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,function(e){return 1!==e.nodeType?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP},!1),r=[];null!==(i=o.nextNode());)r.push(i);var a=n.map(function(e){var t=e.replace(/(^|[^\[])\^/g,"$1");return"("+t+")"}).join("|"),s=new RegExp(a,"gi");r.forEach(function(t){for(var n,i,o=[];null!==(n=s.exec(t.data));)o.push(n);for(var r=o.length;r-- >0;)n=o[r],e(t,n[0],n.index,i)})}function n(e){for(var t=e.querySelectorAll("em.highlight"),n=0;n<t.length;++n){var i=t[n],o=document.createTextNode(i.textContent);i.parentNode.replaceChild(o,i)}}return{highlight:t,removeHighlights:n}}()},function(e,t,n){"use strict";var i=n(118),o=n(155);e.exports=function(){var e=i.Behavior.extend({modelEvents:{"change:lastMessageSeen":"onRender"},onRender:function(){this.view.model&&this.view.model.get("lastMessageSeen")&&this.view.$el.addClass("lastMessageSeen")}});return o.register("LastMessageSeen",e),e}()},function(e,t,n){"use strict";var i=n(150),o=n(4),r=n(181),a=n(146);e.exports=function(){function e(e,r,a){a=a||{},this._target=e,this._childContainer=r||e,this._mutationHandlers={},this._mutationHandlers[t]=this.updateTrackBottom.bind(this),this._mutationHandlers[n]=this.updateStableTracking.bind(this),this._stableElement=null,a.doNotTrack?this._mode=n:this.initTrackingMode();var s=this.adjustScroll.bind(this);this.mutant=new i(e,s,{transitions:!0,observers:{attributes:!1,characterData:!1},ignoreTransitions:["opacity","background-color","border","color","border-right-color"]});var l=o.throttle(this.trackLocation.bind(this),100);e.addEventListener("scroll",l,!1),window.addEventListener("resize",s,!1),window.addEventListener("focusin",s,!1),window.addEventListener("focusout",s,!1)}var t=1,n=3,s=10,l=300;return e.prototype={adjustScroll:function(){return this._mutationHandlers[this._mode](),this._postMutateTop=this._target.scrollTop,!0},adjustScrollContinuously:function(e){r.intervalUntil(this.adjustScroll.bind(this),e)},initTrackingMode:function(){this.isScrolledToBottom()?this._mode=t:this.stable()},stable:function(e){var t=this._target;if(this._mode=n,this._stableElement=e||this.getBottomMostVisibleElement(),this._stableElement){var i=t.scrollTop+t.clientHeight,o=this._stableElement.offsetTop-t.offsetTop;this._stableElementFromBottom=i-o}},setModeLocked:function(e){this.modeLocked=e,e||this.trackLocation()},disableTrackBottom:function(){this.disableTrackBottom=!0},enableTrackBottom:function(){this.disableTrackBottom=!0,this.isScrolledToBottom()&&this.trackLocation()},isScrolledToBottom:function(){var e=this._target,t=e.scrollTop>=e.scrollHeight-e.clientHeight-s;return t},updateTrackBottom:function(){var e=this._target,t=e.scrollHeight-e.clientHeight;this.scroll(t)},startTransition:function(e,t){this.mutant.startTransition(e,t)},endTransition:function(e){this.mutant.endTransition(e)},scrollToBottom:function(){var e=this._target,n=e.scrollHeight-e.clientHeight;this.scroll(n),delete this._stableElement,delete this._stableElementFromBottom,this._mode=t,this._postMutateTop=n},scrollToElement:function(e,t){var n,i=this._target;if(t&&t.centre){var o=e.offsetHeight,r=i.clientHeight;r>o&&(n=Math.floor(e.offsetTop+o/2-r/2))}n||(n=e.offsetTop-l),0>n&&(n=0),this.scroll(n),this.stable(e)},scrollToBottomContinuously:function(e){r.intervalUntil(this.scrollToBottom.bind(this),e)},updateStableTracking:function(){if(this._stableElement){var e=this._target,t=this._stableElement.offsetTop-e.offsetTop,n=t-e.clientHeight+this._stableElementFromBottom;this.scroll(n)}},trackLocation:function(){var e=this._target;if(this._postMutateTop===e.scrollTop)return!0;var i=e.scrollTop>=e.scrollHeight-e.clientHeight-s;if(this.modeLocked||(i?this._mode!=t&&(this._mode=t):this._mode!=n&&(this._mode=n)),this._mode===n){if(this._stableElement=this.getBottomMostVisibleElement(),!this._stableElement)return;var o=e.scrollTop+e.clientHeight,r=this._stableElement.offsetTop-e.offsetTop;this._stableElementFromBottom=o-r}return!0},getScrollBottom:function(){var e=this._target.scrollTop;return this._target.clientHeight+e},getBottomMostVisibleElement:function(){for(var e=this._target.scrollTop,t=this._target.clientHeight,n=e+t,i=this._childContainer.children,o=i.length-1;o>=0;o--){var r=i[o];if(r.offsetTop<n)return r}},getMostCenteredElement:function(){for(var e=this._target.scrollTop,t=this._target.clientHeight,n=e+t,i=this._childContainer.children,o=i.length-1;o>=0;o--){var r=i[o],a=t/2,s=n-r.offsetTop;if(s>a)return r}},scroll:function(e){a()?(this._target.style.overflow="hidden",this._target.scrollTop=e,this._target.style.overflow=""):this._target.scrollTop=e}},e}()},function(e,t,n){"use strict";function i(e,t){var n;return function(){n&&a.cancel(n),n=a(function(){n=void 0,e.call(t)})}}function o(e,t){var n;return function(){n||(n=a(function(){n=void 0,e.call(t)}))}}function r(e,t){function n(){e(),Date.now()<i&&a(n)}var i=Date.now()+t;a(n)}var a=n(159);e.exports={debounce:i,throttle:o,intervalUntil:r}},function(e,t,n){"use strict";var i=n(183),o=n(184);e.exports=function(e,t){return o(i,e,t)}},function(e,t){"use strict";e.exports={get:function(e,t){return e.get(t)},at:function(e,t){return e.at(t)},indexOf:function(e,t){return e.indexOf(t)}}},function(e,t){"use strict";function n(e,t,n){var i,o=e.indexOf(t,n),r=o+1,a=[n];if(0>o)return a;if(!e.get(n,"burstStart"))for(o--,i=e.at(t,o);o>=0&&(a.unshift(i),!e.get(i,"burstStart"));)o--,o>=0&&(i=e.at(t,o));for(;r<t.length&&(i=e.at(t,r))&&!e.get(i,"burstStart");)a.push(i),r++;return a}e.exports=n},function(e,t,n){"use strict";var i=n(11),o={};e.exports={start:function(e){o[e]=Date.now()},end:function(e){var t=o[e];return delete o[e],t?(i.trigger("stats.time",e,Date.now()-t),t):void 0}}},function(e,t,n){"use strict";var i=n(118),o=n(155),r=n(187);e.exports=function(){var e=i.Behavior.extend({defaults:{reverseScrolling:!1,scrollElementSelector:null,contentWrapperSelector:null},initialize:function(){var e=this.options.scrollElement||document.querySelector(this.options.scrollElementSelector)||this.view.el,t=this.options.contentWrapper||document.querySelector(this.options.contentWrapperSelector),n=this.options.reverseScrolling,i=new r(e,{reverse:n,contentWrapper:t});this.listenTo(i,"approaching.top",function(){this.view.collection.fetchMoreBefore({})}),this.listenTo(i,"approaching.bottom",function(){this.view.collection.fetchMoreAfter({})}),this.scroll=i,this.view.scroll=i},onDestroy:function(){this.scroll.disable()}});return o.register("InfiniteScroll",e),e}()},function(e,t,n){"use strict";var i=n(4),o=n(3),r=n(16)("app:nes"),a=n(146);e.exports=function(){function e(e,t){this._target=e,this._reverse=t&&t.reverse,this._prevScrollTop=0,this._prevScrollTime=Date.now(),this._nearTop=!1,this._nearBottom=!1,this._scrollHandler=i.throttle(a()?this.mobileScroll.bind(this):this.scroll.bind(this),100),this._contentWrapper=t&&t.contentWrapper,this.enable()}return i.extend(e.prototype,o.Events,{scroll:function(){var e=this._target,t=e.scrollTop,n=e.scrollHeight-e.scrollTop-e.clientHeight,i=this._prevScrollTop,o=this._prevScrollBottom;this._prevScrollTop=t,this._prevScrollBottom=n;var r=i-t,a=o-n,s=e.clientHeight/2,l=s>t,c=s>n;r>0&&l?this.trigger("approaching.top"):a>0&&c&&this.trigger("approaching.bottom"),this.scrollRate()},mobileScroll:function(){var e=this._target,t=e.scrollTop,n=e.scrollHeight-e.scrollTop-e.clientHeight,i=this._prevScrollTop,o=this._prevScrollBottom;this._prevScrollTop=t,this._prevScrollBottom=n;var r=i-t,a=o-n,s=0>=t,l=0>=n;r>0&&s?this.trigger("approaching.top"):a>0&&l&&this.trigger("approaching.bottom")},scrollRate:function(){var e=this._target,t=Date.now(),n=e.scrollTop,i=e.scrollHeight-e.scrollTop-e.clientHeight,o=this._prevScrollTimeRate,r=this._prevScrollTopRate,a=this._prevScrollBottomRate;if(this._prevScrollTopRate=n,this._prevScrollBottomRate=i,this._prevScrollTimeRate=t,o){var s,l,c=r-n,u=a-i,d=t-o;if(c>0){if(n>e.clientHeight)return;return s=c/d,l=n/s,void(600>l&&this.trigger("approaching.top"))}if(u>0){if(i>e.clientHeight)return;s=u/d,l=i/s,600>l&&this.trigger("approaching.bottom")}}},scrollToOrigin:function(){var e=this._target;if(this._reverse){var t=e.scrollHeight-e.clientHeight;e.scrollTop=t}else e.scrollTop=0;this._scrollHandler()},pageUp:function(){var e=this._target,t=e.scrollTop,n=Math.floor(.8*e.offsetHeight);e.scrollTop=t-n},pageDown:function(){var e=this._target,t=e.scrollTop,n=Math.floor(.8*e.offsetHeight);e.scrollTop=t+n},enable:function(){var e=this;this._enabled||(r("enabling scroll listener"),this._target.addEventListener("scroll",this._scrollHandler,!1),this._enabled=!0,this._contentWrapper&&setTimeout(function(){e._contentWrapper.offsetHeight<e._target.clientHeight&&e.trigger("approaching.top")},10))},disable:function(){this._enabled&&(r("disabling scroll listener"),this._target.removeEventListener("scroll",this._scrollHandler,!1),this._enabled=!1)}}),e}()},function(e,t,n){"use strict";var i=n(118),o=n(155),r=n(4),a=n(181),s=i.Behavior.extend({defaults:{scrollElementSelector:null,contentWrapper:null},initialize:function(){var e=this.options.scrollElementSelector,t=this.options.contentWrapper;this.queue=[],this.scrollElement=e?document.querySelector(e):this.view.el,this.wrapper=t?this.scrollElement.querySelector(t):null,this.listenTo(this.view,"render",this.decorateIfVisible),this.lazyDecorator=r.debounce(this.decorateIfVisible.bind(this),500),this.lazyDecoratorQueue=a.debounce(this.decorateQueue,this),this.lazyTracker=r.debounce(this.trackViewport.bind(this),500),this.lazyPointerEvents=r.debounce(this.enablePointerEvents.bind(this),250),this.scrollHandler=this.smoothScroll.bind(this),this.scrollElement.addEventListener("scroll",this.scrollHandler,!1)},decorateIfVisible:function(){this.view.children.each(function(e){"visible"===this.viewportStatus(e.el)&&e.trigger("messageInViewport")}.bind(this))},onAddChild:function(e){this.queue.push(e),this.lazyDecoratorQueue()},decorateQueue:function(){var e=this.queue;this.queue=[],e.forEach(function(e){"visible"===this.viewportStatus(e.el)&&e.trigger("messageInViewport")},this)},viewportStatus:function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)?"visible":t.top>=0&&t.bottom>=(window.innerHeight||document.documentElement.clientHeight)?"below":t.top<=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)?"above":void 0},trackViewport:function(){this.view.triggerMethod("trackViewportCenter")},disablePointerEvents:function(){this.wrapper&&!this.wrapper.classList.contains("disable-hover")&&this.wrapper.classList.add("disable-hover")},enablePointerEvents:function(){this.wrapper&&this.wrapper.classList.remove("disable-hover")},smoothScroll:function(){this.disablePointerEvents(),this.lazyDecorator(),this.lazyTracker(),this.lazyPointerEvents()},onDestroy:function(){this.scrollElement.removeEventListener("scroll",this.scrollHandler,!1)}});o.register("SmoothScroll",s),e.exports=s},function(e,t,n){"use strict";var i=n(4),o=n(2),r=n(114),a=n(38),s=n(16)("app:unread-items-client"),l=n(3),c=n(11),u=n(190);e.exports=function(){function e(e,t,n){return i.throttle(e.bind(t),n||30,{leading:!1})}function t(e,t){var n=o.user();n.id?e.call(t,n.id):n.once("change:id",function(){e.call(t,n.id)})}function n(e,t){t.on("add",function(t){t.id&&t.get("unread")&&e.isMarkedAsRead(t.id)&&(s("item already marked as read"),t.set("unread",!1))}),e.on("unreadItemRemoved",function(e){s("CollectionSync: unreadItemRemoved: %s mention=%s",e),t.patch(e,{unread:!1,mentioned:!1})}),e.on("itemMarkedRead",function(e,n){s("CollectionSync: itemMarkedRead: %s mention=%s",e,n),t.patch(e,{unread:!1,mentioned:n})}),e.on("change:status",function(e,n){s("CollectionSync: change:status: %s mention=%s",e),t.patch(e,{unread:!0,mentioned:n})}),e.on("add",function(e,n){s("CollectionSync: add: %s mention=%s",e),t.patch(e,{unread:!0,mentioned:n})}),e.on("reset",function(){s("CollectionSync: reset");var n=e.getItemHash();t.each(function(e){var t=e.id,i=n[t],o={fast:!0};i===!1?e.set({unread:!0,mentioned:!1},o):i===!0?e.set({unread:!0,mentioned:!0},o):e.set({unread:!1,mentioned:!1},o)})})}function d(){if(v)return v;if(o.troupe().id){v=new u,v.on("newcountvalue",function(e){c.trigger("unreadItemsCount",e)}),new p(v);var e=new m(v);return e._subscribe(),v}return null}function h(){var e=d();if(e)return e;throw new Error("Unable to create an unread items store without a user")}var f=function(){this._items={},this._timer=setInterval(this._gc.bind(this),6e4)};f.prototype={add:function(e){this._items[e]=Date.now()},remove:function(e){delete this._items[e]},contains:function(e){return!!this._items[e]},_gc:function(){var e=Date.now()-3e5,t=this._items;Object.keys(t).forEach(function(n){t[n]<e&&delete t[n]})}};var p=function(t){this._buffer={},this._sendLimited=e(this._send,this,1e3),this._updateLastAccessLimited=e(this._updateLastAccess,this,1e3),t.on("itemMarkedRead",this._onItemMarkedRead.bind(this));var n=this._onWindowUnload.bind(this);["unload","beforeunload"].forEach(function(e){window.addEventListener(e,n,!1)})};p.prototype={_onItemMarkedRead:function(e,t,n){if(n&&this._updateLastAccessLimited(),!n||t){var i=o.getTroupeId(),r=this._buffer[i];r||(r=this._buffer[i]={}),r[e]=!0,this._sendLimited()}},_onWindowUnload:function(){Object.keys(this._buffer)>0&&this._send({sync:!0})},_updateLastAccess:function(){s("_updateLastAccess"),a.userRoom.put("",{updateLastAccess:new Date}).then(function(){s("_updateLastAccess done")})},_send:function(e){s("_send"),Object.keys(this._buffer).forEach(function(t){this._sendForRoom(t,e)},this)},_sendForRoom:function(e,n){function i(){a.user.post("/rooms/"+e+"/unreadItems",r,{async:l,global:!1}).fail(function(){s("Error posting unread items to server. Will attempt again in 5s"),++c<10&&setTimeout(i,5e3)})}s("_sendForRoom: %s",e);var o=Object.keys(this._buffer[e]);if(delete this._buffer[e],o.length){var r={chat:o},l=!n||!n.sync,c=0;t(i)}}};var m=function(e){this._store=e};i.extend(m.prototype,l.Events,{_subscribe:function(){var e=this._store,t=r.getClient().subscribeTemplate({urlTemplate:"/v1/user/:userId/rooms/:troupeId/unreadItems",contextModel:o.contextModel(),onMessage:function(t){switch(s("Realtime: Channel message: %j",t),t.notification){case"unread_items":e._unreadItemsAdded(t.items);break;case"unread_items_removed":e._unreadItemsRemoved(t.items);break;case"mark_all_read":e.markAllReadNotification();break;case"lurk_change":t.lurk?e.enableLurkMode():e.disableLurkMode()}},handleSnapshot:function(t){s("Realtime: Channel snapshot: %j",t);var n=o.troupe().get("roomMember"),i=t._meta&&t._meta.lurk;(i||!n)&&e.enableLurkMode(),e.reset(t)}});t.on("resubscribe",function(){s("Realtime: resubscribe"),e.state="LOADING",e.reset()})}});var g=function(t,n,r){var a=this._getBounds.bind(this),s=e(this._getBounds,this,100),l=i.debounce(this._getBounds.bind(this),100);this._collectionView=r,this._scrollElement=t[0]||t,this._store=n,this._windowScrollLimited=e(this._windowScroll,this,50);var u=this._foldCountLimited=e(this._foldCount,this,50);this._inFocus=!0,c.on("eyeballStateChange",this._eyeballStateChange,this),this._scrollElement.addEventListener("scroll",a,!1),n.on("newcountvalue",u),["unreadItemRemoved","change:status","itemMarkedRead","add"].forEach(function(e){n.on(e,s)}),r.collection.on("add",l),setInterval(s,2e3);var d=this;r.listenTo(o.troupe(),"change:lastAccessTime",function(e){if(o.troupe().get("lurk")){var t=e.get("lastAccessTime");this.collection.forEach(function(e){e.get("sent").isBefore(t)&&e.get("unread")&&d._store._markItemRead(e.id)})}})};g.prototype={_viewReady:function(){var e=this._collectionView,t=e.collection,n=t.models.length===e.children.length;return n||s("Mismatch: collection.length=%s, collectionView.length=%s",t.models.length,e.children.length),n},_getBounds:function(){return this._inFocus?(this._scrollBounds(),void this._windowScrollLimited()):void this._foldCountLimited()},_scrollBounds:function(){var e=this._scrollElement.scrollTop,t=e+this._scrollElement.clientHeight;(!this._scrollTop||e<this._scrollTop)&&(this._scrollTop=e),(!this._scrollBottom||t>this._scrollBottom)&&(this._scrollBottom=t)},_windowScroll:function(){if(this._inFocus){if(!this._viewReady())return s("Skipping windowScroll until view is ready...."),void this._windowScrollLimited();this._scrollBounds();var e=this,t=this._scrollTop,n=this._scrollBottom;delete this._scrollTop,delete this._scrollBottom;var i=this.findModelsInViewport(t,n);i.forEach(function(t){t.get("unread")&&e._store._markItemRead(t.id)}),this._foldCount()}},findModelsInViewport:function(e,t){var n,o=this._collectionView,r=o.collection;r.models.length===o.children.length?n=r.models:(s("Mismatch between childCollection.models.length (%s) and cv.children.length (%s) resorting to oddness",r.models.length,o.children.length),n=r.models.filter(function(e){return o.children.findByModelCid(e.cid)}));var a=i.sortedIndex(n,e,function(e){if("number"==typeof e)return e;var t=o.children.findByModelCid(e.cid);return t.el.offsetTop}),l=n.slice(a);if(t===Number.POSITIVE_INFINITY)return l;var c=i.sortedIndex(l,t,function(e){if("number"==typeof e)return e;var t=o.children.findByModelCid(e.cid);return t.el.offsetTop});return l.slice(0,c)},_resetFoldModel:function(){b.set({unreadAbove:0,unreadBelow:0,hasUnreadBelow:!1,hasUnreadAbove:!1,oldestUnreadItemId:null,mostRecentUnreadItemId:null,mentionsAbove:0,mentionsBelow:0,hasMentionsAbove:!1,hasMentionsBelow:!1,oldestMentionId:null,mostRecentMentionId:null})},_foldCount:function(){if(!this._viewReady())return s("Skipping fold count until view is ready"),void this._foldCountLimited();var e=this._store,t=e.getItems();if(!t.length)return void this._resetFoldModel();var n=0,i=0,o=0,r=0,a=this._scrollElement,l=a.scrollTop,c=l+a.clientHeight;c>=a.scrollHeight-10&&(c=Number.POSITIVE_INFINITY);var u=this.findModelsInViewport(l,c);if(!u.length)return void this._resetFoldModel();var d=u[0],h=u[u.length-1],f=d.id,p=h.id,m=null,g=null,v=null,w=null;t.forEach(function(t){f>t&&(n++,m||(m=t),e._items[t]&&(o++,v=t)),t>p&&(i++,g||(g=t),e._items[t]&&(r++,w||(w=t)))}),b.set({unreadAbove:n,unreadBelow:i,hasUnreadAbove:n>0,hasUnreadBelow:i>0,oldestUnreadItemId:m,mostRecentUnreadItemId:g,mentionsAbove:o,mentionsBelow:r,hasMentionsAbove:o>0,hasMentionsBelow:r>0,oldestMentionId:v,mostRecentMentionId:w})},_eyeballStateChange:function(e){this._inFocus=e,e&&this._getBounds()}};var v,b=new l.Model({defaults:{unreadAbove:0,unreadBelow:0,hasUnreadBelow:!1,hasUnreadAbove:!1,belowItemId:null}}),w={acrossTheFold:function(){return b},markAllRead:function(){var e=h();t(function(){a.userRoom["delete"]("/unreadItems/all").then(function(){e.markAllReadNotification()})})},syncCollections:function(e){var t=h();new n(t,e.chat)},monitorViewForUnreadItems:function(e,t){var n=h();return new g(e,n,t)}};return w.getStore=function(){return v},w.UnreadItemStore=u,window._unreadItems=w,w}()},function(e,t,n){"use strict";function i(e,t,n){return r.throttle(e.bind(t),n||30,{
leading:!1})}function o(e,t,n){var i=e.chat,o=e.mention,r={};i&&i.forEach(function(e){r[e]=!1}),o&&o.forEach(function(e){r[e]=!0}),Object.keys(r).forEach(function(e){var i=r[e];t.call(n,e,i)})}var r=n(4),a=n(3),s=function(){this._items={},this._timer=setInterval(this._gc.bind(this),6e4)};s.prototype={add:function(e){this._items[e]=Date.now()},remove:function(e){delete this._items[e]},contains:function(e){return!!this._items[e]},reset:function(){this._items={}},_gc:function(){var e=Date.now()-3e5,t=this._items;Object.keys(t).forEach(function(n){t[n]<e&&delete t[n]})}};var l=function(){this.length=0,this._lurkMode=!1,this._items={},this._read=new s,this.notifyCountLimited=i(this.notifyCount,this,30)};r.extend(l.prototype,a.Events,{state:"LOADING",_unreadItemAdded:function(e,t,n){var i=n&&n.silent;return this._items.hasOwnProperty(e)?this._items[e]===t?!1:(this._items[e]=t,i||this.trigger("change:status",e,t),!0):(this._items[e]=t,this.length++,this._read.remove(e),i||(this.notifyCountLimited(),this.trigger("add",e,t)),!0)},_unreadItemRemoved:function(e){this._items.hasOwnProperty(e)&&(delete this._items[e],this.length--,this.notifyCountLimited(),this._read.add(e),this.trigger("unreadItemRemoved",e))},_mentionRemoved:function(e){this._items.hasOwnProperty(e)&&(this._items[e]=!1,this.notifyCountLimited(),this.trigger("change:status",e,!1))},_markItemRead:function(e){var t=this._items.hasOwnProperty(e),n=this._lurkMode;if(!t)return void(n&&this.trigger("itemMarkedRead",e,!1,!0));var i=this._items[e];delete this._items[e],this.length--,this.notifyCountLimited(),this._read.add(e),this.trigger("itemMarkedRead",e,i,n)},_unreadItemsAdded:function(e){o(e,function(e,t){this._unreadItemAdded(e,t)},this)},_unreadItemsRemoved:function(e){function t(e){return e?e.reduce(function(e,t){return e[t]=!0,e},{}):{}}var n=t(e.chat),i=t(e.mention),o=r.extend({},n,i),a=this;Object.keys(o).forEach(function(e){var t=n[e];t?a._unreadItemRemoved(e):a._mentionRemoved(e)})},notifyCount:function(){this.trigger("newcountvalue",this.length)},getItems:function(){return Object.keys(this._items)},getItemHash:function(){return this._items},getMentions:function(){return Object.keys(this._items).reduce(function(e,t){return this._items[t]&&e.push(t),e}.bind(this),[])},enableLurkMode:function(){this._lurkMode=!0,this.markAllReadNotification()},disableLurkMode:function(){this._lurkMode=!1},markAllReadNotification:function(){Object.keys(this._items).forEach(function(e){var t=this._items[e];this.trigger("itemMarkedRead",e,t,this._lurkMode)},this),this._items={},this.length=0,this.notifyCountLimited()},getFirstItem:function(){return Object.keys(this._items).reduce(function(e,t){return null===e?t:t>e?e:t},null)},isMarkedAsRead:function(e){return this._read.contains(e)},reset:function(e){this.length=0,this._lurkMode=!1,this._read.reset(),this._items={},e?(this.state="LOADED",o(e,function(e,t){this._unreadItemAdded(e,t,{silent:!0})},this),this.trigger("reset"),this.notifyCountLimited()):"LOADED"===this.state&&this.notifyCountLimited()}}),e.exports=l},function(e,t,n){"use strict";var i=n(4),o=n(118),r=n(155),a=o.Behavior.extend({onRender:function(){this.setupRegions()},onBeforeShow:function(){this.setupRegions()},setupRegions:function(){if(!this.setup){this.setup=1;var e=this.view,t=this.options;Object.keys(t).forEach(function(n){function o(e,t){var o=s.$el[0];if(!o)throw new Error("Region "+n+" does not exist.");var r,a=o.children.length;if(0===a)r={};else{if(1!==a)throw new Error("Region can have zero or one elements, but not more. Region "+n+" has "+a+". Are you sure you wrapped the region with a parent?");r=t&&t.rerender?{el:o.children[0]}:{template:!1,el:o.children[0]}}return e?i.extend(r,e):r}var r=t[n],a=r.el,s=e.addRegion(n,a),l=r.init;if(l){"string"==typeof l&&(l=e[l]);var c=l.call(e,o,s);c&&e.showChildView(n,c)}})}}});r.register("Isomorphic",a),e.exports=a},function(e,t,n){"use strict";var i=n(193);e.exports=function(){var e=i.emojify,t={decorate:function(t){e.run(t.$el.find(".js-chat-item-text")[0])}};return t}()},function(e,t,n){"use strict";var i=n(194),o=n(127);e.exports=function(){return i.setConfig({img_dir:o("images/emoji")}),{emojify:i,named:i.emojiNames}}()},function(e,t,n){var i,o,r;!function(n,a){"use strict";o=[],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(){"use strict";var e=function(){function e(){var e={named:/:([a-z0-9A-Z_-]+):/,smile:/:-?\)/g,scream:/:-o/gi,smirk:/[:;]-?]/g,grinning:/[:;]-?d/gi,stuck_out_tongue_closed_eyes:/x-d/gi,stuck_out_tongue_winking_eye:/[:;]-?p/gi,rage:/:-?[\[@]/g,worried:/:-?\(/g,sob:/:[']-?\(|:&#x27;\(/g,kissing_heart:/:-?\*/g,wink:/;-?\)/g,pensive:/:-?\//g,confounded:/:-?s/gi,flushed:/:-?\|/g,relaxed:/:-?\$/g,mask:/:-x/gi,heart:/<3|&lt;3/g,broken_heart:/<\/3|&lt;&#x2F;3/g,thumbsup:/:\+1:/g,thumbsdown:/:\-1:/g};return m.ignore_emoticons&&(e={named:/:([a-z0-9A-Z_-]+):/,thumbsup:/:\+1:/g,thumbsdown:/:\-1:/g}),Object.keys(e).map(function(t){return[e[t],t]})}function t(){var e=c.map(function(e){var t=e[0],n=t.source||t;return n=n.replace(/(^|[^\[])\^/g,"$1"),"("+n+")"}).join("|");return new RegExp(e,"gi")}function n(e){return" "===e||"	"===e||"\r"===e||"\n"===e||""===e}function i(e,t,n){var i=d.createElement(m.emojify_tag_type||"img");m.emojify_tag_type&&"img"!==m.emojify_tag_type?i.setAttribute("class","emoji emoji-"+n):(i.setAttribute("class","emoji"),i.setAttribute("src",m.img_dir+"/"+n+".png")),i.setAttribute("title",":"+n+":"),i.setAttribute("alt",":"+n+":"),i.setAttribute("align","absmiddle"),e.splitText(t.index),e.nextSibling.nodeValue=e.nextSibling.nodeValue.substr(t[0].length,e.nextSibling.nodeValue.length),i.appendChild(e.splitText(t.index)),e.parentNode.insertBefore(i,e.nextSibling)}function o(e){if(e[1]&&e[2]){var t=e[2];if(p[t])return t}else for(var n=3;n<e.length-1;n++)if(e[n])return c[n-2][1]}function r(e,t){return this.config.emojify_tag_type&&"img"!==this.config.emojify_tag_type?"<"+this.config.emojify_tag_type+" title=':"+t+":' alt=':"+t+":' class='emoji emoji-"+t+"'> </"+this.config.emojify_tag_type+">":"<img title=':"+t+":' alt=':"+t+":' class='emoji' src='"+this.config.img_dir+"/"+t+".png' align='absmiddle' />"}function a(){this.lastEmojiTerminatedAt=-1}function s(n,i){if(!n)return n;i||(i=r),c=e(),u=t();var o=new a;return n.replace(u,function(){var e=Array.prototype.slice.call(arguments,0,-2),t=arguments[arguments.length-2],n=arguments[arguments.length-1],r=o.validate(e,t,n);return r?i.apply({config:m},[arguments[0],r]):arguments[0]})}function l(n){c=e(),u=t(),"undefined"==typeof n&&(n=m.only_crawl_id?d.getElementById(m.only_crawl_id):d.body);for(var r,s=m.ignored_tags,l=d.createTreeWalker(n,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,function(e){return 1!==e.nodeType?NodeFilter.FILTER_ACCEPT:s[e.tagName]||e.classList.contains("no-emojify")?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP},!1),h=[];null!==(r=l.nextNode());)h.push(r);h.forEach(function(e){for(var t,n=[],r=new a;null!==(t=u.exec(e.data));)r.validate(t,t.index,t.input)&&n.push(t);for(var s=n.length;s-- >0;){var l=o(n[s]);i(e,n[s],l)}})}var c,u,d="undefined"!=typeof window&&window.document,h="+1,-1,100,109,1234,8ball,a,ab,abc,abcd,accept,aerial_tramway,airplane,alarm_clock,alien,ambulance,anchor,angel,anger,angry,anguished,ant,apple,aquarius,aries,arrow_backward,arrow_double_down,arrow_double_up,arrow_down,arrow_down_small,arrow_forward,arrow_heading_down,arrow_heading_up,arrow_left,arrow_lower_left,arrow_lower_right,arrow_right,arrow_right_hook,arrow_up,arrow_up_down,arrow_up_small,arrow_upper_left,arrow_upper_right,arrows_clockwise,arrows_counterclockwise,art,articulated_lorry,astonished,atm,b,baby,baby_bottle,baby_chick,baby_symbol,back,baggage_claim,balloon,ballot_box_with_check,bamboo,banana,bangbang,bank,bar_chart,barber,baseball,basketball,bath,bathtub,battery,bear,bee,beer,beers,beetle,beginner,bell,bento,bicyclist,bike,bikini,bird,birthday,black_circle,black_joker,black_medium_small_square,black_medium_square,black_nib,black_small_square,black_square,black_square_button,blossom,blowfish,blue_book,blue_car,blue_heart,blush,boar,boat,bomb,book,bookmark,bookmark_tabs,books,boom,boot,bouquet,bow,bowling,bowtie,boy,bread,bride_with_veil,bridge_at_night,briefcase,broken_heart,bug,bulb,bullettrain_front,bullettrain_side,bus,busstop,bust_in_silhouette,busts_in_silhouette,cactus,cake,calendar,calling,camel,camera,cancer,candy,capital_abcd,capricorn,car,card_index,carousel_horse,cat,cat2,cd,chart,chart_with_downwards_trend,chart_with_upwards_trend,checkered_flag,cherries,cherry_blossom,chestnut,chicken,children_crossing,chocolate_bar,christmas_tree,church,cinema,circus_tent,city_sunrise,city_sunset,cl,clap,clapper,clipboard,clock1,clock10,clock1030,clock11,clock1130,clock12,clock1230,clock130,clock2,clock230,clock3,clock330,clock4,clock430,clock5,clock530,clock6,clock630,clock7,clock730,clock8,clock830,clock9,clock930,closed_book,closed_lock_with_key,closed_umbrella,cloud,clubs,cn,cocktail,coffee,cold_sweat,collision,computer,confetti_ball,confounded,confused,congratulations,construction,construction_worker,convenience_store,cookie,cool,cop,copyright,corn,couple,couple_with_heart,couplekiss,cow,cow2,credit_card,crocodile,crossed_flags,crown,cry,crying_cat_face,crystal_ball,cupid,curly_loop,currency_exchange,curry,custard,customs,cyclone,dancer,dancers,dango,dart,dash,date,de,deciduous_tree,department_store,diamond_shape_with_a_dot_inside,diamonds,disappointed,disappointed_relieved,dizzy,dizzy_face,do_not_litter,dog,dog2,dollar,dolls,dolphin,donut,door,doughnut,dragon,dragon_face,dress,dromedary_camel,droplet,dvd,e-mail,ear,ear_of_rice,earth_africa,earth_americas,earth_asia,egg,eggplant,eight,eight_pointed_black_star,eight_spoked_asterisk,electric_plug,elephant,email,end,envelope,es,euro,european_castle,european_post_office,evergreen_tree,exclamation,expressionless,eyeglasses,eyes,facepunch,factory,fallen_leaf,family,fast_forward,fax,fearful,feelsgood,feet,ferris_wheel,file_folder,finnadie,fire,fire_engine,fireworks,first_quarter_moon,first_quarter_moon_with_face,fish,fish_cake,fishing_pole_and_fish,fist,five,flags,flashlight,floppy_disk,flower_playing_cards,flushed,foggy,football,fork_and_knife,fountain,four,four_leaf_clover,fr,free,fried_shrimp,fries,frog,frowning,fu,fuelpump,full_moon,full_moon_with_face,game_die,gb,gem,gemini,ghost,gift,gift_heart,girl,globe_with_meridians,goat,goberserk,godmode,golf,grapes,green_apple,green_book,green_heart,grey_exclamation,grey_question,grimacing,grin,grinning,guardsman,guitar,gun,haircut,hamburger,hammer,hamster,hand,handbag,hankey,hash,hatched_chick,hatching_chick,headphones,hear_no_evil,heart,heart_decoration,heart_eyes,heart_eyes_cat,heartbeat,heartpulse,hearts,heavy_check_mark,heavy_division_sign,heavy_dollar_sign,heavy_exclamation_mark,heavy_minus_sign,heavy_multiplication_x,heavy_plus_sign,helicopter,herb,hibiscus,high_brightness,high_heel,hocho,honey_pot,honeybee,horse,horse_racing,hospital,hotel,hotsprings,hourglass,hourglass_flowing_sand,house,house_with_garden,hurtrealbad,hushed,ice_cream,icecream,id,ideograph_advantage,imp,inbox_tray,incoming_envelope,information_desk_person,information_source,innocent,interrobang,iphone,it,izakaya_lantern,jack_o_lantern,japan,japanese_castle,japanese_goblin,japanese_ogre,jeans,joy,joy_cat,jp,key,keycap_ten,kimono,kiss,kissing,kissing_cat,kissing_closed_eyes,kissing_face,kissing_heart,kissing_smiling_eyes,koala,koko,kr,large_blue_circle,large_blue_diamond,large_orange_diamond,last_quarter_moon,last_quarter_moon_with_face,laughing,leaves,ledger,left_luggage,left_right_arrow,leftwards_arrow_with_hook,lemon,leo,leopard,libra,light_rail,link,lips,lipstick,lock,lock_with_ink_pen,lollipop,loop,loudspeaker,love_hotel,love_letter,low_brightness,m,mag,mag_right,mahjong,mailbox,mailbox_closed,mailbox_with_mail,mailbox_with_no_mail,man,man_with_gua_pi_mao,man_with_turban,mans_shoe,maple_leaf,mask,massage,meat_on_bone,mega,melon,memo,mens,metal,metro,microphone,microscope,milky_way,minibus,minidisc,mobile_phone_off,money_with_wings,moneybag,monkey,monkey_face,monorail,moon,mortar_board,mount_fuji,mountain_bicyclist,mountain_cableway,mountain_railway,mouse,mouse2,movie_camera,moyai,muscle,mushroom,musical_keyboard,musical_note,musical_score,mute,nail_care,name_badge,neckbeard,necktie,negative_squared_cross_mark,neutral_face,new,new_moon,new_moon_with_face,newspaper,ng,nine,no_bell,no_bicycles,no_entry,no_entry_sign,no_good,no_mobile_phones,no_mouth,no_pedestrians,no_smoking,non-potable_water,nose,notebook,notebook_with_decorative_cover,notes,nut_and_bolt,o,o2,ocean,octocat,octopus,oden,office,ok,ok_hand,ok_woman,older_man,older_woman,on,oncoming_automobile,oncoming_bus,oncoming_police_car,oncoming_taxi,one,open_file_folder,open_hands,open_mouth,ophiuchus,orange_book,outbox_tray,ox,package,page_facing_up,page_with_curl,pager,palm_tree,panda_face,paperclip,parking,part_alternation_mark,partly_sunny,passport_control,paw_prints,peach,pear,pencil,pencil2,penguin,pensive,performing_arts,persevere,person_frowning,person_with_blond_hair,person_with_pouting_face,phone,pig,pig2,pig_nose,pill,pineapple,pisces,pizza,plus1,point_down,point_left,point_right,point_up,point_up_2,police_car,poodle,poop,post_office,postal_horn,postbox,potable_water,pouch,poultry_leg,pound,pouting_cat,pray,princess,punch,purple_heart,purse,pushpin,put_litter_in_its_place,question,rabbit,rabbit2,racehorse,radio,radio_button,rage,rage1,rage2,rage3,rage4,railway_car,rainbow,raised_hand,raised_hands,raising_hand,ram,ramen,rat,recycle,red_car,red_circle,registered,relaxed,relieved,repeat,repeat_one,restroom,revolving_hearts,rewind,ribbon,rice,rice_ball,rice_cracker,rice_scene,ring,rocket,roller_coaster,rooster,rose,rotating_light,round_pushpin,rowboat,ru,rugby_football,runner,running,running_shirt_with_sash,sa,sagittarius,sailboat,sake,sandal,santa,satellite,satisfied,saxophone,school,school_satchel,scissors,scorpius,scream,scream_cat,scroll,seat,secret,see_no_evil,seedling,seven,shaved_ice,sheep,shell,ship,shipit,shirt,shit,shoe,shower,signal_strength,six,six_pointed_star,ski,skull,sleeping,sleepy,slot_machine,small_blue_diamond,small_orange_diamond,small_red_triangle,small_red_triangle_down,smile,smile_cat,smiley,smiley_cat,smiling_imp,smirk,smirk_cat,smoking,snail,snake,snowboarder,snowflake,snowman,sob,soccer,soon,sos,sound,space_invader,spades,spaghetti,sparkle,sparkler,sparkles,sparkling_heart,speak_no_evil,speaker,speech_balloon,speedboat,squirrel,star,star2,stars,station,statue_of_liberty,steam_locomotive,stew,straight_ruler,strawberry,stuck_out_tongue,stuck_out_tongue_closed_eyes,stuck_out_tongue_winking_eye,sun_with_face,sunflower,sunglasses,sunny,sunrise,sunrise_over_mountains,surfer,sushi,suspect,suspension_railway,sweat,sweat_drops,sweat_smile,sweet_potato,swimmer,symbols,syringe,tada,tanabata_tree,tangerine,taurus,taxi,tea,telephone,telephone_receiver,telescope,tennis,tent,thought_balloon,three,thumbsdown,thumbsup,ticket,tiger,tiger2,tired_face,tm,toilet,tokyo_tower,tomato,tongue,top,tophat,tractor,traffic_light,train,train2,tram,triangular_flag_on_post,triangular_ruler,trident,triumph,trolleybus,trollface,trophy,tropical_drink,tropical_fish,truck,trumpet,tshirt,tulip,turtle,tv,twisted_rightwards_arrows,two,two_hearts,two_men_holding_hands,two_women_holding_hands,u5272,u5408,u55b6,u6307,u6708,u6709,u6e80,u7121,u7533,u7981,u7a7a,uk,umbrella,unamused,underage,unlock,up,us,v,vertical_traffic_light,vhs,vibration_mode,video_camera,video_game,violin,virgo,volcano,vs,walking,waning_crescent_moon,waning_gibbous_moon,warning,watch,water_buffalo,watermelon,wave,wavy_dash,waxing_crescent_moon,waxing_gibbous_moon,wc,weary,wedding,whale,whale2,wheelchair,white_check_mark,white_circle,white_flower,white_large_square,white_medium_small_square,white_medium_square,white_small_square,white_square,white_square_button,wind_chime,wine_glass,wink,wink2,wolf,woman,womans_clothes,womans_hat,womens,worried,wrench,x,yellow_heart,yen,yum,zap,zero,zzz",f=h.split(/,/),p=f.reduce(function(e,t){return e[t]=!0,e},{}),m={emojify_tag_type:null,only_crawl_id:null,img_dir:"images/emoji",ignore_emoticons:!1,ignored_tags:{SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1}};return a.prototype={validate:function(e,t,i){function r(){return a.lastEmojiTerminatedAt=c+t,s}var a=this,s=o(e);if(s){var l=e[0],c=l.length;if(0===t)return r();if(i.length===l.length+t)return r();var u=this.lastEmojiTerminatedAt===t;if(u)return r();if(n(i.charAt(t-1)))return r();var d=n(i.charAt(l.length+t));return d&&u?r():void 0}}},{defaultConfig:m,emojiNames:f,setConfig:function(e){Object.keys(m).forEach(function(t){t in e&&(m[t]=e[t])})},replace:s,run:l}}();return e})},,,function(e,t,n){"use strict";var i=n(2),o=n(114),r=n(71),a=n(116),s=r.RoomModel.extend({sync:a.sync}),l=r.RoomCollection.extend({model:s,urlTemplate:"/v1/user/:userId/rooms",contextModel:i.contextModel(),client:function(){return o.getClient()},sync:a.sync});e.exports={TroupeCollection:l,TroupeModel:s}},,,function(e,t,n){"use strict";var i=n(69),o=n(11);e.exports=function(e,t,n){o.trigger("stats.event","live.collection.error"),o.trigger("stats.event","live.collection.error."+e),i.error(e+" live collection error",n)}},function(e,t,n){var i,o;i=[n(4),n(3)],o=function(e,t){return function(e,t){var n=function(){return!0};t.FilteredCollection=t.Collection.extend({collectionFilter:null,defaultFilter:n,initialize:function(e,t){if(e)throw"models cannot be set directly, unfortunately first argument is the models.";this.collection=t.collection,this.setFilter(t.collectionFilter),this._bindEvents()},resetWith:function(e){return this.stopListening(this.collection),this.collection=e,this.resetCollection(),this._bindEvents(),this},_bindEvents:function(){this.listenTo(this.collection,"sync",this.syncCollection),this.listenTo(this.collection,"add",this.addModel),this.listenTo(this.collection,"remove",this.removeModel),this.listenTo(this.collection,"reset",this.resetCollection),this.listenTo(this.collection,"sort",this.resortCollection),this.listenTo(this.collection,"change",this._modelChanged),this.listenTo(this.collection,"filter-complete",this._filterComplete)},_reset:function(e){t.Collection.prototype._reset.call(this,e),this._mapping=[]},add:function(){throw"Do not invoke directly"},remove:function(){throw"Do not invoke directly"},reset:function(){throw"Do not invoke directly"},_modelChanged:function(e,t,n){n||(n={});var i=this.indexOf(e);if(this.collectionFilter(e))if(0>i){var o=this.collection.indexOf(e);this._forceAddModel(e,{index:o})}else this.trigger("change",e,this);else i>-1&&this._forceRemoveModel(e,{index:i});n.silent||this._filterComplete()},resortCollection:function(){var t=[],n=[],i=this.models;e.each(this.collection.models,function(e,o){i.indexOf(e)>=0&&(t.push(e),n.push(o))}),this.models=t,this._mapping=n,this.trigger("sort",this)},resetCollection:function(){this._mapping=[],this._reset(),this.setFilter(void 0,{silent:!0}),this.trigger("reset",this)},syncCollection:function(){this._mapping=[],this._reset(),this.setFilter(void 0,{silent:!0}),this.trigger("sync",this)},renumberMappings:function(){this._mapping=[];var t=this.collection,n=this._mapping;e(this.models).each(function(e){n.push(t.indexOf(e))})},removeModel:function(t,n,i){var o=this._mapping.indexOf(i.index);o>-1&&this._forceRemoveModel(t,e.extend({index:o},i)),this.renumberMappings()},_forceRemoveModel:function(e,n){this._mapping.splice(n.index,1),t.Collection.prototype.remove.call(this,e,{silent:n.silent}),n.silent||this.trigger("remove",e,this,{index:n.index})},addModel:function(t,n,i){this.collectionFilter(t)&&this._forceAddModel(t,e.extend(i||{},{index:i&&i.at||n.indexOf(t)})),this.renumberMappings()},_forceAddModel:function(n,i){var o=i.index,r=e.sortedIndex(this._mapping,o,function(e){return e});t.Collection.prototype.add.call(this,n,{at:r,silent:i.silent}),this._mapping.splice(r,0,o),i.silent||this.trigger("add",n,this,{index:r})},setFilter:function(t,n){n||(n={}),t===!1&&(t=this.defaultFilter),this.collectionFilter=t||this.collectionFilter||this.defaultFilter;var i=this.collectionFilter,o=this._mapping,r=e.extend({},n);this.collection.each(function(e,t){var n=o.indexOf(t);i(e,t)?-1==n&&(r.index=t,this._forceAddModel(e,r)):n>-1&&(r.index=-1==n?this.length:n,this._forceRemoveModel(e,r))},this),n.silent||this._filterComplete()},_onModelEvent:function(e,t,n,i){},_filterComplete:function(){this.trigger("filter-complete",this)}})}(e,t),t.FilteredCollection}.apply(t,i),!(void 0!==o&&(e.exports=o))},,,,,,function(e,t,n){"use strict";var i=n(31);e.exports=function(e,t){if(t=t||48,e&&e.uri){var n="/"===e.uri[0],o=e.uri.split("/")[n?1:0];if(o)return i({username:o},t)}return i({},t)}},,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(3),o=n(118),r=n(2),a=n(221),s=n(222),l=n(234);n(191);var c=o.LayoutView.extend({template:a,behaviors:{Widgets:{},Isomorphic:{chatInputBox:{el:"#chat-input-box-region",init:"initChatInputBoxRegion"},chatInputButtons:{el:"#chat-input-buttons-region",init:"initChatInputButtonsRegion"}}},regions:{chatInputBox:"#chat-input-box-region",chatInputButtons:"#chat-input-buttons-region"},initialize:function(){setTimeout(function(){window.localStorage.removeItem("compose_mode_enabled")},0),this.composeMode=new i.Model({isComposeModeEnabled:!1})},serializeData:function(){return{user:r.user()}},initChatInputBoxRegion:function(e){return new s(e({composeMode:this.composeMode,collection:this.collection},{rerender:!0}))},initChatInputButtonsRegion:function(e){return new l(e({model:this.composeMode}))}});e.exports=c},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="chat-input__area">\n  <div class="chat-input__avatar">\n    '+this.escapeExpression((t.widget||e&&e.widget||t.helperMissing).call(e,"avatar",{name:"widget",hash:{showTooltip:!1,size:"s",model:null!=e?e.user:e},data:i}))+'\n  </div>\n  <div id="chat-input-box-region" class="chat-input-box__region"></div>\n  <div id="chat-input-buttons-region" class="chat-input__buttons"></div>\n</div>\n'},useData:!0})},function(e,t,n){"use strict";function i(e){return/^\/me /.test(e)}function o(e){return e.replace(/^\/me /,"@"+m.getUser().username+" ")}var r=n(118),a=n(223),s=n(224),l=n(225),c=n(226),u=n(170),d=n(159),h=n(68),f=n(168),p=n(11),m=n(2),g=n(146);n(233);var v="Click here to type a chat message. Supports GitHub flavoured markdown.",b="Touch here to type a chat message.",w=v+" "+u.cmd+"+Enter to send.",y=r.ItemView.extend({template:a,tagName:"form",attributes:{"class":"chat-input__box",name:"chat"},ui:{textarea:"textarea"},events:{"input textarea":"onTextChange","paste textarea":"onPaste","keydown textarea":"onKeydown","blur textarea":"onBlur","touchend textarea":"onTouchend","textComplete:show textarea":"onTextCompleteShow","textComplete:hide textarea":"onTextCompleteHide"},keyboardEvents:{"chat.compose.auto":"createCodeBlockOnNewline","chat.edit.openLast":"onKeyEditLast","chat.send":"onKeySend"},initialize:function(e){this.composeMode=e.composeMode,this.listenTo(this.composeMode,"change:isComposeModeEnabled",this.onComposeModeChange),this.listenTo(p,"input.append",this.append),this.listenTo(p,"focus.request.chat",function(){this.ui.textarea.focus()}),this.listenTo(m.troupe(),"change:id",function(e){var t=this.drafty;t&&t.setUniqueId(e.id)})},serializeData:function(){return{isMobile:g()}},onRender:function(){if(this.ui.textarea.length&&(this.removeTextareaExtensions(),this.addTextareaExtensions(),!g())){var e=this;d(function(){e.setCaretPosition(),e.ui.textarea.focus()})}},onComposeModeChange:function(e,t){var n;n=g()?b:t?w:v,this.ui.textarea.attr("placeholder",n)},onTextChange:function(){this.ui.textarea.val()?this.expandTextareaIfNeeded():this.shrinkTextarea()},onPaste:function(e){if(e.originalEvent&&(e=e.originalEvent),e.clipboardData){var t=e.clipboardData.getData("text/x-markdown");if(t){var n=this.ui.textarea.val(),i=this.ui.textarea[0],o=i.selectionStart,r=i.selectionEnd;this.setText(n.substring(0,o)+t+n.substring(r)),this.setCaretPosition(o+t.length),e.preventDefault()}}},onKeydown:function(e){(33===e.keyCode||34===e.keyCode)&&(p.trigger(33===e.keyCode?"chatCollectionView:pageUp":"chatCollectionView:pageDown"),e.preventDefault())},onBlur:function(){this.isTypeaheadShowing()||(g()?this.processInput():this.resetTextareaSize())},onTouchend:function(){},onTextCompleteShow:function(){this.ui.textarea.attr("data-prevent-keys","on")},onTextCompleteHide:function(){var e=this;setTimeout(function(){e.ui.textarea.attr("data-prevent-keys","off")},0)},onKeyEditLast:function(){this.ui.textarea.val()||p.trigger("chatCollectionView:editLastChat",m.getUserId())},onKeySend:function(e,t){var n=this.composeMode.get("isComposeModeEnabled"),i=t.mods.length||!n;return!this.isTypeaheadShowing()&&i?(this.processInput(),e.preventDefault(),!1):void 0},processInput:function(){if(this.hasVisibleText()){var e=this.ui.textarea.val(),t=l.findMatch(e);t&&t.action?t.action(e):this.send(e),this.clear()}},send:function(e){var t={text:e,fromUser:m.getUser(),sent:null};i(e)&&(t.text=o(e),t.status=!0),this.collection.create(t),p.trigger("chat.send")},clear:function(){this.setText(""),this.drafty&&this.drafty.reset()},append:function(e,t){var n=this.ui.textarea.val();this.hasVisibleText()?n=t&&t.newLine?n+"\n"+e:n+" "+e:n+=e,this.setText(n),this.setCaretPosition(),this.ui.textarea.focus(),this.ui.textarea[0].scrollTop=this.ui.textarea[0].clientHeight},createCodeBlockOnNewline:function(e){var t=this.ui.textarea.val(),n=t.match(/^```([\w\-]+)?$/);n&&(this.setText(t+"\n\n```"),this.setCaretPosition(n[0].length+1),this.composeMode.get("isComposeModeEnabled")||g()||(this.composeMode.set("isComposeModeEnabled",!0),this.listenToOnce(p,"chat.send",function(){this.composeMode.set("isComposeModeEnabled",!1)})),e.preventDefault())},setText:function(e){this.ui.textarea.val(e),this.onTextChange()},setCaretPosition:function(e){e=e||this.ui.textarea.val().length;var t=this.ui.textarea[0];t.focus(),t.setSelectionRange(e,e)},resetTextareaSize:function(){this.shrinkTextarea(),this.expandTextareaIfNeeded()},shrinkTextarea:function(){this.ui.textarea.css("height",""),p.trigger("chatCollectionView:viewportResize",!1)},expandTextareaIfNeeded:function(){var e=this.ui.textarea,t=e[0],n=t.offsetHeight,i=t.scrollHeight,o=window.innerHeight/2,r=Math.min(i,o);r>n&&(e.css("height",r),p.trigger("chatCollectionView:viewportResize",!0))},addTextareaExtensions:function(){this.ui.textarea.textcomplete(c(this.collection)),this.drafty=s(this.ui.textarea[0],m.troupe().get("id"))},removeTextareaExtensions:function(){this.ui.textarea.off(),this.drafty&&this.drafty.disconnect(),this.drafty=null},isTypeaheadShowing:function(){return this.$el.find(".dropdown-menu").is(":visible")},hasVisibleText:function(){var e=this.ui.textarea.val();return e&&!e.match(/^\s+$/)},onDestroy:function(){this.removeTextareaExtensions()}});h.mixin(y,f),e.exports=y},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){return'  placeholder="Touch here to type a chat message."\n'},3:function(e,t,n,i){return'  placeholder="Click here to type a chat message. Supports GitHub flavoured markdown."\n  autofocus\n  autocomplete="off"\n  autocorrect="off"\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r;return'<textarea class="chat-input__text-area"\n  name="chat"\n  id="chat-input-textarea"\n'+(null!=(o=t["if"].call(e,null!=e?e.isMobile:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.program(3,i,0),data:i}))?o:"")+'  maxlength="4096">'+this.escapeExpression((r=null!=(r=t.value||(null!=e?e.value:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"value",hash:{},data:i}):r))+"</textarea>\n"},useData:!0})},function(e,t,n){"use strict";function i(e,t){this.el=e,t||(t=window.location.pathname.split("/").splice(1).join("_")),this.uniqueId=t;var n=r.get("drafty_"+this.uniqueId);n&&!e.value&&(e.value=n);var i=o.throttle(this.update.bind(this),1e3,{leading:!1});this.updatePeriodic=i,a.forEach(function(t){e.addEventListener(t,i,!1)}),this.update=this.update.bind(this)}var o=n(4),r=n(10),a=["change","keydown","click","cut","paste"];i.prototype.refresh=function(){var e=r.get("drafty_"+this.uniqueId);this.el.value=e},i.prototype.update=function(){var e=this.el.value;e&&e.length>4096&&(e=""),e?r.set("drafty_"+this.uniqueId,e):this.reset()},i.prototype.reset=function(){r.remove("drafty_"+this.uniqueId)},i.prototype.disconnect=function(){var e=this.updatePeriodic,t=this.el;a.forEach(function(n){t.removeEventListener(n,e,!1)})},i.prototype.setUniqueId=function(e){this.uniqueId=e,this.refresh()},e.exports=function(e,t){return new i(e,t)}},function(e,t,n){"use strict";var i=n(4),o=n(2),r=n(11),a=n(38);e.exports=function(){var e=[{command:"ban @username",description:"Ban somebody from the room.",criteria:function(){var e=!1;return"ORG"==o.troupe().get("githubType")&&(e=!0),!o.inOneToOneTroupeContext()&&o.isTroupeAdmin()&&!e},completion:"ban @",regexp:/^\/ban/,action:function(e){var t=e.match(/\/ban @([\w\-]+)(\s+(removemsgs))?/);if(t){var n=t[1],i=!!t[3];a.room.post("/bans",{username:n,removeMessages:i}).fail(function(e){var t;switch(e.status){case 403:t="You do not have permission to ban people.";break;case 400:t=e.responseJSON.error;break;case 404:t="That person does not exist (on Gitter that is)";break;default:t="Ban failed"}r.triggerParent("user_notification",{title:"Could not ban user",text:t,className:"notification-error"})})}}},{command:"channel",description:"Create/join a channel",completion:"channel ",regexp:/^\/channel/,action:function(e){var t=e.match(/^\s*\/channel(?:\s+(\w+))?/),n=t[1];n?r.trigger("route","createcustomroom/"+n):r.trigger("route","createcustomroom")}},{command:"fav",description:"Toggle the room as a favourite",completion:"fav ",regexp:/^\/fav\s*$/,action:function(){var e=!o.troupe().get("favourite");a.userRoom.put("",{favourite:e})}},{command:"leave",description:"Leave the room",completion:"leave ",regexp:/^\/(leave|part)\s*$/,criteria:function(){return!o.inOneToOneTroupeContext()},action:function(){o.troupe().set("aboutToLeave",!0),a.room["delete"]("/users/"+o.getUserId(),{}).then(function(){r.trigger("navigation","/home","home",""),o.troupe().set("roomMember",!1)})}},{command:"lurk",description:"Lurk in the room",completion:"lurk ",regexp:/^\/lurk\s*$/,criteria:function(){return!o.inOneToOneTroupeContext()},action:function(){function e(){2==++t&&r.triggerParent("user_notification",{title:"Lurking",text:"Lurk mode has been enabled for this room"})}var t=0;a.userRoom.put("/settings/notifications",{push:"mention"}).then(e),a.userRoom.put("",{lurk:!0}).then(e)}},{command:"me",description:"Let people know what's happening",completion:"me ",regexp:/^\/me/},{command:"query @username",description:"Have a private conversation with @username",completion:"query @",regexp:/^\/query/,action:function(e){var t=e.match(/\/query @([\w\-]+)/);if(t){var n=t[1],i="/"+n,a=n===o.user().get("username")?"home":"chat",s=n;r.trigger("navigation",i,a,s)}}},{command:"remove @username",description:"Remove somebody from the room",criteria:function(){return!o.inOneToOneTroupeContext()&&o.isTroupeAdmin()},completion:"remove @",regexp:/^\/remove/,action:function(e){var t=e.match(/\/remove @([\w\-]+)/);if(t){var n=t[1];r.trigger("command.room.remove",n)}}},{command:"subst",regexp:/^s\/([^\/]+)\/([^\/]*)\/i?(g?)\s*$/,action:function(e){var t=this.regexp.exec(e),n=t[1],i=t[2],a=!!t[3];r.trigger("chatCollectionView:substLastChat",o.getUserId(),n,i,a)}},{command:"collapse",description:"Collapse chat messages with embedded media",completion:"collapse ",regexp:/^\/collapse\s*$/,action:function(){r.trigger("command.collapse.chat")}},{command:"expand",description:"Expand chat messages with embedded media",completion:"expand ",regexp:/^\/expand\s*$/,action:function(){r.trigger("command.expand.chat")}},{command:"topic foo",description:"Set room topic to foo",criteria:function(){return!o.inOneToOneTroupeContext()&&o.isTroupeAdmin();
},completion:"topic ",regexp:/^\/topic/,action:function(e){var t=e.match(/^\/topic (.+)/);if(t){var n=t[1];o.troupe().set("topic",n),a.room.put("",{topic:n})}}},{command:"unban @username",description:"Unban somebody from the room",criteria:function(){var e=!1;return"ORG"==o.troupe().get("githubType")&&(e=!0),!o.inOneToOneTroupeContext()&&o.isTroupeAdmin()&&!e},completion:"unban @",regexp:/^\/unban/,action:function(e){var t=e.match(/\/unban @([\w\-]+)/);if(t){var n=t[1];a.room["delete"]("/bans/"+n,{}).fail(function(e){var t;switch(e.status){case 403:t="You do not have permission to unban people.";break;case 400:t=e.responseJSON.error;break;case 404:t="That person is not on the banned list.";break;default:t="Unban failed"}r.triggerParent("user_notification",{title:"Could not unban user",text:t,className:"notification-error"})})}}}];return{size:e.length,getSuggestions:function(t){return e.filter(function(e){var n=(!e.criteria||e.criteria())&&e.completion;return n&&0===e.command.indexOf(t)})},findMatch:function(t){return i.find(e,function(e){return t.match(e.regexp)})}}}()},function(e,t,n){"use strict";var i=n(227),o=n(229),r=n(230),a=n(232);e.exports=function(e){return[i(),o(e),r(),a()]}},function(e,t,n){"use strict";var i=n(146),o=n(38),r=n(228);e.exports=function(){return{match:/(^|\s)(([\w-_]+\/[\w-_]+)?#(\d*))$/,maxCount:i()?3:10,search:function(e,t){var n=e.split("#"),i=n[0],r=n[1],a={};i&&(a.repoName=i),r&&(a.issueNumber=r),o.room.get("/issues",a).then(function(e){t(e)}).fail(function(){t([])})},template:function(e){return r({name:e.number,description:e.title})},replace:function(e){return"$1$3#"+e.number+" "}}}},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing,a="function",s=this.escapeExpression;return s((o=null!=(o=t.name||(null!=e?e.name:e))?o:r,typeof o===a?o.call(e,{name:"name",hash:{},data:i}):o))+" <small>"+s((o=null!=(o=t.description||(null!=e?e.description:e))?o:r,typeof o===a?o.call(e,{name:"description",hash:{},data:i}):o))+"</small>\n"},useData:!0})},function(e,t,n){"use strict";function i(e){var t=e.map(function(e){return e.get("fromUser")}).filter(function(e){return!!e}).reverse();return t=a(t)}function o(e){var t=e.toLowerCase();return function(e){return e&&(0===e.username.toLowerCase().indexOf(t)||e.displayName&&0===e.displayName.toLowerCase().indexOf(t))}}function r(e){var t=(f.user()&&f.user().get("username")||"").toLowerCase();return e.username.toLowerCase()!==t}function a(e){return g.unique(e,function(e){return e.id})}function s(e,t){u&&u([]),c=e,u=t,d||(d=setTimeout(function(){d=null;var e=c,t=u;c=null,u=null,l(e,t)},500))}function l(e,t){p.room.get("/users",{q:e,limit:h()?3:10}).then(function(e){t(e)}).fail(function(){t([])})}var c,u,d,h=n(146),f=n(2),p=n(38),m=n(228),g=n(4),f=n(2),v="",b=[];f.troupe().on("change:id",function(){v="",b=[]}),e.exports=function(e){var t=h()?3:10;return{match:/(^|\s)@(\/?[a-zA-Z0-9_\-]*)$/,maxCount:t,search:function(n,l){var c=n.toLowerCase(),u=[];return 0===c.indexOf(v)&&(u=b),u=u.concat(i(e)),u=a(u).filter(r).filter(o(n)),v=c,b=u,u.length&&l(u,!0),0==="/all".indexOf(c)&&f.isTroupeAdmin()?(u=u.slice(0,t-1),u.push({username:"/all",displayName:"Group"}),l(u)):0===n.length?l(u):s(n,function(e){e=e.filter(r),u=a(u.concat(e)),c===v&&(b=u),l(u)})},template:function(e){return m({name:e.username,description:e.displayName})},replace:function(e){return"$1@"+e.username+" "}}}},function(e,t,n){"use strict";var i=n(146),o=n(193),r=n(127),a=n(231),s=["smile","worried","+1","-1","fire","sparkles","clap","shipit"];e.exports=function(){return{match:/(^|\s):([\-+\w]*)$/,maxCount:i()?3:10,search:function(e,t){if(e.length<1)return t(s);var n=o.named.filter(function(t){return 0===t.indexOf(e)});t(n)},template:function(e){return a({emoji:e,emojiUrl:r("images/emoji/"+e+".png")})},replace:function(e){return"$1:"+e+": "}}}},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing,a="function",s=this.escapeExpression;return'<img class="emoji" src="'+s((o=null!=(o=t.emojiUrl||(null!=e?e.emojiUrl:e))?o:r,typeof o===a?o.call(e,{name:"emojiUrl",hash:{},data:i}):o))+'" align="absmiddle"> '+s((o=null!=(o=t.emoji||(null!=e?e.emoji:e))?o:r,typeof o===a?o.call(e,{name:"emoji",hash:{},data:i}):o))+"\n"},useData:!0})},function(e,t,n){"use strict";var i=n(225),o=n(228);e.exports=function(){return{match:/(^)\/(\w*)$/,maxCount:i.size,search:function(e,t){var n=i.getSuggestions(e);t(n)},template:function(e){return o({name:e.command,description:e.description})},replace:function(e){return"$1/"+e.completion}}}},function(e,t,n){var i,o;i=[n(6)],o=function(e){return function(e){"use strict";var t=function(e,t){return e.bind?e.bind(t):function(){e.apply(t,arguments)}},n=function(){var t;return t=e("<div></div>").css(["color"]).color,"undefined"!=typeof t?function(e,t){return e.css(t)}:function(t,n){var i;return i={},e.each(n,function(e,n){i[n]=t.css(n)}),i}}(),i=function(e){return e},o=function(e){var t={};return function(n,i){t[n]?i(t[n]):e.call(this,n,function(e){t[n]=(t[n]||[]).concat(e),i.apply(null,arguments)})}},r=function(e,t){var n,i;if(e.indexOf)return-1!=e.indexOf(t);for(n=0,i=e.length;i>n;n++)if(e[n]===t)return!0;return!1},a=function(){function i(n,i){var o,r,a;r=l.clone(),this.el=n.get(0),this.$el=n,o=c(this.$el),a=this.el===document.activeElement,this.$el.wrap(o).before(r),a&&this.el.focus(),this.listView=new s(r,this),this.strategies=i,this.$el.on("keyup",t(this.onKeyup,this)),this.$el.on("keydown",t(this.listView.onKeydown,this.listView)),e(document).on("click",t(function(e){e.originalEvent&&!e.originalEvent.keepTextCompleteDropdown&&this.listView.deactivate()},this))}var o,r,a,l;o={wrapper:'<div class="textcomplete-wrapper"></div>',list:'<ul class="dropdown-menu"></ul>'},r={wrapper:{position:"relative"},list:{position:"absolute",top:"initial",left:0,zIndex:"100",display:"none"}},a=e(o.wrapper).css(r.wrapper),l=e(o.list).css(r.list),e.extend(i.prototype,{renderList:function(e){this.clearAtNext&&(this.listView.clear(),this.clearAtNext=!1),e.length&&(this.listView.shown||(this.listView.setPosition(this.getCaretPosition()).clear().activate(),this.listView.strategy=this.strategy),e=e.slice(0,this.strategy.maxCount),this.listView.render(e)),!this.listView.data.length&&this.listView.shown&&this.listView.deactivate()},searchCallbackFactory:function(e){var t=this;return function(n,i){e==t.term&&(t.renderList(n),i||(t.clearAtNext=!0))}},onKeyup:function(e){var t,n;if(t=this.extractSearchQuery(this.getTextFromHeadToCaret()),t.length){if(n=t[1],this.term===n)return;this.term=n,this.search(t)}else this.term=null,this.listView.deactivate()},onSelect:function(t){var n,i,o;n=this.getTextFromHeadToCaret(),i=this.el.value.substring(this.el.selectionEnd),o=this.strategy.replace(t),e.isArray(o)&&(i=o[1]+i,o=o[0]),n=n.replace(this.strategy.match,o),this.$el.val(n+i),this.el.focus(),this.el.selectionStart=this.el.selectionEnd=n.length},getCaretPosition:function(){if(0!==this.el.selectionEnd){var t,i,o,r,a;return t=["border-width","font-family","font-size","font-style","font-variant","font-weight","height","letter-spacing","word-spacing","line-height","text-decoration","text-align","width","padding-top","padding-right","padding-bottom","padding-left","margin-top","margin-right","margin-bottom","margin-left"],i=e.extend({position:"absolute",overflow:"auto","white-space":"pre-wrap",top:0,left:-9999},n(this.$el,t)),o=e("<div></div>").css(i).text(this.getTextFromHeadToCaret()),r=e("<span></span>").text("&nbsp;").appendTo(o),this.$el.before(o),a=r.position(),a.bottom=o.height()-a.top,o.remove(),a}},getTextFromHeadToCaret:function(){var e,t,n;return t=this.el.selectionEnd,"number"==typeof t?e=this.el.value.substring(0,t):document.selection&&(n=this.el.createTextRange(),n.moveStart("character",0),n.moveEnd("textedit"),e=n.text),e},extractSearchQuery:function(e){var t,n,i,o;for(t=0,n=this.strategies.length;n>t;t++)if(i=this.strategies[t],o=e.match(i.match))return[i,o[i.index]];return[]},search:function(e){var t;this.strategy=e[0],t=e[1],this.strategy.search(t,this.searchCallbackFactory(t))}});var c=function(e){return a.clone().css("display",e.css("display"))};return i}(),s=function(){function n(e,n){this.data=[],this.$el=e,this.index=0,this.completer=n,this.$el.on("click","li.textcomplete-item",t(this.onClick,this))}return e.extend(n.prototype,{shown:!1,render:function(e){var t,n,i,o,a;for(t="",n=0,i=e.length;i>n&&(a=e[n],r(this.data,a)||(o=this.data.length,this.data.push(a),t+='<li class="textcomplete-item" data-index="'+o+'"><a>',t+=this.strategy.template(a),t+="</a></li>",this.data.length!==this.strategy.maxCount));n++);this.$el.append(t),this.data.length?this.activateIndexedItem():this.deactivate()},clear:function(){return this.data=[],this.$el.html(""),this.index=0,this},activateIndexedItem:function(){this.$el.find(".active").removeClass("active"),this.getActiveItem().addClass("active")},getActiveItem:function(){return e(this.$el.children().get(this.index))},activate:function(){return this.shown||(this.$el.show(),this.completer.$el.trigger("textComplete:show"),this.shown=!0),this},deactivate:function(){return this.shown&&(this.$el.hide(),this.completer.$el.trigger("textComplete:hide"),this.shown=!1,this.data=this.index=null),this},setPosition:function(e){return this.$el.css({left:e.left,top:"initial",bottom:e.bottom}),this},select:function(e){this.completer.onSelect(this.data[e]),this.deactivate()},onKeydown:function(e){this.shown&&(27===e.keyCode?this.deactivate():38===e.keyCode?(e.preventDefault(),0===this.index?this.index=this.data.length-1:this.index-=1,this.activateIndexedItem()):40===e.keyCode?(e.preventDefault(),this.index===this.data.length-1?this.index=0:this.index+=1,this.activateIndexedItem()):(13===e.keyCode||9===e.keyCode)&&(e.preventDefault(),this.select(parseInt(this.getActiveItem().data("index")))))},onClick:function(t){var n=e(t.target);t.originalEvent.keepTextCompleteDropdown=!0,n.hasClass("textcomplete-item")||(n=n.parents("li.textcomplete-item")),this.select(parseInt(n.data("index")))}}),n}();e.fn.textcomplete=function(e){var t,n,r;for(t=0,n=e.length;n>t;t++)r=e[t],r.template||(r.template=i),null==r.index&&(r.index=2),r.cache&&(r.search=o(r.search)),r.maxCount||(r.maxCount=10);return new a(this,e),this}}(e||window.Zepto),e}.apply(t,i),!(void 0!==o&&(e.exports=o))},function(e,t,n){"use strict";var i=n(118),o=n(235),r=n(170),a=n(68),s=n(168),l=n(146);n(157);var c=i.ItemView.extend({template:o,behaviors:{Tooltip:{".js-toggle-compose-mode":{titleFn:"getComposeModeTitle",placement:"left"},".js-markdown-help":{titleFn:"getShowMarkdownTitle",placement:"left"}}},ui:{composeToggle:".js-toggle-compose-mode"},onRender:function(){this.options.template=o},events:{"click .js-toggle-compose-mode":"toggleComposeMode"},modelEvents:{"change:isComposeModeEnabled":"render"},keyboardEvents:{"chat.toggle":"toggleComposeMode"},getComposeModeTitle:function(){var e=this.model.get("isComposeModeEnabled")?"chat":"compose";return"Switch to "+e+" mode ("+r.cmd+" + /)"},getShowMarkdownTitle:function(){return"Markdown help ("+r.cmd+" + "+r.gitter+" + m)"},toggleComposeMode:function(){l()||this.model.set("isComposeModeEnabled",!this.model.get("isComposeModeEnabled"))}});a.mixin(c,s),e.exports=c},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){return'  <i class="icon-keyboard-1"></i>\n'},3:function(e,t,n,i){return'  <i class="icon-chat-alt"></i>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o;return'<a class="js-toggle-compose-mode">\n'+(null!=(o=t["if"].call(e,null!=e?e.isComposeModeEnabled:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.program(3,i,0),data:i}))?o:"")+'</a>\n<a href="#markdown" class="js-markdown-help chat-input__button-markdown">\n  <i class="octicon octicon-markdown"></i>\n</a>\n'},useData:!0})},function(e,t,n){"use strict";var i=n(118),o=n(237),r=n(2),a=n(38),s=i.ItemView.extend({template:o,attributes:{"class":"chat-input__box",name:"chat"},ui:{joinRoom:".js-join-room"},events:{"click @ui.joinRoom":"joinRoom"},joinRoom:function(e){return e&&e.preventDefault(),a.user.post("/rooms",{id:r.getTroupeId()}).then(function(e){r.setTroupe(e)})}});e.exports=s},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<a href="#" class="chat-input__btn js-join-room">\n  Join room\n</a>\n'},useData:!0})},,,function(e,t,n){"use strict";function i(e){if(e){var t=e.split(":");return{offset:t[0],abbr:t[1],iana:t[2]}}}function o(e){var t=e.offset;return e.abbr&&(t+=":"+e.abbr),e.iana&&(t+=":"+e.iana),t}var r=n(241),a=n(242),s=r(),l=i(a.get("gitter_tz"));s.iana||l&&l.offset===s.offset&&l.abbr===s.abbr&&(s.iana=l.iana),l&&l.offset===s.offset&&l.abbr===s.abbr&&l.iana===s.iana||a.set("gitter_tz",o(s))},function(e,t){"use strict";function n(){try{return(new window.Intl.DateTimeFormat).resolvedOptions().timeZone}catch(e){return}}e.exports=function(){var e=new Date,t=e.toTimeString().match(/\(([^\)]+)\)/),i=t&&t[1]||"",o=e.getTimezoneOffset(),r=o>=0?"+":"-";o=Math.abs(o);var a=Math.floor(o/60),s=Math.round(o%60);return{offset:r+(a>9?a:"0"+a)+(s>9?s:"0"+s),iso:r+(a>9?a:"0"+a)+":"+(s>9?s:"0"+s),abbr:i,iana:n()}}},function(e,t){"use strict";var n=(document.domain||document.location.hostname,"https:"===document.location.protocol);e.exports={get:function(e){return e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},set:function(e,t){e&&!/^(?:expires|max\-age|path|domain|secure)$/i.test(e)&&(document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; "+(n?"; secure":""))}}},function(e,t,n){"use strict";var i=n(118),o=n(40),r=n(2),a=n(154),s=n(162),l=n(244);n(157);e.exports=function(){var e=r.lang(),t=i.ItemView.extend({tagName:"span",template:!1,behaviors:{Tooltip:{"":{titleFn:"getTooltip",positionFn:"getTooltipPosition",html:!0}}},initialize:function(t){this.time=o(t.time).locale(e),this.compact=t.compact,this.position=t.position||"top",this.tooltipFormat=t.tooltipFormat||"LLL",this.calculateNextTimeout()},onDestroy:function(){clearTimeout(this.timer)},getTooltip:function(){return this.time.locale(e).format(this.tooltipFormat)},getTooltipPosition:function(){return this.position},calculateNextTimeout:function(){var e,t=Math.floor((Date.now()-this.time.valueOf())/1e3);return t>=86400?void delete this.timer:(e=t>=3600?3600-t%3600:60-t%60,1>e&&(e=1),void(this.timer=window.setTimeout(this.rerenderOnTimeout.bind(this),1e3*e)))},rerenderOnTimeout:function(){this.calculateNextTimeout(),this.render()},render:function(){this.el.textContent=l(this.time,{compact:this.compact});var e=this.time.format("LLL");this.el.setAttribute("title",e),this.triggerMethod("render",this)},attachElContent:s.attachElContent});return t.getPrerendered=function(e,t){return"<span class='widget' data-widget-id='"+t+"'></span>"},a.register({timeago:t}),t}()},function(e,t,n){"use strict";function i(e,t){return t||(t=Date.now()),t-e>r}var o=n(40),r=864e5;e.exports=function(e,t){var n,r,a,s;return t&&(n=t.lang,r=t.tzOffset,a=t.compact,s=t.now),e?(e=o(e),n&&e.locale(n),void 0!==r&&e.utcOffset(-r),i(e.valueOf(),s)?a?e.format("MMM DD"):e.format("MMM DD HH:mm"):e.format("HH:mm")):""}},function(e,t,n){"use strict";var i=n(38),o=n(16)("app:ping"),r=6e5;window.setInterval(function(){i.web.get("/api_web/private/ping",void 0,{global:!1}).fail(function(e){o("An error occurred pinging the server: %j",e)})},r)},,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(3),o=n(118);e.exports=function(){window.__agent&&window.__agent.start(i,o)}()},,,,,,function(e,t,n){"use strict";var i=n(4),o=n(11),r=n(38),a=n(69),s=n(2),l=n(16)("app:stats");e.exports=function(){function e(){var e=n;n={};var i=t;if(t=[],i=i.concat(Object.keys(e).map(function(t){var n={stat:t};return e[t]>0&&(n.count=e[t]),n})),i.length){var o={stats:i,features:s.getFeatures()};r.priv.post("/statsc",o,{dataType:"text"}).fail(function(){a.info("An error occurred while communicating stats")})}}var t=[],n={},c=i.throttle(e,1e3,{leading:!1});o.on("stats.event",function(e){l("event: %s",e),n[e]?n[e]++:n[e]=1,c()}),o.on("stats.gauge",function(e,n){l("gauge: %s: %s",e,n),t.push({stat:e,value:n}),c()}),o.on("stats.time",function(e,n){l("time: %s: %sms",e,n),t.push({stat:e,time:n}),c()})}()},function(e,t,n){n(145),n(243),e.exports=void 0},,,,,,function(e,t,n){"use strict";var i=n(2),o=n(11),r=n(273),a=n(69);e.exports=function(){function e(e){return e.replace(/\/_s\/\w+\//,"/_s/l/")}function t(e,t,n,i,o){a.error(e||o&&o.message||"Unhandler error",{message:e,filename:t,lineno:n,colno:i,error:o})}var n=i.env("ravenUrl");if(n){r.config(n,{release:i.env("version"),dataCallback:function(t){try{t.stacktrace.frames.forEach(function(t){t.filename&&(t.filename=e(t.filename))}),t.culprit&&(t.culprit=e(t.culprit)),o.trigger("stats.event","error")}catch(n){}return t}}).install();var s=i.user();r.setUser({username:s&&s.get("username")}),o.on("bugreport",function(e,t){e instanceof Error?(o.trigger("stats.event","error"),r.captureException(e,t)):(o.trigger("stats.event","warning"),r.captureMessage(e,t))})}else window.onerror=function(e,n,i,r,a){try{t(e,n,i,r,a),o.trigger("stats.event","error")}catch(s){throw window.onerror=null,s}},o.on("bugreport",function(e){e instanceof Error?o.trigger("stats.event","error"):o.trigger("stats.event","warning")})}()},,function(e,t,n){"use strict";var i=n(6),o=n(4),r=n(11);e.exports=function(){var e,t=!1,n=i("#content-frame").hasClass("trpChatContainer")&&"chat"||"app";r.on("chat.edit.show",function(){t=!0}),r.on("chat.edit.hide",function(){t=!1});var a=function(){var e=["chat","search"];return t&&e.push("chat.edit"),e},s=function(e,t){var n=a(),i=e.replace("input.",""),o=n.indexOf(i),r=o+t;return-1!==o&&n[r]?n[r]:-1===t?n[n.length-1]:n[0]},l=function(e,t){r.trigger("focus.request."+s(t.scope,1))},c=function(e,t){r.trigger("focus.request."+s(t.scope,-1))},u=function(t){if(t.origin){if(t.origin!==n)return r.trigger("focus.request."+t.origin+".out",t);if(e)return}/^(INPUT|TEXTAREA)$/.test(document.activeElement.tagName)&&(e=i(document.activeElement),e.blur(),r.trigger("focus.change.out",e))},d=function(t){return t.origin&&t.origin!==n?r.trigger("focus.request."+t.origin+".in",t):void(e&&(e.focus(),r.trigger("focus.change.in",e),e=null))},h={"keyboard.focus.search":"search","keyboard.focus.chat":"chat","keyboard.maininput.tab.next":l,"keyboard.maininput.tab.prev":c,"focus.request.out keyboard.maininput.escape keyboard.input.escape":u,"focus.request.in keyboard.document.escape":d},f=function(e,t){r.on(e,function(e){e.origin||e.preventDefault();var n=Array.prototype.slice.call(arguments);o.isFunction(t)?t.apply(t,n):(n.unshift("focus.request."+t),r.trigger.apply(r,n))})},p=/\s+/;o.each(h,function(e,t){if(p.test(t)){var n=t.split(p);o.each(n,function(t){f(t,e)})}else f(t,e)})}()},,,,,,,,function(e,t,n){"use strict";var i=n(6),o=n(4),r=n(118),a=n(68),s=n(150),l=n(283),c=n(284),u=n(138);e.exports=function(){function e(e){for(var t=0;e&&e!=document;){var n=window.getComputedStyle(e,null);if(n){var i=n.getPropertyValue("z-index");i&&"auto"!==i&&(i=parseInt(i,10),i>t&&(t=i))}e=e.parentNode}return t}var t=160,n=".dropdown-backdrop",d=r.ItemView.extend({tagName:"li",template:c,initialize:function(e){e&&e.template&&(this.template=e.template)},className:function(){return this.model.get("divider")?"divider":""},onRender:function(){var e=this.model.get("dataset");if(e){var t=this.el.querySelector("a");t&&Object.keys(e).forEach(function(n){u.set(t,n,e[n])})}u.set(this.el,"cid",this.model.cid)}}),h=null,f={placement:"left"},p=r.CollectionView.extend({childView:d,tagName:"ul",className:"dropdown dropdown-hidden selectable",ui:{menu:"ul.dropdown"},events:{keydown:"keydown","click li a":"clicked"},childViewOptions:function(){var e={};return this.options.itemTemplate&&(e.template=this.options.itemTemplate),e},initialize:function(e){e.targetElement&&this.setTargetElement(e.targetElement),this.options=o.extend({},f,e),this.listenTo(this,"selectClicked",function(){this.hide()})},setTargetElement:function(e){this.targetElement=e,this.$targetElement=i(e)},active:function(){return!this.$el.hasClass("dropdown-hidden")},onRender:function(){var t=e(this.targetElement)+5;100>t&&(t=100),this.el.style.zIndex=t},onDestroy:function(){this.mutant&&this.mutant.disconnect()},clicked:function(){this.collection||this.hide()},getPosition:function(){var e=this.targetElement,t=o.extend({},e.getBoundingClientRect(),this.$targetElement.offset());return t},hasItems:function(){return this.collection?this.collection.length>0:!0},onAddChild:function(){setTimeout(function(){!this.active()&&this.showWhenItems&&this.hasItems()&&this.show()}.bind(this),10)},onRemoveChild:function(){setTimeout(function(){this.hasItems()||(this.hide(),this.showWhenItems=!0)}.bind(this),10)},show:function(){if(!this.active()){if(!this.hasItems())return void(this.showWhenItems=!0);var e=this.render().$el,t=this.el;i(n).remove(),h&&h.hide(),h=this;var o=parseInt(this.el.style.zIndex,10);i('<div class="dropdown-backdrop"/>').css({zIndex:o-1}).insertAfter(i("body")).on("click",function(){if(i(n).remove(),h){var e=h;h=null,e.hide()}}),this.setActive(this.selectedModel),e.detach().css({top:0,left:0,display:"block"}),e.appendTo(i("body")),this.reposition(),e.removeClass("dropdown-hidden"),this.mutant||(this.mutant=new s(t,this.mutationReposition,{scope:this,timeout:20,transitions:!0,observers:{attributes:!0,characterData:!0}}))}},hide:function(){var e=this.$el;this.showWhenItems=!1,this.active()&&(e.addClass("dropdown-hidden"),i(n).remove(),window.setTimeout(function(){e.css({display:"none"})},t),h=null)},mutationReposition:function(){try{if(!this.active())return;this.reposition()}finally{this.mutant&&this.mutant.takeRecords()}},reposition:function(){var e,t=this.el,n=this.getPosition(),i=t.offsetWidth;e="left"===this.options.placement?n.left:n.left-i+n.width;var o={top:n.top+n.height,left:e};this.applyPlacement(o)},applyPlacement:function(e){var t,n,i,o=this.$el,r=o[0],a=0;"left"in e&&e.left<0&&(a=-2*e.left,e.left=0),o.css(e),t=r.offsetWidth,n=r.offsetHeight,i&&o.offset(e)},toggle:function(){var e=this.active();e?this.hide():this.show()},keydown:function(e){switch(e.keyCode){case 13:return void this.selected();case 27:this.hide();break;default:return}e.preventDefault(),e.stopPropagation()}});return a.mixin(p,l),p}()},function(e,t,n){"use strict";var i=n(138);e.exports=function(){function e(e){return e.$childViewContainer?e.$childViewContainer:e.$el}return{events:{keydown:"selectKeydown","mouseover li:not(.divider):visible":"selectMouseOver","click li":"selectClicked"},selectMouseOver:function(t){var n=e(this),i=n.find("li:not(.divider):visible");if(i.length){var o=i.filter(".active"),r=t.currentTarget;o[0]!==r&&(o.removeClass("active"),r.classList.add("active"))}},selectKeydown:function(e){switch(e.keyCode){case 13:return void this.simulateClick();case 38:this.selectPrev();break;case 40:this.selectNext();break;default:return}e.preventDefault(),e.stopPropagation()},selectPrev:function(){this._moveSelect(-1)},selectNext:function(){this._moveSelect(1)},simulateClick:function(){var t=e(this),n=t.find("li:not(.divider):visible.active").first();n.length?n.trigger("click"):(this._moveSelect(0),t.find("li:not(.divider):visible.active").first().trigger("click"))},selectActive:function(){this.simulateClick()},selectClicked:function(e){if(this.collection){var t=e.currentTarget,n=i.get(t,"cid"),o=this.collection.get(n);this.setSelected(o),this.trigger("selectClicked"),this.options.allowClickPropagation||(e.preventDefault(),e.stopPropagation())}},onAddChild:function(e){this.selectedModel&&e.model.id&&e.model.id==this.selectedModel.id&&e.$el.addClass("selected")},setSelected:function(e){if(this.selectedModel){this.selectedModel.trigger("unselected");var t=this.children.findByModel(this.selectedModel);t&&t.$el.removeClass("selected")}if(this.selectedModel=e,e){e.trigger("selected");var n=this.children.findByModel(e);n.$el.addClass("selected")}this.triggerMethod("selected",e)},getActive:function(){var t=e(this),n=t.find("li.active:not(.divider):visible"),o=n[0];if(o){var r=i.get(o,"cid"),a=this.collection.get(r);return a}},setActive:function(t){if(t){var n=this.children.findByModel(t);if(n&&!n.$el.hasClass("active")){var i=e(this);i.find("li.active:not(.divider):visible").removeClass("active"),n.$el.addClass("active")}}},_moveSelect:function(t){var n=e(this),i=n.find("li:not(.divider):visible");if(i.length){var o=i.filter(".active"),r=i.index(o);if(~r?(r+=t,0>r?r=0:r>=i.length&&(r=i.length-1)):r=0,r!=o){var a=i.eq(r);o.removeClass("active"),a.addClass("active"),a.addClass("focus")}}}}}()},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){var o,r,a=t.helperMissing,s="function",l=this.escapeExpression;return'<a role="menuitem" tabindex="-1" href="'+l((r=null!=(r=t.href||(null!=e?e.href:e))?r:a,typeof r===s?r.call(e,{name:"href",hash:{},data:i}):r))+'" '+(null!=(o=t["if"].call(e,null!=e?e.target:e,{name:"if",hash:{},fn:this.program(2,i,0),inverse:this.noop,data:i}))?o:"")+">"+l((r=null!=(r=t.title||(null!=e?e.title:e))?r:a,typeof r===s?r.call(e,{name:"title",hash:{},data:i}):r))+"</a>\n"},2:function(e,t,n,i){var o;return'target="'+this.escapeExpression((o=null!=(o=t.target||(null!=e?e.target:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"target",hash:{},data:i}):o))+'"'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o;return null!=(o=t.unless.call(e,null!=e?e.divider:e,{name:"unless",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:""},useData:!0})},,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return"ORG"===e.githubType||"ONETOONE"===e.githubType||"PRIVATE"===e.security}function o(e){return"REPO"===e.githubType?"https://github.com"+e.url:void 0}var r=n(4),a=n(2),s=n(38),l=n(118),c=n(3),u=n(297),d=n(133),h=n(282),f=n(11),p=n(298),m=n(299),g=n(207);n(157),e.exports=l.ItemView.extend({template:p,modelEvents:{change:"renderIfRequired"},ui:{cog:".js-chat-settings",dropdownMenu:"#cog-dropdown",topic:".js-chat-topic",name:".js-chat-name",favourite:".js-favourite-button",orgrooms:".js-org-page"},events:{"click @ui.cog":"showDropdown","click #leave-room":"leaveRoom","click @ui.favourite":"toggleFavourite","dblclick @ui.topic":"showInput","keydown textarea":"detectKeys","click @ui.orgrooms":"goToOrgRooms"},behaviors:{Tooltip:{".js-chat-name":{titleFn:"getChatNameTitle",placement:"right"},".js-org-page":{titleFn:"getOrgPageTitle",placement:"left"}}},initialize:function(){this.menuItemsCollection=new c.Collection([]),this.buildDropdown()},serializeData:function(){var e=this.model.toJSON(),t=m(e.name),n="/orgs/"+t+"/rooms/";return r.extend(e,{troupeName:e.name,troupeFavourite:!!e.favourite,troupeTopic:e.topic,avatarSrcSet:g({uri:e.url},48),user:!!a.isLoggedIn(),archives:this.options.archives,oneToOne:"ONETOONE"===e.githubType,githubLink:o(e),isPrivate:i(e),orgName:t,orgPageHref:n}),e},buildDropdown:function(){a.isLoggedIn()&&(this.dropdown=new h({allowClickPropagation:!0,collection:this.menuItemsCollection,placement:"right"}),this.listenTo(this.dropdown,"selected",function(e){var t=e.get("href");"#leave"===t?this.leaveRoom():"#notifications"===t&&this.requestBrowserNotificationsPermission()}))},getChatNameTitle:function(){var e=this.model;if("PUBLIC"===e.get("security"))return"Anyone can join";switch(e.get("githubType")){case"REPO":return"All repo collaborators can join";case"ORG":return"All org members can join";case"REPO_CHANNEL":var t=e.get("uri").split("/")[1],n="PRIVATE"===e.get("security")?"Only invited users":"Anyone in "+t;return n+" can join";case"ORG_CHANNEL":var i=e.get("uri").split("/")[0],o="PRIVATE"===e.get("security")?"Only invited users":"Anyone in "+i;return o+" can join";case"USER_CHANNEL":return"Only invited users can join";default:return e.get("oneToOne")?"This chat is just between you two":"Only invited users can join"}},getOrgPageTitle:function(){var e=this.model.get("uri"),t=e.split("/")[0];return"More "+t+" rooms"},onRender:function(){this.dropdown&&this.dropdown.hide(),this.ui.favourite.css({visibility:a.isLoggedIn()?"visible":"hidden"}),this.ui.favourite.toggleClass("favourite",!!this.model.get("favourite"));var e=this.ui.topic[0];e&&u(e)},showDropdown:function(){this.dropdown.setTargetElement(this.ui.cog[0]),this.menuItemsCollection.reset(this.createMenu()),this.dropdown.show()},createMenu:function(){var e=[{title:"Add people to this room",href:"#add"}],t=a(),n=a.isTroupeAdmin(),i=a.isRoomMember(),o=this.model.get("url");e.push({title:"Share this chat room",href:"#share"}),e.push({divider:!0}),i&&e.push({title:"Notifications",href:"#notifications"}),n&&(t.isNativeDesktopApp?e.push({title:"Integrations",href:a.env("basePath")+o+"#integrations",target:"_blank",dataset:{disableRouting:1}}):e.push({title:"Integrations",href:"#integrations"}),"USER_CHANNEL"!==a.troupe().get("githubType")&&e.push({title:"Edit tags",href:"#tags/"+a().troupe.id})),e.push({divider:!0}),e.push({title:"Archives",href:o+"/archives/all",target:"_blank"});var r=this.model.get("githubType");return("REPO"===r||"ORG"===r)&&e.push({title:"Open in GitHub",href:"https://www.github.com"+o,target:"_blank"}),e.push({divider:!0}),n&&e.push({title:"Delete this room",href:"#delete"}),i&&e.push({title:"Leave this room",href:"#leave"}),e},leaveRoom:function(){a.isLoggedIn()&&s.room["delete"]("/users/"+a.getUserId(),{}).then(function(){f.trigger("navigation","/home","home","")})},goToOrgRooms:function(e){e.preventDefault();var t=m(a.troupe().get("name"));f.trigger("navigation","/orgs/"+t+"/rooms","iframe",t+" rooms")},toggleFavourite:function(){if(a.isLoggedIn()){this.model.set("favourite",!this.model.get("favourite"));var e=!!this.model.get("favourite");this.ui.favourite.toggleClass("favourite",e),s.userRoom.put("",{favourite:e})}},saveTopic:function(){var e=this.$el.find("textarea").val();a.troupe().set("topic",e),s.room.put("",{topic:e}),this.editingTopic=!1},cancelEditTopic:function(){this.editingTopic=!1,this.render()},detectKeys:function(e){this.detectReturn(e),this.detectEscape(e)},detectReturn:function(e){13!==e.keyCode||e.ctrlKey||e.shiftKey||(e.stopPropagation(),e.preventDefault(),this.saveTopic())},detectEscape:function(e){27===e.keyCode&&this.cancelEditTopic()},showInput:function(){if(a.isTroupeAdmin()&&this.editingTopic!==!0){this.editingTopic=!0;var e=this.model.get("topic");this.oldTopic=e,this.ui.topic.html("<textarea class='topic-input'></textarea>");var t=this.ui.topic.find("textarea").val(e);setTimeout(function(){t.select()},10)}},requestBrowserNotificationsPermission:function(){d.hasNotBeenSetup()&&a().desktopNotifications&&d.enable()},renderIfRequired:function(){function e(e){var n=t.changed;if(n)for(var i=0;i<e.length;i++)if(n.hasOwnProperty(e[i]))return!0}var t=this.model;e(["name","id","githubType","favourite","topic","ownerIsOrg","roomMember"])&&(this.options.template=p,this.render())}})},function(e,t,n){var i,o;!function(r){function a(e){for(var t,n=document.createNodeIterator(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,function(e){return 1!==e.nodeType?NodeFilter.FILTER_ACCEPT:"A"===e.tagName?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP},!1);null!==(t=n.nextNode());){var i=/\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>'"]+|\(([^\s()<>'"]+|(\([^\s()<>'"]+\)))*\))+(?:\(([^\s()<>'"]+|(\([^\s()<>'"]+\)))*\)|[^\s`!()\[\]{};:.,<>?'"]))/i,o=i.exec(t.data);if(o){var r=o[0],a=document.createElement("a");a.setAttribute("target","_blank"),a.setAttribute("rel","nofollow"),a.textContent=r,r.match(/^https?:\/\//)?a.setAttribute("href",r):a.setAttribute("href","http://"+r);var s=t.splitText(o.index);
s.nodeValue=s.nodeValue.substr(r.length),t.parentNode.insertBefore(a,s),n.nextNode()}}}return r.autolink=a,n(8)&&(i=[],o=function(){return a}.apply(t,i),!(void 0!==o&&(e.exports=o))),a}(window)},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){return"chat-header__avatar--pro"},3:function(e,t,n,i){var o,r=t.helperMissing,a="function",s=this.escapeExpression;return'    <div class="js-org-page chat-header__org-page">\n      <a href="'+s((o=null!=(o=t.orgPageHref||(null!=e?e.orgPageHref:e))?o:r,typeof o===a?o.call(e,{name:"orgPageHref",hash:{},data:i}):o))+'" title="Navigate to '+s((o=null!=(o=t.orgName||(null!=e?e.orgName:e))?o:r,typeof o===a?o.call(e,{name:"orgName",hash:{},data:i}):o))+'\'s page"  class="org-page-link octicon octicon-globe js-org-page"></a>\n    </div>\n'},5:function(e,t,n,i){var o;return null!=(o=t["if"].call(e,null!=e?e.user:e,{name:"if",hash:{},fn:this.program(6,i,0),inverse:this.noop,data:i}))?o:""},6:function(e,t,n,i){var o;return'      <div class="chat-header__favourite">\n        <i class="js-favourite-button icon-star-1 '+(null!=(o=t["if"].call(e,null!=e?e.troupeFavourite:e,{name:"if",hash:{},fn:this.program(7,i,0),inverse:this.noop,data:i}))?o:"")+'"></i>\n      </div>\n'+(null!=(o=t.unless.call(e,null!=e?e.oneToOne:e,{name:"unless",hash:{},fn:this.program(9,i,0),inverse:this.noop,data:i}))?o:"")},7:function(e,t,n,i){return"favourite"},9:function(e,t,n,i){return'          <div class="chat-header__settings">\n            <i class="js-chat-settings octicon octicon-tools" data-toggle="dropdown"></i>\n          </div>\n'},11:function(e,t,n,i){var o,r=t.helperMissing,a="function",s=this.escapeExpression;return'      <a href="'+s((o=null!=(o=t.githubLink||(null!=e?e.githubLink:e))?o:r,typeof o===a?o.call(e,{name:"githubLink",hash:{},data:i}):o))+'" class="chat-header__title" target="_blank">'+s((o=null!=(o=t.troupeName||(null!=e?e.troupeName:e))?o:r,typeof o===a?o.call(e,{name:"troupeName",hash:{},data:i}):o))+"</a>\n"},13:function(e,t,n,i){var o;return"      "+this.escapeExpression((o=null!=(o=t.troupeName||(null!=e?e.troupeName:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"troupeName",hash:{},data:i}):o))+"\n"},15:function(e,t,n,i){return"      <i class='octicon octicon-lock chat-header__permission-icon'></i>\n"},17:function(e,t,n,i){var o;return'  <p class="js-chat-topic chat-header__topic">'+this.escapeExpression((o=null!=(o=t.troupeTopic||(null!=e?e.troupeTopic:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"troupeTopic",hash:{},data:i}):o))+"</p>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=this.lambda,s=this.escapeExpression;return'<div class="chat-header__avatar '+(null!=(o=t["if"].call(e,null!=e?e.premium:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+"\">\n  <img src='"+s(a(null!=(o=null!=e?e.avatarSrcSet:e)?o.src:o,e))+"' srcset='"+s(a(null!=(o=null!=e?e.avatarSrcSet:e)?o.srcset:o,e))+"' height='"+s(a(null!=(o=null!=e?e.avatarSrcSet:e)?o.size:o,e))+"' width='"+s(a(null!=(o=null!=e?e.avatarSrcSet:e)?o.size:o,e))+'\'>\n</div>\n\n<div class="chat-header__buttons">\n\n'+(null!=(o=t["if"].call(e,null!=e?e.ownerIsOrg:e,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?o:"")+"\n"+(null!=(o=t.unless.call(e,null!=e?e.archives:e,{name:"unless",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?o:"")+'\n</div>\n\n<div class="chat-header__content">\n\n  <h2 class=\'js-chat-name\' title="'+s((r=null!=(r=t.lockTooltip||(null!=e?e.lockTooltip:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"lockTooltip",hash:{},data:i}):r))+'">\n'+(null!=(o=t["if"].call(e,null!=e?e.githubLink:e,{name:"if",hash:{},fn:this.program(11,i,0),inverse:this.program(13,i,0),data:i}))?o:"")+(null!=(o=t["if"].call(e,null!=e?e.isPrivate:e,{name:"if",hash:{},fn:this.program(15,i,0),inverse:this.noop,data:i}))?o:"")+"  </h2>\n\n"+(null!=(o=t.unless.call(e,null!=e?e.oneToOne:e,{name:"unless",hash:{},fn:this.program(17,i,0),inverse:this.noop,data:i}))?o:"")+"\n</div>\n"},useData:!0})},function(e,t){"use strict";e.exports=function(e){return/\//.test(e)?e.split("/")[0]:e}},,,,,function(e,t,n){"use strict";var i=n(11),o=n(16)("app:dozy");e.exports=function(){var e=12e4,t=1.5*e,n=Date.now();window.setInterval(function(){var e=Date.now(),r=e-n,a=r>t;n=e,a&&(o("Sleep detected!"),i.trigger("reawaken",r))},e)}()},function(e,t,n){"use strict";var i=n(2),o=n(197),r=n(114),a=n(16)("app:live-context");n(4);e.exports={syncRoom:function(){r.getClient().subscribeTemplate({urlTemplate:"/v1/user/:userId/rooms",contextModel:i.contextModel(),onMessage:function(e){a("Incoming: %j",e);var t=e.operation,n=e.model,r=n.id;if(r===i.getTroupeId()){var s=new o.TroupeModel(n,{parse:!0});switch(t){case"create":i.troupe().set(s.attributes);break;case"patch":case"update":i.troupe().set(s.attributes);break;case"remove":i.troupe().set({roomMember:!1});break;default:a("Unknown operation %s ignoring",t)}}},getSnapshotState:function(){return!1}})}}},function(e,t,n){"use strict";var i=n(2),o=n(11),r=n(220),a=n(68),s=n(168),l=n(189),c=n(307),u=n(309),d=n(363),h=n(236);n(191);var f=u.extend({monitorUnreadItems:!0,keyboardEvents:{backspace:"onKeyBackspace",quote:"onKeyQuote"},modelEvents:{"change:roomMember":"_roomMemberChanged"},_roomMemberChanged:function(){var e=this.regionManager.get("input");this.model.get("roomMember")?e.show(new r({model:i.troupe(),collection:this.options.chatCollection})):this.model.get("aboutToLeave")||e.show(new h({}))},behaviors:{Isomorphic:{chat:{el:"#content-wrapper",init:"initChatRegion"},toolbar:{el:"#right-toolbar-layout",init:"initToolbarRegion"},input:{el:"#chat-input",init:"initInputRegion"},header:{el:"#header-wrapper",init:"initHeaderRegion"},bannerTop:{el:"#unread-banner",init:"initBannerTopRegion"},bannerBottom:{el:"#bottom-unread-banner",init:"initBannerBottomRegion"},collaborators:{el:"#collaborators-container",init:"initCollaboratorsView"}}},initInputRegion:function(e){return this.model.get("roomMember")?new r(e({model:i.troupe(),collection:this.options.chatCollection},{rerender:!0})):new h(e({},{rerender:!0}))},initBannerTopRegion:function(e){return new c.Top(e({model:l.acrossTheFold()}))},initBannerBottomRegion:function(e){return new c.Bottom(e({model:l.acrossTheFold()}))},initCollaboratorsView:function(e){return new d(e())},onKeyBackspace:function(e){e.stopPropagation(),e.preventDefault()},onKeyQuote:function(e){e.preventDefault(),e.stopPropagation(),this.quoteText()},getSelectionText:function(){var e="";return window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text),e},quoteText:function(){var e=this.getSelectionText();e.length>0&&o.trigger("input.append","> "+e,{newLine:!0})}});a.mixin(f,s),e.exports=f},function(e,t,n){"use strict";var i=n(118),o=n(308),r=n(11),a=n(189);n(157);var s=i.ItemView.extend({octicon:"octicon-chevron-up",position:"Above",template:o,hidden:!0,className:"banner-wrapper",actAsScrollHelper:!1,ui:{bannerMessage:"#banner-message",buttons:"button"},behaviors:{Tooltip:{"button.side":{title:"Mark as read",placement:"top"}}},events:{"click button.main":"onMainButtonClick","click button.side":"onSideButtonClick"},modelEvents:function(){var e={};return e["change:unread"+this.position]="updateVisibility",e["change:hasUnread"+this.position]="updateVisibility",e["change:hasMentions"+this.position]="updateVisibility",e},applyStyles:function(){return this.getMentionsCount()?(this.ui.buttons.removeClass("unread"),void this.ui.buttons.addClass("mention")):this.getUnreadCount()?void this.ui.buttons.addClass("unread"):(this.ui.buttons.removeClass("unread"),void this.ui.buttons.removeClass("mention"))},getUnreadCount:function(){return this.model.get("unread"+this.position)},getMentionsCount:function(){return this.model.get("mentions"+this.position)},serializeData:function(){return{message:this.getMessage(),octicon:this.octicon}},getMessage:function(){var e=this.getUnreadCount(),t=this.getMentionsCount();return e||t?1===t?"1 mention":t>1?t+"  mentions":1===e?"1 unread":e>99?"99+ unread":e+" unread":"Go to bottom"},shouldBeVisible:function(){return!!this.getMentionsCount()||!!this.getUnreadCount()||!!this.actAsScrollHelper},updateMessage:function(){this.ui.bannerMessage.text(this.getMessage())},updateVisibility:function(){this.applyStyles(),this.updateMessage(),this.shouldBeVisible()?this.$el.parent().show():(this.ui.buttons.blur(),this.$el.parent().hide())},onRender:function(){this.updateVisibility()},onMainButtonClick:function(){var e=this.model.get("oldestMentionId");if(e)return r.trigger("chatCollectionView:scrollToChatId",e);var t=this.model.get("oldestUnreadItemId");t&&r.trigger("chatCollectionView:scrollToChatId",t)},onSideButtonClick:function(){a.markAllRead()}}),l=s.extend({octicon:"octicon-chevron-down",position:"Below",className:"banner-wrapper bottom",actAsScrollHelper:!1,initialize:function(){this.listenTo(r,"atBottomChanged",this.toggleScrollHelper)},toggleScrollHelper:function(e){this.actAsScrollHelper=!e,this.updateVisibility()},onMainButtonClick:function(){this.toggleScrollHelper(!0);var e=this.model.get("mostRecentMentionId");if(e)return r.trigger("chatCollectionView:scrollToChatId",e);var t=this.model.get("mostRecentUnreadItemId");return t?r.trigger("chatCollectionView:scrollToChatId",t):void r.trigger("chatCollectionView:scrollToBottom")},onSideButtonClick:function(){}});e.exports={Top:s,Bottom:l}},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing,a="function",s=this.escapeExpression;return'<div class=\'banner slide-away\'>\n  <button class="main"><i class="octicon '+s((o=null!=(o=t.octicon||(null!=e?e.octicon:e))?o:r,typeof o===a?o.call(e,{name:"octicon",hash:{},data:i}):o))+'"></i><span id="banner-message">'+s((o=null!=(o=t.message||(null!=e?e.message:e))?o:r,typeof o===a?o.call(e,{name:"message",hash:{},data:i}):o))+'</span></button>\n  <button class="side"><i class="icon-cancel-circle"></i></button>\n</div>\n'},useData:!0})},function(e,t,n){"use strict";var i=n(2),o=n(310),r=n(296),a=n(322);n(191),e.exports=o.extend({behaviors:{Isomorphic:{chat:{el:"#content-wrapper",init:"initChatRegion"},toolbar:{el:"#right-toolbar-layout",init:"initToolbarRegion"},header:{el:"#header-wrapper",init:"initHeaderRegion"}}},initToolbarRegion:function(e){return new a(e())},initHeaderRegion:function(e){return new r(e({model:i.troupe()}))}})},function(e,t,n){"use strict";var i=n(118),o=n(140),r=n(141),a=n(311),s=n(315),l=n(318),c=n(319),u=n(192);n(191);var d=i.LayoutView.extend({template:!1,el:"body",dialogRegion:o,ui:{scroll:"#content-frame"},behaviors:{Isomorphic:{chat:{el:"#content-wrapper",init:"initChatRegion"}}},initChatRegion:function(e){var t=i.getOption(this,"monitorUnreadItems");return new r(e({collection:this.options.chatCollection,decorators:[a,s,l,c,u],monitorScrollPane:t&&this.ui.scroll}))}});e.exports=d},function(e,t,n){"use strict";var i=n(6),o=n(3),r=n(118),a=n(2),s=n(38),l=n(11),c=n(40),u=n(149),d=n(312),h=n(313),f=n(314),p=n(116);e.exports=function(){function e(){var e=a.troupe();return"REPO"===e.get("githubType")?e.get("uri"):""}function t(e,t){return new u({titleView:new g({model:e}),view:new m({model:e}),footerView:new v({model:e}),targetElement:t,placement:"horizontal"})}function n(e,t,n){var i=e+"/"+t,o=b[i];return o?void setTimeout(function(){n(o)},0):void s.priv.get("/issue-state",{q:i}).then(function(e){b[i]=e[0],setTimeout(function(){delete b[i]},6e4),n(e[0])})}var m=r.ItemView.extend({className:"issue-popover-body",template:d,modelEvents:{change:"render"},serializeData:function(){var e=this.model.toJSON();return e.date=c(e.created_at).format("LLL"),e}}),g=r.ItemView.extend({className:"issue-popover-title",modelEvents:{change:"render"},template:h}),v=r.ItemView.extend({className:"commit-popover-footer",template:f,events:{"click button.mention":"onMentionClick"},modelEvents:{change:"render"},onMentionClick:function(){var t=e(),n=this.model.get("repo"),i=this.model.get("number"),o=n===t?"#"+i:n+"#"+i;l.trigger("input.append",o),this.parentPopover.hide()}}),b={},w=o.Model.extend({idAttribute:"number",urlRoot:function(){var e=this.get("repo");return"/private/gh/repos/"+e+"/issues/"},sync:p.sync}),y={decorate:function(o){var r=e();o.$el.find('*[data-link-type="issue"]').each(function(){function e(){var e=new w({repo:c,number:d,html_url:"https://github.com/"+c+"/issues/"+d});return e.fetch({data:{renderMarkdown:!0},error:function(){e.set({error:!0})}}),e}function a(n,i){i||(i=e());var r=t(i,n.target);r.show(),u.singleton(o,r)}function s(t){var n=e();u.hoverTimeout(t,function(){a(t,n)})}var l=i(this),c=l.data("issueRepo")||r,d=l.data("issue");n(c,d,function(e){l.hasClass("open")||l.hasClass("closed")||l.addClass(e)}),l.on("click",a),l.on("mouseover",s),o.once("destroy",function(){l.off("click",a),l.off("mouseover",s)})})}};return y}()},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){return"<div class=\"'chat-item__content'\">\n  Issue not found. It may not exist or you may not have access to it.\n</div>\n"},3:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div class="trpDisplayPicture--left avatar-s" style="background-image: url('+a(r(null!=(o=null!=e?e.user:e)?o.avatar_url:o,e))+');"></div>\n<div class=\'chat-item__content\'>\n  <div class="chat-item__details">\n    <div class="chat-item__from">'+a(r(null!=(o=null!=e?e.user:e)?o.login:o,e))+"</div>\n  </div>\n"+(null!=(o=t["if"].call(e,null!=e?e.body_html:e,{name:"if",hash:{},fn:this.program(4,i,0),inverse:this.program(6,i,0),data:i}))?o:"")+"</div>\n"+(null!=(o=t["if"].call(e,null!=e?e.assignee:e,{name:"if",hash:{},fn:this.program(8,i,0),inverse:this.noop,data:i}))?o:"")},4:function(e,t,n,i){var o,r;return'    <div class="chat-item__text">'+(null!=(r=null!=(r=t.body_html||(null!=e?e.body_html:e))?r:t.helperMissing,o="function"==typeof r?r.call(e,{name:"body_html",hash:{},data:i}):r)?o:"")+"</div>\n"},6:function(e,t,n,i){return'    <div class="chat-item__text missing">No description given.</div>\n'},8:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'  <div style="float: right;\n  margin-top: 5px;\n  ">\n  <div class="trpDisplayPicture--left avatar-xxs" style="background-image: url('+a(r(null!=(o=null!=e?e.assignee:e)?o.avatar_url:o,e))+');\n                                                         vertical-align: middle;\n                                                         margin-top: 0.25em;\n                                                         margin-right: 0.25em;"></div>\n    <span style="\n    font-size: smaller;\n    vertical-align: middle;\n    color: #AAA;\n    ">'+a(r(null!=(o=null!=e?e.assignee:e)?o.login:o,e))+" is assigned</span>\n  </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o;return null!=(o=t["if"].call(e,null!=e?e.error:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.program(3,i,0),data:i}))?o:""},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){var o;return": "+this.escapeExpression((o=null!=(o=t.title||(null!=e?e.title:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"title",hash:{},data:i}):o))},3:function(e,t,n,i){var o,r=t.helperMissing,a="function",s=this.escapeExpression;return'<span class="issuePopoverLabel issue '+s((o=null!=(o=t.state||(null!=e?e.state:e))?o:r,typeof o===a?o.call(e,{name:"state",hash:{},data:i}):o))+'">'+s((o=null!=(o=t.state||(null!=e?e.state:e))?o:r,typeof o===a?o.call(e,{name:"state",hash:{},data:i}):o))+"</span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s="function",l=this.escapeExpression;return'<a href="'+l((r=null!=(r=t.html_url||(null!=e?e.html_url:e))?r:a,typeof r===s?r.call(e,{name:"html_url",hash:{},data:i}):r))+'" target="_blank">#'+l((r=null!=(r=t.number||(null!=e?e.number:e))?r:a,typeof r===s?r.call(e,{name:"number",hash:{},data:i}):r))+(null!=(o=t["if"].call(e,null!=e?e.title:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+"</a>\n"+(null!=(o=t["if"].call(e,null!=e?e.state:e,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?o:"")},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o;return'<button class="trpBtnLightGrey trpButtonSmall mention">Mention</button> <a href="'+this.escapeExpression((o=null!=(o=t.html_url||(null!=e?e.html_url:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"html_url",hash:{},data:i}):o))+'" target="_blank" class="trpBtnBlue trpButtonSmall open-in-github">Open in GitHub</a>\n'},useData:!0})},function(e,t,n){"use strict";var i=n(6),o=n(3),r=n(11),a=n(38),s=n(149),l=n(316),c=n(317),u=n(314),d=n(40),h=n(118);e.exports=function(){function e(e){if(1===e.split("/").length)return e.substring(0,f-1)+"";for(var t=e;t.length>f-2;){var n=t.split("/");1===n.length?n[0]=n[0].substring(0,f-3)+"":n.shift(),t=n.join("/")}return"/"+t}function t(e,t){return new s({titleView:new m({model:e}),view:new p({model:e}),footerView:new g({model:e}),targetElement:t,placement:"horizontal"})}function n(e,t,n){a.priv.get("/gh/repos/"+e+"/commits/"+t,{renderPatchIfSingle:!0}).then(function(e){n.set(e)}).fail(function(e){n.set("error",e.status)})}var f=40,p=h.ItemView.extend({className:"commit-popover-body",template:l,modelEvents:{change:"render"},serializeData:function(){var t=this.model.toJSON();return t.author&&(t.date=d(t.commit.author.date).format("LLL"),t.files.forEach(function(t){t.filename.length>f&&(t.fullFilename=t.filename,t.filename=e(t.filename))}),1===t.files.length&&(t.isFileLengthSingular=!0,t.files[0].patch_html&&(t.firstPatchHtml=t.files[0].patch_html)),1===t.stats.additions&&(t.isAdditionsSingular=!0),1===t.stats.deletions&&(t.isDeletionsSingular=!0)),t}}),m=h.ItemView.extend({className:"commit-popover-title",modelEvents:{change:"render"},template:c,serializeData:function(){var e=this.model.toJSON();return e.shortSha=e.sha.substring(0,7),e}}),g=h.ItemView.extend({className:"commit-popover-footer",template:u,modelEvents:{change:"render"},events:{"click button.mention":"onMentionClick"},onMentionClick:function(){var e=this.model.get("repo")+"@"+this.model.get("sha").substring(0,7);r.trigger("input.append",e),this.parentPopover.hide()}}),v={decorate:function(e){e.$el.find('*[data-link-type="commit"]').each(function(){function r(i){n(c,u,d);var o=t(d,i.target);o.show(),s.singleton(e,o)}function a(i){n(c,u,d),s.hoverTimeout(i,function(){var n=t(d,i.target);n.show(),s.singleton(e,n)})}var l=i(this),c=l.data("commitRepo"),u=l.data("commitSha");if(c&&u){var d=new o.Model({repo:c,sha:u,html_url:"https://github.com/"+c+"/commit/"+u});l.on("click",r),l.on("mouseover",a),e.once("destroy",function(){l.off("click",r),l.off("mouseover",a)})}})}};return v}()},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){var o,r=t.helperMissing,a="function",s=this.escapeExpression;return'Please check that:\n<ul>\n  <li><a href="https://github.com/'+s((o=null!=(o=t.repo||(null!=e?e.repo:e))?o:r,typeof o===a?o.call(e,{name:"repo",hash:{},data:i}):o))+"/commit/"+s((o=null!=(o=t.sha||(null!=e?e.sha:e))?o:r,typeof o===a?o.call(e,{name:"sha",hash:{},data:i}):o))+'" target="_blank" class="link">'+s((o=null!=(o=t.repo||(null!=e?e.repo:e))?o:r,typeof o===a?o.call(e,{name:"repo",hash:{},data:i}):o))+"@"+s((o=null!=(o=t.sha||(null!=e?e.sha:e))?o:r,typeof o===a?o.call(e,{name:"sha",hash:{},data:i}):o))+'</a> is a real commit</li>\n  <li>Gitter has <a href="https://github.com/settings/applications" target="_blank" class="link">permission to view it<a></li>\n</ul>\n'},3:function(e,t,n,i){var o;return null!=(o=t["if"].call(e,null!=e?e.author:e,{name:"if",hash:{},fn:this.program(4,i,0),inverse:this.noop,data:i}))?o:""},4:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div class="trpDisplayPicture--left avatar-s" style="background-image: url('+a(r(null!=(o=null!=e?e.author:e)?o.avatar_url:o,e))+');"></div>\n<div class=\'chat-item__content\'>\n  <div class="chat-item__details">\n    <div class="chat-item__from">'+a(r(null!=(o=null!=e?e.author:e)?o.login:o,e))+'</div>\n  </div>\n  <div class="chat-item__text">\n    <p>'+a(r(null!=(o=null!=e?e.files:e)?o.length:o,e))+" file"+(null!=(o=t.unless.call(e,null!=e?e.isFileLengthSingular:e,{name:"unless",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?o:"")+" changed. "+a(r(null!=(o=null!=e?e.stats:e)?o.additions:o,e))+" addition"+(null!=(o=t.unless.call(e,null!=e?e.isAdditionsSingular:e,{name:"unless",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?o:"")+", "+a(r(null!=(o=null!=e?e.stats:e)?o.deletions:o,e))+" deletion"+(null!=(o=t.unless.call(e,null!=e?e.isDeletionsSingular:e,{name:"unless",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?o:"")+'.</p>\n    <ul class="file-list">\n'+(null!=(o=t.each.call(e,null!=e?e.files:e,{name:"each",hash:{},fn:this.program(7,i,0),inverse:this.noop,data:i}))?o:"")+"    </ul>\n"+(null!=(o=t["if"].call(e,null!=e?e.firstPatchHtml:e,{name:"if",hash:{},fn:this.program(9,i,0),inverse:this.noop,data:i}))?o:"")+"  </div>\n</div>\n"},5:function(e,t,n,i){return"s"},7:function(e,t,n,i){var o,r=t.helperMissing,a="function",s=this.escapeExpression;return'      <li><a href="'+s((o=null!=(o=t.blob_url||(null!=e?e.blob_url:e))?o:r,typeof o===a?o.call(e,{name:"blob_url",hash:{},data:i}):o))+'" target="_blank" class="'+s((o=null!=(o=t.status||(null!=e?e.status:e))?o:r,typeof o===a?o.call(e,{name:"status",hash:{},data:i}):o))+'" title="'+s((o=null!=(o=t.fullFilename||(null!=e?e.fullFilename:e))?o:r,typeof o===a?o.call(e,{name:"fullFilename",hash:{},data:i}):o))+'">'+s((o=null!=(o=t.filename||(null!=e?e.filename:e))?o:r,typeof o===a?o.call(e,{name:"filename",hash:{},data:i}):o))+"</a></li>\n"},9:function(e,t,n,i){var o,r;return"      "+(null!=(r=null!=(r=t.firstPatchHtml||(null!=e?e.firstPatchHtml:e))?r:t.helperMissing,o="function"==typeof r?r.call(e,{name:"firstPatchHtml",hash:{},data:i}):r)?o:"")+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o;return null!=(o=t["if"].call(e,null!=e?e.error:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.program(3,i,0),data:i}))?o:""},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){return"  Error - Commit Not Found\n"},3:function(e,t,n,i){var o;return null!=(o=t["if"].call(e,null!=e?e.commit:e,{name:"if",hash:{},fn:this.program(4,i,0),inverse:this.program(6,i,0),data:i}))?o:""},4:function(e,t,n,i){var o;return"    "+this.escapeExpression(this.lambda(null!=(o=null!=e?e.commit:e)?o.message:o,e))+"\n"},6:function(e,t,n,i){var o,r=t.helperMissing,a="function",s=this.escapeExpression;return"    "+s((o=null!=(o=t.repo||(null!=e?e.repo:e))?o:r,typeof o===a?o.call(e,{name:"repo",hash:{},data:i}):o))+"@"+s((o=null!=(o=t.shortSha||(null!=e?e.shortSha:e))?o:r,typeof o===a?o.call(e,{name:"shortSha",hash:{},data:i}):o))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r;return'<a href="'+this.escapeExpression((r=null!=(r=t.html_url||(null!=e?e.html_url:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"html_url",hash:{},data:i}):r))+'" target="_blank">\n'+(null!=(o=t["if"].call(e,null!=e?e.error:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.program(3,i,0),data:i}))?o:"")+"</a>"},useData:!0})},function(e,t,n){"use strict";var i=n(2),o=n(148),r=n(138);e.exports=function(){function e(e){var t=e.model.get("mentions"),n=i.user();if(t&&n){var o=i.user().get("username");o&&t.some(function(e){return e.userId===i.getUserId()})&&e.$el.find(".trpChatBox").addClass("mention")}}var t={decorate:function(t){function n(e){var n=r.get(e.target,"screenName");if(n){var i=new o({username:n,targetElement:e.target});i.show(),o.singleton(t,i)}}function i(e){o.hoverTimeout(e,function(){n(e)})}var a=t.$el.find(".mention");a.on("click",n),a.on("mouseover",i),t.once("destroy",function(){a.off("click",n),a.off("mouseover",i)}),e(t)}};return t}()},function(e,t,n){"use strict";var i=n(320),o=n(321);e.exports=function(){function e(e){var t=e.model;if(t.get("collapsed"))return void t.set("isCollapsible",!0);var n=!1;e.$el.find("a.link").each(function(r,a){0===a.childElementCount&&(a.innerText||a.textContent)===a.href&&o.parse(a.href,function(o){if(o&&o.html){n||(t.set("isCollapsible",!0),n=!0);var r;r="string"==typeof o.html?i(i.parseHTML(o.html,null,!0)):o.html;var s=i(document.createElement("div"));s.addClass("embed"),e.expandFunction&&e.expandFunction(s),o.maxWidth&&s.css({"max-width":o.maxWidth+"px"}),s.html(r),i(a).after(s),i.iframely.registerIframesIn(s)}})})}var t={decorate:function(t){e(t)}};return t}()},function(e,t,n){function i(e,t){var n=t.media;if(n&&n.height&&n.width&&!n["aspect-ratio"])return e.attr("width",n.width),e.attr("height",n.height),e;e.css("top",0).css("left",0).css("width","100%").css("height","100%").css("position","absolute");var i=r("<div>").css("left",0).css("width","100%").css("height",0).css("position","relative").append(e);if(n&&(n.height||n["aspect-ratio"])||i.css("padding-bottom","75%"),n&&(n["aspect-ratio"]?i.css("padding-bottom",Math.round(1e5/n["aspect-ratio"])/1e3+"%"):(n.height&&i.css("height",n.height),n.width&&i.css("width",n.width)),n["max-width"]||n["min-width"])){var o=r("<div>").append(i);["max-width","min-width"].forEach(function(e){n[e]&&o.css(e,n[e])}),i=o}return i}function o(e){if(e){if(e instanceof Array)return e.length>0?e[0]:void 0;if("object"==typeof e)for(var t in e){var n=e[t];if(n instanceof Array&&n.length>0)return n[0]}}}var r=n(6),a=function(){return{postMessage:function(e,t,n){e=JSON.stringify(e),t=t||"*",n=n||window.parent,window.postMessage&&n.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))},receiveMessage:function(e){function t(t){var n;try{n=JSON.parse(t.data)}catch(i){}e(t,n)}window.postMessage&&(window.addEventListener?window[e?"addEventListener":"removeEventListener"]("message",t,!1):window[e?"attachEvent":"detachEvent"]("onmessage",t))}}}();r.ajaxPrefilter("script",function(e){e.url.indexOf("reader.js")>-1&&(e.cache=!0)}),r.iframely=r.iframely||{},r.iframely.iframes=r.iframely.iframes||{},a.receiveMessage(function(e,t){var n;t&&t.windowId&&(n=r.iframely.iframes[t.windowId])&&r.iframely.setIframeHeight&&"resize"===t.method&&t.height&&r.iframely.setIframeHeight(n,t.height)}),r.iframely.setIframeHeight=function(e,t){var n=e.attr("iframely-wrapped"),i=e.parent();if("undefined"==typeof n){var o=i.attr("style"),r=e.attr("style");o.match("position: relative;")&&o.match("width: 100%;")&&o.match("height: 0px;")&&r.match("height: 100%;")&&r.match("width: 100%;")?(e.attr("iframely-wrapped",!0),n=!0):(e.attr("iframely-wrapped",!1),n=!1)}n?i.css("padding-bottom","").css("height",t):e.css("height",t)},r.iframely.registerIframesIn=function(e){e.find("iframe").each(function(){var e=r(this);e.attr("iframely-registered")||(e.attr("iframely-registered",!0),e.load(function(){var t=r.iframely.iframesCounter=(r.iframely.iframesCounter||0)+1;r.iframely.iframes[t]=e,a.postMessage({method:"register",windowId:t},"*",this.contentWindow)}))})},r.iframely.getPageData=function(e,t,n){"function"==typeof t&&(n=t,t={}),t=t||{},r.ajax({url:r.iframely.defaults.endpoint,dataType:"json",data:{uri:t.url?void 0:e,url:t.url?e:void 0,debug:t.debug,mixAllWithDomainPlugin:t.mixAllWithDomainPlugin,refresh:t.refresh,meta:t.meta,whitelist:t.whitelist,api_key:t.api_key,origin:t.origin,autoplay:t.autoplay,ssl:t.ssl,html5:t.html5,iframe:t.iframe},success:function(e,t,i){n(null,e,i)},error:function(e,t,i){var o=function(){try{return JSON.parse(e.responseText)}catch(t){}}();n(t,o,e)}})},r.iframely.defaults={endpoint:"//iframely.com/iframely"},r.iframely.get=function(e,t,n){r.ajax({url:e,dataType:"json",data:t,success:function(e,t,i){n(null,e,i)},error:function(e,t,i){var o=function(){try{return JSON.parse(e.responseText)}catch(t){}}();n(o&&o.error||e.status||i.message,o,e)}})};var s={javascript:{test:function(e){return/(text|application)\/javascript/i.test(e.type)&&e.href},generate:function(e){return r("<script>").attr("type",e.type).attr("src",e.href)}},image:{test:function(e){return/^image(\/[\w-]+)?$/i.test(e.type)&&e.href},generate:function(e){var t=r("<img>").attr("src",e.href);return e.title&&t.attr("title",e.title).attr("alt",e.title),t}},mp4video:{test:function(e){return"video/mp4"==e.type||"video/webm"==e.type||"video/ogg"==e.type},generate:function(e,t){var n=t&&t.iframelyData,o=e.rel.indexOf("gifv")>-1,a=e.rel.indexOf("autoplay")>-1||o,l=r("<video"+(o?" loop muted":" controls")+(a?" autoplay":"")+">Your browser does not support HTML5 video.</video>");if(n&&n.links){var c,u,d=e.media;d&&(c=d["aspect-ratio"],c||[["min-width","min-height"],["max-width","max-height"],["width","height"]].forEach(function(e){u=d[e[0]];var t=d[e[1]];u&&t&&(c=u/t)}));var h=r.iframely.filterLinks(n.links,function(e){return e.rel.indexOf("promo")>-1}).length,f=r.iframely.filterLinks(n.links,function(e){if((!h||-1!==e.rel.indexOf("promo"))&&s.image.test(e)&&(e.rel.indexOf("thumbnail")>-1||e.rel.indexOf("image")>-1)&&-1===e.type.indexOf("gif")&&!e.href.match(/\.gif(?:[#\?].*)?$/i)){var t=e.media;if(c&&t&&t.width&&t.height){var n=t.width/t.height;return Math.abs(n-c)<.1}return!0}});f.sort(function(e,t){var n=e.media&&e.media.width,i=t.media&&t.media.width;return n==i?0:n&&i?i-n:n?i?void 0:-1:1}),f.length&&l.attr("poster",f[0].href)}return l.append("<source />").children("source").attr("src",e.href).attr("type",e.type),t&&t.disableSizeWrapper?l:i(l,e)}},flash:{test:function(e){return"application/x-shockwave-flash"===e.type&&e.href},generate:function(e,t){var n=r("<embed>").attr("src",e.href).attr("type","application/x-shockwave-flash");return t&&t.disableSizeWrapper?n:i(n,e)}},iframe:{test:function(e){return"text/html"==e.type&&e.href},generate:function(e,t){var n=r("<iframe>").attr("src",e.href).attr("frameborder","0").attr("allowfullscreen",!0).attr("webkitallowfullscreen",!0).attr("mozallowfullscreen",!0);return t&&t.disableSizeWrapper?n:i(n,e)}},inline:{test:function(e){return"text/html"===e.type&&e.rel.indexOf("inline")>-1&&!e.href&&e.html},generate:function(e,t){var n;try{n=r(e.html)}catch(i){n=r("<div>").append(e.html)}return n}}};r.iframely.generateLinkElement=function(e,t){t&&t.links&&(t={iframelyData:t});for(var n in s){var i=s[n];if(i.test(e))return i.generate(e,t)}},r.iframely.findBestFittedLink=function(e,t,n){var i=r.iframely.filterLinks(n,function(e){var t=e.media;return t&&t.width&&t.height});if(0==i.length)return o(n);var a=e/t,s=[];i.forEach(function(n){var i,o=n.media.width,r=n.media.height,l=o/r;i=l>a?o/e:r/t,i>1&&(o/=i,r/=i);var c=e*t-o*r;s.push({link:n,scale:i,modScale:i>1?i:1/i,diffSquare:c})});var l,c=s.filter(function(e){return e.scale<=1});c.length>0&&(c.sort(function(e,t){return t.scale-e.scale}),l=c[0]);var u,d=s.filter(function(e){return e.scale>1});d.length>0&&(d.sort(function(e,t){var n=e.diffSquare-e.diffSquare;return 0==n&&(n=e.scale-t.scale),n}),u=d[0]);var h=[l,u].filter(function(e){return e});return h.sort(function(e,t){return e.modScale-t.modScale}),h[0].link},r.iframely.findBestSizedLink=function(e,t,n){var i=r.iframely.filterLinks(n,function(e){var t=e.media;return t&&t.width&&t.height});if(0==i.length)return o(n);var a=[];i.forEach(function(n){var i=n.media.width,o=n.media.height,r=i-e,s=o-t,l=0,c=0;r>0&&s>0&&(l=i*o-e*t),0>r&&0>s&&(c=e*t-i*o),r>0&&0>s&&(l=r*o,c=-s*e),0>r&&s>0&&(l=s*i,c=-r*t),a.push({link:n,overSquare:l,lostSquare:c})});var s=a.filter(function(e){return 0==e.lostSquare});if(s.length>0)return s.sort(function(e,t){return e.overSquare-t.overSquare}),s[0].link;var l=a.filter(function(e){return e.lostSquare>0});return l.sort(function(e,t){return e.lostSquare-t.lostSquare}),l[0].link},
r.iframely.filterLinksByRel=function(e,t,n){function i(e){return/^(?:https:)?\/\/.+/i.test(e)}var n=n||{};"string"==typeof e&&(e=[e]);var o=r.iframely.filterLinks(t,function(t){if(n.httpsOnly&&!i(t.href))return!1;for(var o=!1,r=0;!o&&r<e.length;)t.rel.indexOf(e[r])>-1&&(o=!0),r++;return o});return o&&n.httpsFirst&&o.sort(function(e,t){var n=i(e.href),o=i(t.href);return n==o?0:n&&!o?-1:1}),o&&n.returnOne?o.length>0?o[0]:null:o},r.iframely.filterLinks=function(e,t){if(e){if(e instanceof Array)return e.filter(t);if("object"==typeof e){var n=[];for(var i in e){var o=e[i];o instanceof Array&&o.forEach(function(e){t(e)&&n.push(e)})}return n}}return[]},e.exports=r},function(e,t,n){"use strict";function i(e,t){u.iframely.getPageData(e,function(e,n){return e?t(null):void s(n,t)})}function o(e,t){var n=t.filter(function(t){return t.rel.indexOf(e)>=0});if(n.length){if(1==n.length)return n[0];var i=n.filter(function(e){return e.rel.indexOf("responsive")>=0});if(i.length>=1)return i[0];var o=n.filter(function(e){return e.media&&e.media["aspect-ratio"]>0});return o.length>=1?o[0]:n[0]}}function r(e,t){var n=t.filter(function(t){return t.rel.indexOf(e)>=0});if(n.length)return n.sort(function(e,t){var n=Math.abs((e.media&&e.media.height||0)-f),i=Math.abs((t.media&&t.media.height||0)-f);return n-i}),n[0]}function a(e){for(var t=["player","app","reader","survey"],n=0;n<t.length;n++){var i=o(t[n],e);if(i)return i}var a=r("image",e);return a?a:(a=r("thumbnail",e),a?a:void 0)}function s(e,t){var n=a(e.links);if(!n)return t(null);var i=u.iframely.generateLinkElement(n,e),o=n.media&&n.media["aspect-ratio"],r=o&&Math.floor(o*f);t({html:i,maxWidth:r})}function l(e,t){var n=e.match(/https?:\/\/(.+)(\.jpe?g|\.gif|\.png)$/i);c(e)||n?i(e,t):t(null)}function c(e){return h.some(function(t){return e.match(t)})}var u=n(6);n(320);var d=n(2),h=["youtube.com","www.youtube.com","youtu.be","instagram.com","instagr.am","cloudup.com","cl.ly","dl.dropboxusercontent.com","www.dropbox.com/s","codepen.io","gist.github.com","vine.co","goo.gl","twitter.com","soundcloud.com","snd.sc","rd.io","rdio.com","www.mixcloud.com","www.meetup.com","www.dailymotion.com","meetu.ps","open.spotify.com","stream.tv/recorded","photobucket.com","www.slideshare.net","speakerdeck.com","www.behance.net","dribbble.com","vimeo.com","www.flickr.com","www.twitch.tv","flic.kr","500px.com"].map(function(e){if("object"==typeof e)return e;var t=e.replace(/[\.\/]/g,function(e){return"\\"+e[0]});return new RegExp("https?:\\/\\/"+t+"\\/.+")}),f=640,p=d.env("embed");u.iframely.defaults.endpoint=p.basepath+"/"+p.cacheBuster+"/iframely",e.exports={parse:l}},function(e,t,n){"use strict";var i=n(3),o=n(118),r=n(2),a=n(323),s=n(327),l=n(330),c=n(337),u=n(339),d=n(342),h=n(142);n(191),e.exports=function(){var e=o.LayoutView.extend({className:"right-toolbar right-toolbar--collapsible",behaviors:{Isomorphic:{search:{el:"#search-results",init:"initSearchRegion"},header:{el:"#right-toolbar-header-region",init:"initSearchInputRegion"},repo_info:{el:"#repo-info",init:"initRepo_infoRegion"},activity:{el:"#activity-region",init:"initActivityRegion"},roster:{el:"#people-roster",init:"initRosterRegion"}}},ui:{header:"#toolbar-top-content",footer:"#zendesk-footer",rosterHeader:"#people-header",repoInfoHeader:"#info-header"},events:{"click #upgrade-auth":"onUpgradeAuthClick","click #people-header":"showPeopleList","click #info-header":"showRepoInfo","submit #upload-form":"upload"},childEvents:{"search:expand":"expandSearch","search:collapse":"collapseSearch","search:show":"showSearch","search:hide":"hideSearch"},collectionEvents:{"add sync reset remove":"onCollectionUpdate"},toggleSearch:function(){},constructor:function(){this.collection=a.roster,o.LayoutView.prototype.constructor.apply(this,arguments)},initialize:function(){this.searchState=new i.Model({searchTerm:"",active:!1,isLoading:!1}),this.listenTo(r.troupe(),"change:id",this.onRoomChange,this)},initSearchRegion:function(e){return new l(e({model:this.searchState}))},initSearchInputRegion:function(e){return new c(e({model:this.searchState}))},initRepo_infoRegion:function(e){return new u(e())},initActivityRegion:function(e,t){return h()&&t.$el.addClass("scroller"),new d(e({collection:a.events}))},initRosterRegion:function(e){return new s.ExpandableRosterView(e({rosterCollection:a.roster}))},expandSearch:function(){this.$el.addClass("right-toolbar--expanded")},collapseSearch:function(){this.$el.removeClass("right-toolbar--expanded")},showSearch:function(){this.search.$el.show(),this.ui.header.hide(),this.ui.footer.hide()},hideSearch:function(){this.search.$el.hide(),this.ui.header.show(),this.ui.footer.show()},showPeopleList:function(){this.repo_info.$el.hide(),this.roster.$el.show(),this.ui.rosterHeader.addClass("selected"),this.ui.repoInfoHeader.removeClass("selected")},showRepoInfo:function(){this.roster.$el.hide(),this.repo_info.$el.show(),this.ui.rosterHeader.removeClass("selected"),this.ui.repoInfoHeader.addClass("selected")},onRoomChange:function(e){var t=e.get("githubType"),n=this.$el.find("#info-header"),i="REPO"!==t;n.toggleClass("hidden",i),n.hasClass("selected")&&i&&this.showPeopleList()},onCollectionUpdate:function(){var e=this.$el.find("#people-list");e.toggleClass("hidden",!this.collection.length)}});return e}()},function(e,t,n){"use strict";function i(e){var t=l.get(e.userId);t&&t.set("online","in"===e.status?!0:!1)}var o=n(324),r=n(325),a=n(11),s=n(200);n(326);var l=new o.RosterCollection(null,{listen:!0}),c=new r.EventCollection(null,{listen:!0,snapshot:!0});l.on("error",s.bind(null,"roster-collection")),c.on("error",s.bind(null,"events-collection")),a.on("userLoggedIntoTroupe",i),a.on("userLoggedOutOfTroupe",i);var u={roster:l,events:c};window._intergratedCollections=u,e.exports=u},function(e,t,n){"use strict";var i=n(3),o=n(114),r=n(71).LiveCollection,a=n(116),s=n(2),l=i.Model.extend({idAttribute:"id",sync:a.sync}),c=r.extend({model:l,modelName:"user",urlTemplate:"/v1/rooms/:troupeId/users",contextModel:s.delayedContextModel(1e3),getSnapshotState:function(){return{lean:!0,limit:25}},client:function(){return o.getClient()},sync:a.sync});e.exports={RosterCollection:c,UserModel:l}},function(e,t,n){"use strict";var i=n(4),o=(n(38),n(40)),r=n(71).LiveCollection,a=n(114),s=n(3),l=n(116),c=n(2),u=s.Model.extend({idAttribute:"id",parse:function(e){return e.sent&&(e.sent=o(e.sent,o.defaultFormat)),e},toJSON:function(){var e=i.clone(this.attributes),t=this.get("sent");return t&&(e.sent=t.format()),delete e.html,e}}),d=r.extend({model:u,initialize:function(){this.listenTo(this,"add reset",this.trim)},client:function(){return a.getClient()},trim:function(){for(;this.length>20;)this.pop()},modelName:"event",urlTemplate:"/v1/rooms/:troupeId/events",contextModel:c.delayedContextModel(2e3),comparator:function(e,t){var n=e.get("sent"),i=t.get("sent");return i?n?i.valueOf()-n.valueOf():-1:n?1:0},sync:l.sync});e.exports={EventModel:u,EventCollection:d}},function(e,t,n){"use strict";var i=n(2),o=n(114),r=n(11),a=0,s=o.getClient().subscribeTemplate({urlTemplate:"/v1/rooms/:troupeId",contextModel:i.contextModel(),onMessage:function(e){"presence"===e.notification&&("in"===e.status?r.trigger("userLoggedIntoTroupe",e):"out"===e.status&&r.trigger("userLoggedOutOfTroupe",e))},getSnapshotState:function(){return a>0},handleSnapshot:function(e){i.getTroupeId()===e.id&&i.setTroupe(e)},getSubscribeOptions:function(){return 1>=a?void 0:{reassociate:{eyeballs:1}}}});s.on("resubscribe",function(){a++})},function(e,t,n){"use strict";var i=n(118),o=n(2),r=n(121),a=n(145),s=n(328),l=n(329);n(191);var c=i.CollectionView.extend({tagName:"ul",className:"roster",childView:a,childViewOptions:function(e){var t={tagName:"li",showStatus:!0,tooltipPlacement:"left"};if(e&&e.id){var n=this.$el.find(".js-model-id-"+e.id)[0];n&&(t.el=n)}return t}}),u=i.ItemView.extend({className:"remaining",template:l,modelEvents:{"change:id":"render"},serializeData:function(){var e=this.model.get("userCount"),t=this.model.get("oneToOne"),n=o.isLoggedIn();return{showAddButton:n&&!t,showPeopleButton:!t,userCount:e,hasHiddenMembers:e>25}}}),d=i.LayoutView.extend({template:s,behaviors:{Isomorphic:{rosterRegion:{el:"#roster-region",init:"initRosterRegion"},remainingRegion:{el:"#remaining-region",init:"initRemainingRegion"}}},initRosterRegion:function(e){return new c(e({collection:this.options.rosterCollection,filter:function(e,t){return 25>t}}))},initRemainingRegion:function(e){return new u(e({model:o.troupe()}))}}),h=r.extend({initialize:function(e){e=e||{},e.title="People",r.prototype.initialize.call(this,e),this.view=new c(e)}});e.exports={ExpandableRosterView:d,Modal:h}},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){var o,r,a=t.helperMissing;return'      <li class="js-model-id-'+this.escapeExpression((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,"function"==typeof r?r.call(e,{name:"id",hash:{},data:i}):r))+'">\n        '+(null!=(o=(t.widget||e&&e.widget||a).call(e,"avatar",{name:"widget",hash:{showStatus:!0,user:e},data:i}))?o:"")+"\n      </li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o;return'<span class="frame-people">\n  <span id="roster-region">\n    <ul id="roster-view" class="roster">\n'+(null!=(o=t.each.call(e,null!=e?e.users:e,{name:"each",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+'    </ul>\n  </span>\n<div id="remaining-region"></div>\n</span>\n'},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){return'  <a href="#add" class="trpAddBadge" style="text-decoration: none">\n    <div style="text-align: center;">&#10011; Add</div>\n  </a>\n'},3:function(e,t,n,i){var o;return null!=(o=t["if"].call(e,null!=e?e.hasHiddenMembers:e,{name:"if",hash:{},fn:this.program(4,i,0),inverse:this.program(6,i,0),data:i}))?o:""},4:function(e,t,n,i){var o;return'  <a href="#people" class="trpMoreBadge" style="text-decoration: none">\n    <div style="text-align: center;">See All</div>\n  </a>\n  <small>('+this.escapeExpression((o=null!=(o=t.userCount||(null!=e?e.userCount:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"userCount",hash:{},data:i}):o))+" members)</small>\n"},6:function(e,t,n,i){return'  <a href="#people" class="trpMoreBadge" style="text-decoration: none">\n    <div style="text-align: center;">Details</div>\n  </a>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o;return'<div id="remaining-view" class="remaining">\n\n'+(null!=(o=t["if"].call(e,null!=e?e.showAddButton:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+"\n"+(null!=(o=t["if"].call(e,null!=e?e.showPeopleButton:e,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?o:"")+"\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var i=n(6),o=n(38),r=n(2),a=n(11),s=n(180),l=n(331),c=n(3),u=n(118),d=n(4),h=n(68),f=n(332),p=n(333),m=n(334),g=n(335),v=n(336),b=n(168);n(154),n(177),n(191),e.exports=function(){var e=u.ItemView.extend({className:"result-empty",template:m}),t=u.ItemView.extend({className:"result-empty",events:{"click .js-create-room":"showCreateRoomModal"},showCreateRoomModal:function(){parent.location.hash="#createroom"},template:g}),n=u.ItemView.extend({events:{click:"handleSelect"},modelEvents:{select:"handleSelect","change:selected":"toggleSelected"},template:p,className:"result",initialize:function(){this.toggleSelected()},toggleSelected:function(){var e=this.model.get("selected");this.$el.toggleClass("selected",!!e)},handleSelect:function(){a.trigger("focus.request.chat"),a.trigger("track-event","search_result_selected"),this.selectItem()}}),w=n.extend({serializeData:function(){var e={},t=this.model.get("url").replace(/^\//,"");return e.selected=this.model.get("selected"),e.detail=this.model.get("githubType"),e.text=t,e.avatarUrl=l({uri:t},48),e},selectItem:function(){this.model.get("exists")?a.trigger("navigation",this.model.get("url"),"chat",this.model.get("uri"),null):parent.location.hash="#confirm/"+this.model.get("uri")}}),y=n.extend({behaviors:{Widgets:{},Highlight:{}},serializeData:function(){var e=this.model,t=e.get("fromUser"),n=t&&t.username||"",i=e.get("sent");return{selected:e.get("selected"),detail:n,sent:i,text:e.get("text"),avatarUrl:t&&t.avatarUrlSmall}},selectItem:function(){var e=this.model.get("id");a.trigger("chatCollectionView:loadAndHighlight",e,{highlights:this.model.get("highlights")})}}),_=u.CollectionView.extend({childView:w,emptyView:t,initialize:function(){var e=document.querySelector("#search-results");this.rollers=new s(e,this.el,{doNotTrack:!0})},scrollTo:function(e){this.rollers.scrollToElement(e.el,{centre:!0})}}),x=u.CollectionView.extend({emptyView:e,childView:y,initialize:function(){var e=document.querySelector("#search-results");this.rollers=new s(e,this.el,{doNotTrack:!0})},scrollTo:function(e){this.rollers.scrollToElement(e.el,{centre:!0})}}),k=u.Controller.extend({initialize:function(e){this.collection=e.collection,this.listenTo(this.collection,"add remove reset sync",this.reset)},swap:function(e){e&&(this.selected&&this.selected.set("selected",!1),e.set("selected",!0),this.selected=e)},next:function(){var e=this.collection,t=e.indexOf(this.selected);t<e.length-1&&this.swap(e.at(t+1))},prev:function(){var e=this.collection,t=e.indexOf(this.selected);t>0&&this.swap(e.at(t-1))},current:function(){return this.selected},reset:function(){this.swap(this.collection.at(0))}}),T=u.Controller.extend({initialize:function(){this.cache=new c.Collection([]),this.messages=new f.ChatSearchCollection([],{}),this.cache.comparator=function(e){return-(e.get("boost")+Date.parse(e.get("lastAccessTime")).toString())}},fetchLocalRooms:function(){var e=i.Deferred();return a.triggerParent("troupeRequest",{}),a.once("troupesResponse",e.resolve),e},fetchMessages:function(e){var t=i.Deferred(),n=this.messages,o=e.query,r=this;return n.reset(),n.fetchSearch(o,function(e){if(e)return a.trigger("track-event","search_messages_failed"),t.reject(e);var i=n.models.map(function(e){return e.set("priority",3),e});r.trigger("loaded:messages",i,o),t.resolve()},this),t},fetchRooms:function(e){var t=i.Deferred(),n=e.query,r="undefined"==typeof e.limit?3:e.limit,s=o.get("/v1/user",{q:n,limit:r,type:"gitter"}),l=o.user.get("/repos",{q:n,limit:r}),u=o.get("/v1/rooms",{q:n,limit:r});return i.when(s,l,u).done(function(e,i,o){e[0].results.map(function(e){e.exists=!0}),o[0].results.map(function(e){e.exists=!0});var r=[e,i,o].map(function(e){return e[0].results}).reduce(function(e,t){return e.concat(t)},[]).map(function(e){return e?(e.room&&(e.id=e.room.id),e.url=e.url||"/"+e.uri,e.priority=1,e.query=n,new c.Model(e)):void 0}).filter(this.notCurrentRoom);this.trigger("loaded:rooms",r,n),t.resolve(r)}.bind(this)).fail(function(e){a.trigger("track-event","search_rooms_failed"),t.reject(e)}),t},notCurrentRoom:function(e){return e.id!==r.getTroupeId()},formatRooms:function(e){return e.filter(this.notCurrentRoom).map(function(e){return e.exists=!0,e.priority=e.githubType.match(/^ORG$/)?0:1,e.boost=e.githubType.match(/^ORG$/)?1:0,e})},cacheRooms:function(e){var t=this.cache;return t.set(this.formatRooms(e)),i.Deferred().resolve(t)},clearCache:function(){this.cache.reset(),this.trigger("cache:clear",{})},getLocalRooms:function(){var e=i.Deferred(),t=this.cache;return d.isEmpty(t.models)?this.fetchLocalRooms().then(this.cacheRooms.bind(this)).then(e.resolve):e.resolve(t),e},local:function(e){var t=i.Deferred();return e?(this.getLocalRooms().then(function(n){var i=v({query:e,fields:["url","name"]});n=n.filter(i).slice(0,3).map(function(t){return t.set("query",e),t}),this.trigger("loaded:rooms",n,e),t.resolve()}.bind(this)),t):t.resolve()},remote:function(e){var t=i.Deferred();return e?(i.when(this.fetchMessages({query:e}),this.fetchRooms({query:e})).done(t.resolve).fail(t.reject),t):t.resolve()}}),C=u.LayoutView.extend({behaviors:{Isomorphic:{roomsRegion:{el:".js-search-rooms",init:"initRoomsRegion"},messagesRegion:{el:".js-search-messages",init:"initMessagesRegion"}}},keyboardEvents:{"focus.search":"activate","search.escape":"onEscape","search.prev":"handlePrev","search.next":"handleNext","search.go":"handleGo"},serializeData:function(){return{isOneToOne:r.troupe().get("oneToOne"),troupeName:r.troupe().get("name")}},initialize:function(){var e=d.debounce(this.run.bind(this),250);this.listenTo(this.model,"change:searchTerm",function(){e()}),this.listenTo(this.model,"change:active",function(e,t){t?(this.triggerMethod("search:expand"),window.innerWidth<880&&a.triggerParent("menu:hide")):(this.model.set("searchTerm",""),this.hide(),this.triggerMethod("search:collapse"),a.triggerParent("menu:show"),a.trigger("chatCollectionView:clearHighlight"))});var t=new c.Collection([]);t.comparator="priority",this.rooms=new c.FilteredCollection(null,{model:c.Model,collection:t}),this.chats=new c.FilteredCollection(null,{model:c.Model,collection:t}),this.rooms.setFilter(function(e){return!!e.get("url")}),this.chats.setFilter(function(e){return!!e.get("text")}),this.navigation=new k({collection:t}),this.search=new T({}),this.listenTo(this.search,"cache:clear",function(){t.reset()}),this.listenTo(this.search,"loaded:rooms",function(e){var n=this.rooms.models.filter(function(e){return e.get("query")!==this.model.get("searchTerm")},this);t.remove(n),t.add(e),this.rooms.resetWith(t)}),this.listenTo(this.search,"loaded:messages",function(e){t.remove(this.chats.models),t.set(e,{remove:!1}),this.chats.resetWith(t)}),this.listenTo(r.troupe(),"change:id",function(){t.reset(),this.model.set("active",!1),this.$el.find(".js-troupe-name")[0].innerHTML=r.troupe().get("name")})},initRoomsRegion:function(e){return new _(e({collection:this.rooms}))},initMessagesRegion:function(e){return new x(e({collection:this.chats}))},isSearchTermEmpty:function(){return d.isEmpty(this.model.get("searchTerm"))},activate:function(){this.model.set("active",!0)},onEscape:function(){this.model.set("active",!1)},hide:function(){this.triggerMethod("search:hide"),this.search.clearCache()},run:function(){if(this.isSearchTermEmpty())return this.hide();var e=this.model.get("searchTerm"),t=function(){this.model.set("isLoading",!1),a.trigger("track-event","search_complete")}.bind(this);this.model.set("isLoading",!0),i.when(this.search.local(e),this.search.remote(e)).then(t).fail(t),this.triggerMethod("search:show")},handlePrev:function(e){e.preventDefault(),this.isSearchTermEmpty()||(this.navigation.prev(),this.scroll())},handleNext:function(e){e.preventDefault(),this.isSearchTermEmpty()||(this.navigation.next(),this.scroll())},handleGo:function(){if(!this.isSearchTermEmpty()){var e=this.navigation.current();e&&e.trigger("select")}},scroll:function(){}});return h.mixin(C,b),C}()},function(e,t,n){"use strict";var i=n(207);e.exports=function(e,t){var n=i(e,t);return n.src}},function(e,t,n){"use strict";var i=n(3),o=n(39),r=n(38),a=n(68),s=n(2),l=n(66),c=n(116),u=i.Collection.extend({model:o.ChatModel,modelName:"chat",url:r.room.channelGenerator("/chatMessages"),queryText:"",getQuery:function(){return{q:this.queryText,lang:s.lang()}},parse:function(e){return e.forEach(function(e){e.burstFinal=!0,e.burstStart=!0}),e},fetchSearch:function(e,t,n){this.queryText=e,this.atBottom=!1,this.fetchLatest({},t,n)},sync:c.sync});a.mixin(u,l),e.exports={ChatSearchCollection:u}},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){return" result-room "},3:function(e,t,n,i){return" result-message "},5:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'    <p class="result-detail"><small>'+a((o=null!=(o=t.detail||(null!=e?e.detail:e))?o:r,"function"==typeof o?o.call(e,{name:"detail",hash:{},data:i}):o))+"  &bull; "+a((t.widget||e&&e.widget||r).call(e,"timeago",{name:"widget",hash:{locale:null!=e?e.locale:e,lang:null!=e?e.lang:e,time:null!=e?e.sent:e},data:i}))+"</small></p>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a,s=t.helperMissing,l="function",c=this.escapeExpression,u=t.blockHelperMissing,d="<div class='result-avatar'>\n  <img src=\""+c((r=null!=(r=t.avatarUrl||(null!=e?e.avatarUrl:e))?r:s,typeof r===l?r.call(e,{name:"avatarUrl",hash:{},data:i}):r))+"\">\n</div>\n<div class='result-content ";return r=null!=(r=t.sent||(null!=e?e.sent:e))?r:s,a={name:"sent",hash:{},fn:this.noop,inverse:this.program(1,i,0),data:i},o=typeof r===l?r.call(e,a):r,t.sent||(o=u.call(e,o,a)),null!=o&&(d+=o),d+=" ",r=null!=(r=t.sent||(null!=e?e.sent:e))?r:s,a={name:"sent",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i},o=typeof r===l?r.call(e,a):r,t.sent||(o=u.call(e,o,a)),null!=o&&(d+=o),d+"'>\n"+(null!=(o=t["if"].call(e,null!=e?e.sent:e,{name:"if",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?o:"")+"  "+c((r=null!=(r=t.text||(null!=e?e.text:e))?r:s,typeof r===l?r.call(e,{name:"text",hash:{},data:i}):r))+"\n</div>\n"},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return"Nope, nothing :(\n"},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'Shucks! I got nothing. Why not <a class="js-create-room" href="#">create a room</a>?\n'},useData:!0})},function(e,t){"use strict";e.exports=function(){function e(e){var t=(""+e).trim().toLowerCase(),n=t.split(/[\s\'']+/).filter(function(e){return!!e}).filter(function(e,t){return 10>t});return n.map(function(e){return e=e.replace(/\*|\+|\$/g,""),new RegExp("\\b"+e,"i")})}function t(e,t){return t.get?e.map(function(e){return t.get(e)}).filter(function(e){return!!e}):e.map(function(e){return t[e]}).filter(function(e){return!!e})}return function(n){function i(){}var o=n.query,r=n.fields;if(!o)return i;var a=e(o);return function(e){var n=r?t(r,e):[e];return n.some(function(e){return a.every(function(t){return e.match(t)})})}}}()},function(e,t,n){"use strict";var i=n(118),o=n(338),r=i.ItemView.extend({template:o,className:"search-input",ui:{input:".js-search-input",clearIcon:".js-search-clear-icon",searchIcon:".js-search-icon"},events:{"click .js-activate-search":"activate","click @ui.clearIcon":"clearSearchTerm","click @ui.input":"activate","blur @ui.input":"onBlur","change @ui.input":"handleChange","input @ui.input":"handleChange"},modelEvents:{"change:isLoading":"onResultsLoading","change:active":"onActiveChange"},activate:function(){this.model.set("active",!0)},onBlur:function(){this.ui.input.val()||this.model.set("active",!1)},clearSearchTerm:function(){this.model.set("searchTerm",""),this.ui.input.val(""),this.ui.input.focus()},handleChange:function(e){this.model.set("searchTerm",e.target.value.trim())},onResultsLoading:function(e,t){this.ui.searchIcon.toggleClass("fetching",t)},onActiveChange:function(e,t){this.$el.toggleClass("active",t);var n=this.ui.input;t&&!n.is(":focus")?n.focus():n.val("")}});e.exports=r},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<i class="js-activate-search search__toggle octicon octicon-search"></i>\n<div class=\'search-input\'>\n  <i class="js-search-icon search-input__icon octicon octicon-search"></i>\n  <i class="js-search-clear-icon search-input__clear icon-cancel-circle"></i>\n  <input type="search" class=\'js-search-input search-input-field\' placeholder=\'Search\' />\n</div>\n'},useData:!0})},function(e,t,n){"use strict";var i=n(340),o=n(118),r=n(2),a=n(341);e.exports=o.ItemView.extend({template:i,modelEvents:{change:"render"},constructor:function(){this.model=new a,this.roomModel=r.troupe(),o.ItemView.prototype.constructor.apply(this,arguments)},initialize:function(e,t){"REPO"===this.roomModel.get("githubType")&&this.model.fetch({data:{repo:this.roomModel.get("uri")}}),this.listenTo(this.roomModel,"change:id",this.onRoomChange,this)},onRoomChange:function(e){if("REPO"===e.get("githubType")){var t=e.get("uri");this.model.fetch({data:{repo:t}})}}})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){var o,r=t.helperMissing,a="function",s=this.escapeExpression;return'      <a href="'+s((o=null!=(o=t.html_url||(null!=e?e.html_url:e))?o:r,typeof o===a?o.call(e,{name:"html_url",hash:{},data:i}):o))+'/issues" target="_blank"><strong class="vcard-stat-count">'+s((o=null!=(o=t.open_issues||(null!=e?e.open_issues:e))?o:r,typeof o===a?o.call(e,{name:"open_issues",hash:{},data:i}):o))+"</strong>\n      issues</a>&nbsp;\n"},3:function(e,t,n,i){var o;return'        <li class="github-wiki"><a href="'+this.escapeExpression((o=null!=(o=t.html_url||(null!=e?e.html_url:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"html_url",hash:{},data:i}):o))+'/wiki" target="_blank">View the wiki</a></li>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s="function",l=this.escapeExpression,c=this.lambda;return'<div class="trpRepoInfoContainer">\n  <h2>'+l((r=null!=(r=t.name||(null!=e?e.name:e))?r:a,typeof r===s?r.call(e,{name:"name",hash:{},data:i}):r))+"</h2>\n  <p>"+l((r=null!=(r=t.description||(null!=e?e.description:e))?r:a,typeof r===s?r.call(e,{name:"description",hash:{},data:i}):r))+" <small>"+l((r=null!=(r=t.language||(null!=e?e.language:e))?r:a,typeof r===s?r.call(e,{name:"language",hash:{},data:i}):r))+'</small></p>\n  <p>by <a href="http://github.com/'+l(c(null!=(o=null!=e?e.owner:e)?o.login:o,e))+'">'+l(c(null!=(o=null!=e?e.owner:e)?o.login:o,e))+'</a></p>\n  <div class="vcard-stats">\n'+(null!=(o=t["if"].call(e,null!=e?e.has_issues:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+'      <a href="'+l((r=null!=(r=t.html_url||(null!=e?e.html_url:e))?r:a,typeof r===s?r.call(e,{name:"html_url",hash:{},data:i}):r))+'/watchers" target="_blank"><strong class="vcard-stat-count">'+l((r=null!=(r=t.subscribers_count||(null!=e?e.subscribers_count:e))?r:a,typeof r===s?r.call(e,{name:"subscribers_count",hash:{},data:i}):r))+'</strong>\n      watchers</a>&nbsp;\n      <strong class="vcard-stat-count">'+l((r=null!=(r=t.stargazers_count||(null!=e?e.stargazers_count:e))?r:a,typeof r===s?r.call(e,{name:"stargazers_count",hash:{},data:i}):r))+"</strong>\n      stars &nbsp;\n  </div>\n"+(null!=(o=t["if"].call(e,null!=e?e.has_wiki:e,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?o:"")+"\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var i=n(3),o=n(116),r=i.Model.extend({url:"/v1/repo-info",sync:o.sync});e.exports=r},function(e,t,n){"use strict";var i=n(4),o=n(118),r=n(11),a=n(311),s=n(315),l=n(318),c=n(16)("app:activity-composite-view"),u=n(343),d=n(344),h=n(345),f=n(346),p=n(347),m=n(348),g=n(349),v=n(350),b=n(351),w=n(352),y=n(353),_=n(354),x=n(355),k=n(356),T=n(357),C=n(358),E=n(359),S=n(360),I=n(361),M=n(362),R=n(2);n(243),n(154),e.exports=function(){var e={bitbucket:y,huboard:_,jenkins:x,travis:k,sprintly:T,trello:C},t={push:u,issues:d,issue_comment:h,commit_comment:f,pull_request:p,gollum:m,fork:g,member:v,"public":b,watch:w},n=o.ItemView.extend({tagName:"li",modelEvents:{change:"render"},behaviors:{Widgets:{}},initialize:function(){var n=this.model.get("meta"),i=n.service;if("github"==i){var o=n.event;this.template=t[o]}else n.prerendered?this.template=E:this.template=e[i]},serializeData:function(){try{var e=this.model.get("meta"),t=this.model.get("payload"),n=this.model.get("sent"),o=this.model.get("html"),a={meta:e,payload:t,sent:n,html:o},s=e.prerendered?{}:M(e,t);return i.extend(a,s)}catch(l){var u=this.model&&this.model.attributes;return r.trigger("bugreport",l,{extra:u}),c("Err rendering activity item: error=%s, stack=%s, data=%j",l.message,l.stack,u),{}}},onRender:function(){a.decorate(this),s.decorate(this),l.decorate(this)}}),L=o.ItemView.extend({tagName:"li",className:"activity-tip",template:I,serializeData:function(){var e=R().isNativeDesktopApp,t=e?R.env("basePath")+R.troupe().get("url"):"",n=t+"#integrations";return{integrationsUrl:n,isNativeDesktopApp:e}}}),O=o.CompositeView.extend({template:S,className:"gtrActivityContainer",childViewContainer:"#activity-list",childView:n,collectionEvents:{"add reset sync reset loaded loading":"_showHideHeader"},childViewOptions:function(e){if(e&&e.id){var t=this.$el.find(".model-id-"+e.id)[0];if(t)return{el:t}}},getEmptyView:function(){return R.isTroupeAdmin()?L:void 0},ui:{header:"#activity-header"},onRender:function(){this._showHideHeader()},_showHideHeader:function(){var e=0===this.collection.length&&this.collection.loading;this.$el.toggleClass("loading",e);var t=!(R.inOneToOneTroupeContext()||!R.isTroupeAdmin()&&!this.collection.length);this.ui.header.toggle(t)},_renderTemplate:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e),this.triggerMethod("before:render:template");var t=this.getTemplate();if(t!==!1){var n=o.Renderer.render(t,e,this);this.attachElContent(n)}this.bindUIElements(),this.triggerMethod("render:template")}});return O}()},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i,o,r){var a,s=t.helperMissing,l="function",c=this.escapeExpression;return'<span data-link-type="commit" data-commit-sha="'+c((a=null!=(a=t.id||(null!=e?e.id:e))?a:s,typeof a===l?a.call(e,{name:"id",hash:{},data:i}):a))+'" data-commit-repo="'+c(this.lambda(null!=r[1]?r[1].repo:r[1],e))+'" class="commit">'+c((a=null!=(a=t.short_message||(null!=e?e.short_message:e))?a:s,typeof a===l?a.call(e,{name:"short_message",hash:{},data:i}):a))+"</span> "},3:function(e,t,n,i){var o;return"and "+this.escapeExpression((o=null!=(o=t.hidden_commit_count||(null!=e?e.hidden_commit_count:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"hidden_commit_count",hash:{},data:i}):o))+" more "},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i,o,r){var a,s,l=t.helperMissing,c=this.escapeExpression,u=this.lambda;return'<div class="github-push">\n  <i class=\'octicon octicon-repo-push activity-item__icon\'></i>\n  <div class="activity-time">'+c((t.widget||e&&e.widget||l).call(e,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=e?e.sent:e},data:i}))+'</div>\n\n  <div class="gtrActivityItemText">\n    <p class="activity-commit">\n      <span class=\'mention\' data-link-type="mention" data-screen-name="'+c(u(null!=(a=null!=(a=null!=e?e.payload:e)?a.pusher:a)?a.name:a,e))+'">'+c(u(null!=(a=null!=(a=null!=e?e.payload:e)?a.pusher:a)?a.name:a,e))+"</span> on "+c((s=null!=(s=t.branch_name||(null!=e?e.branch_name:e))?s:l,"function"==typeof s?s.call(e,{name:"branch_name",hash:{},data:i}):s))+'\n    </p>\n    <p class="activity-commit">\n      '+(null!=(a=t.each.call(e,null!=e?e.commits:e,{name:"each",hash:{},fn:this.program(1,i,0,o,r),inverse:this.noop,data:i}))?a:"")+(null!=(a=t["if"].call(e,null!=e?e.hidden_commit_count:e,{name:"if",hash:{},fn:this.program(3,i,0,o,r),inverse:this.noop,data:i}))?a:"")+'<a href="'+c(u(null!=(a=null!=e?e.payload:e)?a.compare:a,e))+'" target="_blank" style="opacity: 0.6">(compare)</a>\n    </p>\n  </div>\n</div>\n'},useData:!0,useDepths:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div class="github-issue github-issue-'+a(r(null!=(o=null!=e?e.payload:e)?o.action:o,e))+'">\n  <i class=\'octicon octicon-issue-opened activity-item__icon\'></i>\n  <div class="activity-time">'+a((t.widget||e&&e.widget||t.helperMissing).call(e,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=e?e.sent:e},data:i}))+'</div>\n\n  <div class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+a(r(null!=(o=null!=(o=null!=e?e.payload:e)?o.sender:o)?o.login:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.payload:e)?o.sender:o)?o.login:o,e))+"</span> "+a(r(null!=(o=null!=e?e.payload:e)?o.action:o,e))+' <span class="issue '+a(r(null!=(o=null!=(o=null!=e?e.payload:e)?o.issue:o)?o.state:o,e))+'" data-link-type="issue" data-issue="'+a(r(null!=(o=null!=(o=null!=e?e.payload:e)?o.issue:o)?o.number:o,e))+'" data-issue-repo="'+a(r(null!=(o=null!=(o=null!=e?e.payload:e)?o.repository:o)?o.full_name:o,e))+'">#'+a(r(null!=(o=null!=(o=null!=e?e.payload:e)?o.issue:o)?o.number:o,e))+"</span></div>\n</div>\n";
},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.escapeExpression,a=this.lambda;return'<div class="github-comment">\n  <i class="octicon octicon-comment activity-item__icon"></i>\n  <div class="activity-time">'+r((t.widget||e&&e.widget||t.helperMissing).call(e,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=e?e.sent:e},data:i}))+'</div>\n\n  <div class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.sender:o)?o.login:o,e))+'">'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.sender:o)?o.login:o,e))+'</span> commented <span class="issue '+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.issue:o)?o.state:o,e))+'" data-link-type="issue" data-issue="'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.issue:o)?o.number:o,e))+'" data-issue-repo="'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.repository:o)?o.full_name:o,e))+'">#'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.issue:o)?o.number:o,e))+"</span></div>\n\n</div>\n"},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.escapeExpression,a=this.lambda;return'<div class="github-comment">\n  <i class="octicon octicon-comment activity-item__icon"></i>\n  <div class="activity-time">'+r((t.widget||e&&e.widget||t.helperMissing).call(e,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=e?e.sent:e},data:i}))+'</div>\n\n  <div class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+r(a(null!=(o=null!=e?e.meta:e)?o.user:o,e))+'">'+r(a(null!=(o=null!=e?e.meta:e)?o.user:o,e))+'</span> commented on <span data-link-type="commit" data-commit-sha="'+r(a(null!=(o=null!=e?e.commit:e)?o.id:o,e))+'" data-commit-repo="'+r(a(null!=(o=null!=e?e.meta:e)?o.repo:o,e))+'" class="commit">'+r(a(null!=(o=null!=e?e.commit:e)?o.short_sha:o,e))+"</span></span>\n</div>\n"},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.escapeExpression,a=this.lambda;return'<div class="github-pull-request">\n  <i class=\'octicon octicon-git-pull-request activity-item__icon\'></i>\n  <div class="activity-time">'+r((t.widget||e&&e.widget||t.helperMissing).call(e,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=e?e.sent:e},data:i}))+'</div>\n\n  <div class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.sender:o)?o.login:o,e))+'">'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.sender:o)?o.login:o,e))+"</span> "+r(a(null!=(o=null!=e?e.payload:e)?o.action:o,e))+' <a class="issue '+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.pull_request:o)?o.state:o,e))+'" href="'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.pull_request:o)?o.html_url:o,e))+'" target="_blank" data-link-type="issue" data-issue="'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.pull_request:o)?o.number:o,e))+'" data-issue-repo="'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.repository:o)?o.full_name:o,e))+'">#'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.pull_request:o)?o.number:o,e))+"</a></div>\n</div>\n"},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l=this.lambda,c="function";return'<div class="github-wiki">\n  <i class=\'octicon octicon-book activity-item__icon\'></i>\n  <div class="activity-time">'+s((t.widget||e&&e.widget||a).call(e,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=e?e.sent:e},data:i}))+'</div>\n\n  <div class="gtrActivityItemText"><a href="https://github.com/'+s(l(null!=(o=null!=(o=null!=e?e.payload:e)?o.sender:o)?o.login:o,e))+'" target="_blank"><span class=\'mention\' data-link-type="mention" data-screen-name="'+s(l(null!=(o=null!=(o=null!=e?e.payload:e)?o.sender:o)?o.login:o,e))+'">'+s(l(null!=(o=null!=(o=null!=e?e.payload:e)?o.sender:o)?o.login:o,e))+'</span></a> updated the wiki</div>\n  <div class="gtrActivityItemText activity-detail"><a href="'+s((r=null!=(r=t.wiki_url||(null!=e?e.wiki_url:e))?r:a,typeof r===c?r.call(e,{name:"wiki_url",hash:{},data:i}):r))+'" target="_blank">'+s((r=null!=(r=t.wiki_page||(null!=e?e.wiki_page:e))?r:a,typeof r===c?r.call(e,{name:"wiki_page",hash:{},data:i}):r))+"</a></div>\n</div>\n"},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.escapeExpression,a=this.lambda;return'<div class="github-fork">\n  <i class=\'octicon octicon-repo-forked activity-item__icon\'></i>\n  <div class="activity-time">'+r((t.widget||e&&e.widget||t.helperMissing).call(e,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=e?e.sent:e},data:i}))+'</div>\n  <div class="gtrActivityItemText">\n    <a href="https://github.com/'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.sender:o)?o.login:o,e))+'" target="_blank"><span class=\'mention\' data-link-type="mention" data-screen-name="'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.sender:o)?o.login:o,e))+'">'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.sender:o)?o.login:o,e))+'</span></a> forked<br>\n    <span class="activity-detail"> <a href="'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.forkee:o)?o.html_url:o,e))+'" target="_blank">'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.forkee:o)?o.full_name:o,e))+"</a></span>\n  </div>\n</div>\n"},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.escapeExpression,a=this.lambda;return'<div class="github-member-add">\n  <i class=\'octicon octicon-person activity-item__icon\'></i>\n  <div class="activity-time">'+r((t.widget||e&&e.widget||t.helperMissing).call(e,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=e?e.sent:e},data:i}))+'</div>\n  <div class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.member:o)?o.login:o,e))+'">'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.member:o)?o.login:o,e))+"</span> "+r(a(null!=(o=null!=e?e.payload:e)?o.action:o,e))+" as member</div>\n</div>\n"},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.escapeExpression,a=this.lambda;return'<div class="github-public">\n  <i class=\'octicon octicon-repo activity-item__icon\'></i>\n  <div class="activity-time">'+r((t.widget||e&&e.widget||t.helperMissing).call(e,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=e?e.sent:e},data:i}))+'</div>\n\n  <div class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.sender:o)?o.login:o,e))+'">'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.sender:o)?o.login:o,e))+'</span> made <a href="'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.repository:o)?o.html_url:o,e))+'" target="_blank">'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.repository:o)?o.full_name:o,e))+'</a> public</div>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.escapeExpression,a=this.lambda;return'<div class="github-watch">\n  <i class=\'octicon octicon-star activity-item__icon\'></i>\n  <div class="activity-time">'+r((t.widget||e&&e.widget||t.helperMissing).call(e,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=e?e.sent:e},data:i}))+'</div>\n  <div class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.sender:o)?o.login:o,e))+'">'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.sender:o)?o.login:o,e))+'</span> starred <a href="'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.repository:o)?o.html_url:o,e))+'" target="_blank">'+r(a(null!=(o=null!=(o=null!=e?e.payload:e)?o.repository:o)?o.full_name:o,e))+"</a></div>\n</div>\n"},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return"      "+a(r(null!=(o=null!=e?e.first_commit:e)?o.message:o,e))+' <a href="'+a(r(null!=(o=null!=e?e.first_commit:e)?o.url:o,e))+'" target="_blank" style="opacity: 0.6">(compare)</a>\n'},3:function(e,t,n,i){var o;return"      "+this.escapeExpression((o=null!=(o=t.commits_count||(null!=e?e.commits_count:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"commits_count",hash:{},data:i}):o))+" commits\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.escapeExpression,a=this.lambda;return'<div class="bitbucket">\n  <div class="activity-item__icon"><img src="/_s/l/images/icon-bitbucket@2x.png" width="16" height="16"></div>\n  <div class="activity-time">'+r((t.widget||e&&e.widget||t.helperMissing).call(e,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=e?e.sent:e},data:i}))+'</div>\n\n  <div class="gtrActivityItemText"><a href="https://bitbucket.com/'+r(a(null!=(o=null!=e?e.meta:e)?o.user:o,e))+'" target="_blank">'+r(a(null!=(o=null!=e?e.meta:e)?o.user:o,e))+'</a> pushed to <a href="https://bitbucket.org/'+r(a(null!=(o=null!=e?e.meta:e)?o.repo:o,e))+'" target="_blank">'+r(a(null!=(o=null!=e?e.meta:e)?o.repo:o,e))+'</a><br>\n    <span class="activity-commit">\n'+(null!=(o=t["if"].call(e,null!=e?e.is_single_commit:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.program(3,i,0),data:i}))?o:"")+"    </span>\n  </div>\n</div>\n"},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'to <span class=\'mention\' data-link-type="mention" data-screen-name="'+a(r(null!=(o=null!=e?e.meta:e)?o.assignee:o,e))+'">'+a(r(null!=(o=null!=e?e.meta:e)?o.assignee:o,e))+"</span>"},3:function(e,t,n,i){var o;return this.escapeExpression((o=null!=(o=t.context||(null!=e?e.context:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"context",hash:{},data:i}):o))},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.escapeExpression,a=this.lambda;return'<div class="huboard">\n  <div class="service-sprite huboard-logo activity-item__icon"></div>\n  <div class="activity-time">'+r((t.widget||e&&e.widget||t.helperMissing).call(e,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=e?e.sent:e},data:i}))+'</div>\n\n  <div class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+r(a(null!=(o=null!=e?e.meta:e)?o.user:o,e))+'">'+r(a(null!=(o=null!=e?e.meta:e)?o.user:o,e))+"</span> "+r(a(null!=(o=null!=e?e.meta:e)?o.action:o,e))+' <span class="issue" data-link-type="issue" data-issue="'+r(a(null!=(o=null!=e?e.meta:e)?o.number:o,e))+'" data-issue-repo="'+r(a(null!=(o=null!=e?e.meta:e)?o.repo:o,e))+'">#'+r(a(null!=(o=null!=e?e.meta:e)?o.number:o,e))+"</span> "+(null!=(o=t["if"].call(e,null!=(o=null!=e?e.meta:e)?o.assignee:o,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.program(3,i,0),data:i}))?o:"")+"</div>\n\n</div>\n"},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s="function",l=this.escapeExpression,c=this.lambda;return'<div class="build-'+l((r=null!=(r=t.build_status||(null!=e?e.build_status:e))?r:a,typeof r===s?r.call(e,{name:"build_status",hash:{},data:i}):r))+'">\n  <div class="activity-time">'+l((t.widget||e&&e.widget||a).call(e,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=e?e.sent:e},data:i}))+'</div>\n\n  <div class="gtrActivityItemText">Jenkins <a href="'+l(c(null!=(o=null!=(o=null!=e?e.payload:e)?o.build:o)?o.full_url:o,e))+'" target="_blank">'+l(c(null!=(o=null!=e?e.payload:e)?o.name:o,e))+"</a> "+l((r=null!=(r=t.build_status||(null!=e?e.build_status:e))?r:a,typeof r===s?r.call(e,{name:"build_status",hash:{},data:i}):r))+'</div>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s="function",l=this.escapeExpression,c=this.lambda;return'<div class="build-'+l((r=null!=(r=t.build_status||(null!=e?e.build_status:e))?r:a,typeof r===s?r.call(e,{name:"build_status",hash:{},data:i}):r))+'">\n  <div class="service-sprite travis-logo activity-item__icon"></div>\n  <div class="activity-time">'+l((t.widget||e&&e.widget||a).call(e,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=e?e.sent:e},data:i}))+'</div>\n\n  <div class="gtrActivityItemText">Travis <a href="'+l(c(null!=(o=null!=e?e.payload:e)?o.compare_url:o,e))+'" target="_blank">'+l(c(null!=(o=null!=(o=null!=e?e.payload:e)?o.repository:o)?o.owner_name:o,e))+"/"+l(c(null!=(o=null!=(o=null!=e?e.payload:e)?o.repository:o)?o.name:o,e))+"</a> <small>("+l(c(null!=(o=null!=e?e.payload:e)?o.branch:o,e))+')</small> <a href="'+l(c(null!=(o=null!=e?e.payload:e)?o.build_url:o,e))+'" target="_blank">'+l((r=null!=(r=t.build_status||(null!=e?e.build_status:e))?r:a,typeof r===s?r.call(e,{name:"build_status",hash:{},data:i}):r))+'</a></div>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){var o;return" "+this.escapeExpression(this.lambda(null!=(o=null!=(o=null!=e?e.payload:e)?o.attributes:o)?o.title:o,e))+" "},3:function(e,t,n,i){var o;return" "+this.escapeExpression(this.lambda(null!=(o=null!=(o=null!=(o=null!=e?e.payload:e)?o.attributes:o)?o.item:o)?o.title:o,e))+" "},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l=this.lambda;return'<div class="sprintly">\n  <div class="service-sprite sprintly-logo activity-item__icon"></div>\n  <div class="activity-time">'+s((t.widget||e&&e.widget||a).call(e,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=e?e.sent:e},data:i}))+'</div>\n\n  <div class="gtrActivityItemText">'+s(l(null!=(o=null!=(o=null!=(o=null!=e?e.payload:e)?o.attributes:o)?o.created_by:o)?o.first_name:o,e))+" "+s(l(null!=(o=null!=(o=null!=(o=null!=e?e.payload:e)?o.attributes:o)?o.created_by:o)?o.last_name:o,e))+" "+s((r=null!=(r=t.sprintly_action||(null!=e?e.sprintly_action:e))?r:a,"function"==typeof r?r.call(e,{name:"sprintly_action",hash:{},data:i}):r))+'<br>\n    <div class="activity-detail"><a href="'+s(l(null!=(o=null!=(o=null!=e?e.payload:e)?o.attributes:o)?o.short_url:o,e))+'" target="_blank">\n      '+(null!=(o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.payload:e)?o.attributes:o)?o.title:o,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+"\n      "+(null!=(o=t["if"].call(e,null!=(o=null!=(o=null!=(o=null!=e?e.payload:e)?o.attributes:o)?o.item:o)?o.title:o,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?o:"")+"\n    </a></div>\n  </div>\n</div>\n"},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return"      <br>\n      <span>("+a(r(null!=(o=null!=(o=null!=(o=null!=(o=null!=e?e.payload:e)?o.action:o)?o.data:o)?o.listBefore:o)?o.name:o,e))+" &rarr; "+a(r(null!=(o=null!=(o=null!=(o=null!=(o=null!=e?e.payload:e)?o.action:o)?o.data:o)?o.listAfter:o)?o.name:o,e))+")</span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s="function",l=this.escapeExpression,c=this.lambda;return'<div class="trello-card-'+l((r=null!=(r=t.trello_action||(null!=e?e.trello_action:e))?r:a,typeof r===s?r.call(e,{name:"trello_action",hash:{},data:i}):r))+'">\n  <div class="activity-item__icon"><img src="/_s/l/images/icon-trello@2x.png" width="16" height="16"></div>\n  <div class="activity-time">'+l((t.widget||e&&e.widget||a).call(e,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=e?e.sent:e},data:i}))+'</div>\n\n  <div class="gtrActivityItemText">'+l(c(null!=(o=null!=(o=null!=(o=null!=e?e.payload:e)?o.action:o)?o.memberCreator:o)?o.fullName:o,e))+" "+l((r=null!=(r=t.trello_action||(null!=e?e.trello_action:e))?r:a,typeof r===s?r.call(e,{name:"trello_action",hash:{},data:i}):r))+'<br>\n    <div class="activity-detail">\n    <a href="https://trello.com/c/'+l(c(null!=(o=null!=(o=null!=(o=null!=(o=null!=e?e.payload:e)?o.action:o)?o.data:o)?o.card:o)?o.shortLink:o,e))+'" target="_blank">'+l(c(null!=(o=null!=(o=null!=(o=null!=(o=null!=e?e.payload:e)?o.action:o)?o.data:o)?o.card:o)?o.name:o,e))+"</a>\n"+(null!=(o=t["if"].call(e,null!=(o=null!=(o=null!=(o=null!=e?e.payload:e)?o.action:o)?o.data:o)?o.listBefore:o,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+'  </div>\n  </div>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=this.lambda,s=this.escapeExpression,l=t.helperMissing;return'<div class="prerendered '+s(a(null!=(o=null!=e?e.meta:e)?o.errorLevel:o,e))+'">\n  <div class="service-sprite '+s(a(null!=(o=null!=e?e.meta:e)?o.service:o,e))+"-"+s(a(null!=(o=null!=e?e.meta:e)?o.icon:o,e))+' activity-item__icon"></div>\n  <div class="activity-time">'+s((t.widget||e&&e.widget||l).call(e,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=e?e.sent:e},data:i}))+'</div>\n  <div class="gtrActivityItemText">'+(null!=(r=null!=(r=t.html||(null!=e?e.html:e))?r:l,o="function"==typeof r?r.call(e,{name:"html",hash:{},data:i}):r)?o:"")+"</div>\n</div>\n"},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r;return'<h5 class="trpToolbarHeader" id="activity-header">Activity</h5>\n\n<div class="trpTroupeRelatedContent">\n  <div class="trpTroupeRelatedContentHolder" id="activity">\n    <ul class="gtrActivityList u-font-smaller" id="activity-list">'+(null!=(r=null!=(r=t._prerender_inner||(null!=e?e._prerender_inner:e))?r:t.helperMissing,o="function"==typeof r?r.call(e,{name:"_prerender_inner",hash:{},data:i}):r)?o:"")+"</ul>\n  </div>\n</div>\n"},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){return'data-disable-routing="1" target="_blank"'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r;return"<p>We haven't seen any activity yet.</p>\n<p><a href=\""+this.escapeExpression((r=null!=(r=t.integrationsUrl||(null!=e?e.integrationsUrl:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"integrationsUrl",hash:{},data:i}):r))+'" '+(null!=(o=t["if"].call(e,null!=e?e.isNativeDesktopApp:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+">Configure\nyour integrations &rarr;</a></p>\n"},useData:!0})},function(e,t){"use strict";var n={trello:function(e,t){var n={updateCard:"updated",createCard:"created",commentCard:"commented",voteOnCard:"voted"};return{trello_action:n[t.action.type]}},sprintly:function(e,t){var n={};return"Item"==t.model?n.sprintly_action="created":"Comment"==t.model&&(n.sprintly_action="commented on"),n},bitbucket:function(e){var t=e.commits||[];return{first_commit:t[0],is_single_commit:1===t.length,commits_count:t.length}},github:function(e,t){var n={};if("push"==e.event){var i=t.commits||[],o=i.length;n.commits=i,n.commits.forEach(function(e){e.short_sha=e.id.substring(0,7);var t=e.message;e.short_message=t.length>32?t.substr(0,31)+"":t}),o>3&&(n.commits=n.commits.slice(0,3),n.hidden_commit_count=o-3),n.commits_count=o}else"gollum"==e.event?(n.wiki_url=t.pages[0].html_url,n.wiki_page=t.pages[0].page_name):"commit_comment"===e.event&&(n.commit=e.commit||{id:t.comment.commit_id,short_sha:t.comment.commit_id.substring(0,7)});return n},jenkins:function(e,t){var n=t.build.status?t.build.status.toLowerCase():t.build.phase.toLowerCase();return{build_status:n}},travis:function(e,t){var n={},i=t.status_message?t.status_message.toLowerCase():"";return n.build_status="still failing"===i?"failing":i,n},huboard:function(e){var t={},n=e.column,i=e.previousColumn;return e.milestone?t.context="to "+e.milestone:e.status?t.context="to "+e.status:n&&(t.context=i?"from "+i+" to "+n:"in "+n),t}};e.exports=function(e,t){var i=n[e.service],o=i?i(e,t):{};if(t&&t.ref){var r=t.ref.split("/");o.branch_name=r[3]?r[3]:r[2],o.repo=t.repository.owner.name+"/"+t.repository.name}return o}},function(e,t,n){"use strict";var i=n(118),o=n(3),r=n(2),a=n(364),s=n(38),l=n(365),c=n(366),u=n(367),d=n(11),h=n(368),f=n(31);n(369),n(371),e.exports=function(){var e=i.ItemView.extend({events:{"submit form":"inviteUser","click .js-add":"addUser"},className:"welcome-modal__collaborator",template:c,initialize:function(e){this.userModel=e.model,this.stateModel=new o.Model({state:"initial",emailRequiredUserId:null}),this.listenTo(this.userModel,"change",this.render),this.listenTo(this.stateModel,"change",this.render)},inviteUser:function(){var e=this,t={userId:this.stateModel.get("emailRequiredUserId"),email:this.$el.find(".js-invite-email").val(),roomId:r.getTroupeId()};return this.stateModel.set("state","inviting"),s.priv.post("/invite-user",t).then(function(){e.stateModel.set("state","invited")}).fail(function(){e.stateModel.set("state","fail")}),!1},addUser:function(){var e=this,t=this.userModel;d.triggerParent("track-event","welcome-add-user-click"),this.stateModel.set("state","adding"),s.room.post("/users",{username:t.get("login")}).then(function(t){var n=t.user;n.invited?n.invited&&n.email?e.stateModel.set("state","invited"):e.stateModel.set({emailRequiredUserId:n.id,state:"email_address_required"}):e.stateModel.set("state","added")}).fail(function(t){402===t.status?(window.location.href="#add",e.stateModel.set("state","initial")):409===t.status?e.stateModel.set("state","fail_409"):e.stateModel.set("state","fail")})},serializeData:function(){var e=this.stateModel.get("state"),t=this.userModel.get("login"),n={initial:{text:t,showAddButton:!0},adding:{text:"Adding"},added:{text:t+" added"},invited:{text:t+" invited"},fail:{text:"Unable to add "+t},fail_409:{text:"Unable to add person already in room"},email_address_required:{text:"Enter "+t+"'s email",showEmailForm:!0},inviting:{text:"Inviting"}},i=n[e]||n.initial;return i.avatarSrcSet=f({username:t},30),i}}),t=i.ItemView.extend({template:u,className:"welcome-modal__no-suggestions",initialize:function(e){this.model.set("security",e.security),this.model.set("githubType",e.githubType),this.model.set("url",e.url)},serializeData:function(){var e=this.model.toJSON();return"ORG"===e.githubType&&(e.showOrgMessage=!0),"ORG_CHANNEL"==e.githubType&&"INHERITED"==e.security&&(e.showOrgMessage=!0),"PUBLIC"==e.security&&(e.isPublic=!0),e}}),n=i.CompositeView.extend({childViewContainer:".js-container",childView:e,emptyView:t,childViewOptions:function(){return this.collection.length?void 0:{githubType:r.troupe().get("githubType"),security:r.troupe().get("security"),url:r.troupe().get("url")}},template:l,constructor:function(){this.collection=new h.CollabCollection,this.shouldFetch()?(this.collection.fetch(),this.hasGotSomeData=!1):this.hasGotSomeData=!0,this.listenTo(this.collection,"sync",function(){this.hasGotSomeData=!0,this.render()},this),i.CompositeView.prototype.constructor.apply(this,arguments)},initialize:function(){var e=r();d.triggerParent("track-event","welcome-add-user-suggestions",{uri:e.troupe.uri,security:e.troupe.security,count:this.collection.length}),this.listenTo(r.troupe(),"change:permissions",this.onRoomChange,this)},events:{"click .js-close":"dismiss","click #add-button":"clickAddButton","click #share-button":"clickShareButton"},onRoomChange:function(){return this.$el.hide(),d.trigger("collaboratorsView:hide"),this.shouldFetch()?this.collection.fetch():void this.render()},serializeData:function(){return{isPublic:"PUBLIC"===r.troupe().get("security"),twitterLink:a.generateTwitterShareUrl(),facebookLink:a.generateFacebookShareUrl()}},clickAddButton:function(){d.triggerParent("track-event","welcome-search-clicked"),window.location.href="#add"},clickShareButton:function(){window.location.href="#share"},dismiss:function(){this.remove()},shouldFetch:function(){var e=r.troupe(),t=e.get("githubType"),n=e.get("userCount");return"ONETOONE"===t?!1:r.isTroupeAdmin()?n>1?!1:!0:!1},shouldRender:function(){return this.shouldFetch()&&this.hasGotSomeData?!0:void 0},render:function(){return this.shouldRender()?(i.CompositeView.prototype.render.apply(this,arguments),this.$el.show(),d.trigger("collaboratorsView:show"),this):(this.$el.hide(),d.trigger("collaboratorsView:hide"),this)}});return n}()},function(e,t,n){"use strict";var i=n(2);e.exports={generateTwitterShareUrl:function(){var e=i.troupe().get("uri"),t=encodeURIComponent("Join the chat room on Gitter for "+e+":"),n="https://twitter.com/share?text="+t+"&url=https://gitter.im/"+e+"&related=gitchat&via=gitchat";return n},generateFacebookShareUrl:function(){var e=i.troupe().get("uri");return"http://www.facebook.com/sharer/sharer.php?u=https://gitter.im/"+e}}},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){return"      <h3>Get Started: Spread the word</h3>\n"},3:function(e,t,n,i){return"      <h3>Get Started: Add some teammates</h3>\n"},5:function(e,t,n,i){var o,r=t.helperMissing,a="function",s=this.escapeExpression;return'      <a class="share-button button-twitter" href="'+s((o=null!=(o=t.twitterLink||(null!=e?e.twitterLink:e))?o:r,typeof o===a?o.call(e,{name:"twitterLink",hash:{},data:i}):o))+'" target="_blank">\n        <i class="fa fa-twitter"></i>\n        Tweet\n      </a>\n      <a class="share-button button-facebook" target="_blank" href="'+s((o=null!=(o=t.facebookLink||(null!=e?e.facebookLink:e))?o:r,typeof o===a?o.call(e,{name:"facebookLink",hash:{},data:i}):o))+'">\n        <i class="fa fa-facebook-official"></i>\n        Share\n      </a>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o;return'<div class="welcome-modal__collaborators">\n  <div class="welcome-modal__close js-close"><i class="octicon octicon-x"></i></div>\n  <div class="welcome-modal__header">\n'+(null!=(o=t["if"].call(e,null!=e?e.isPublic:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.program(3,i,0),data:i}))?o:"")+'  </div>\n  <div class="welcome-modal__container  js-container"></div>\n    <div class="welcome-modal__share">\n      <a class="link--positive" href="#add">Search other users</a>\n'+(null!=(o=t["if"].call(e,null!=e?e.isPublic:e,{name:"if",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?o:"")+"    </div>\n</div>\n"},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){var o;return'  <form>\n    <p>\n      <input class="js-invite-email" type="email" placeholder="'+this.escapeExpression((o=null!=(o=t.text||(null!=e?e.text:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"text",hash:{},data:i}):o))+'" required />\n      <input type="submit" value="Invite" class="link--positive" />\n    </p>\n  </form>\n'},3:function(e,t,n,i){var o;return"  <p>"+this.escapeExpression((o=null!=(o=t.text||(null!=e?e.text:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"text",hash:{},data:i}):o))+"</p>\n"},5:function(e,t,n,i){return'<div class="action">\n  <a class="link--positive js-add">Add</a>\n</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return"<img src='"+a(r(null!=(o=null!=e?e.avatarSrcSet:e)?o.src:o,e))+"' srcset='"+a(r(null!=(o=null!=e?e.avatarSrcSet:e)?o.srcset:o,e))+"' height='"+a(r(null!=(o=null!=e?e.avatarSrcSet:e)?o.size:o,e))+"' width='"+a(r(null!=(o=null!=e?e.avatarSrcSet:e)?o.size:o,e))+'\'>\n<div class="content">\n'+(null!=(o=t["if"].call(e,null!=e?e.showEmailForm:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.program(3,i,0),data:i}))?o:"")+"</div>\n\n"+(null!=(o=t["if"].call(e,null!=e?e.showAddButton:e,{name:"if",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?o:"")},useData:!0})},function(e,t,n){var i=n(21);e.exports=(i["default"]||i).template({1:function(e,t,n,i){var o;return" This room will only allow members from your GitHub organisation to join. <br>It looks like there's nobody in your organisation.  Why not <a href=\"https://github.com/orgs"+this.escapeExpression((o=null!=(o=t.url||(null!=e?e.url:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{name:"url",hash:{},data:i}):o))+'/people" target="_blank">add some on GitHub</a> or <a href="/home">create another room</a>?'},3:function(e,t,n,i){return"We couldn't suggest anyone to add to this room."},5:function(e,t,n,i){return'Why not <a href="#share">share the link</a> for others to join?'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a,s=t.helperMissing,l="function",c=this.escapeExpression,u=t.blockHelperMissing,d="<!-- <h1>YO I AM EMPTY</h1> -->\n<!-- Type: "+c((r=null!=(r=t.githubType||(null!=e?e.githubType:e))?r:s,typeof r===l?r.call(e,{name:"githubType",hash:{},data:i}):r))+"<br>\nSecurity "+c((r=null!=(r=t.security||(null!=e?e.security:e))?r:s,typeof r===l?r.call(e,{name:"security",hash:{},data:i}):r))+' -->\n<!-- <p class="trpBodyMedium">Couldn\'t find anyone to add to your room</p>\n\n -->\n\n<img src="'+c((t.cdn||e&&e.cdn||s).call(e,"images/emoji/disappointed.png",{name:"cdn",hash:{},data:i}))+'">\n<br>\n<br>\n';return r=null!=(r=t.showOrgMessage||(null!=e?e.showOrgMessage:e))?r:s,a={name:"showOrgMessage",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i},o=typeof r===l?r.call(e,a):r,t.showOrgMessage||(o=u.call(e,o,a)),null!=o&&(d+=o),d+="\n"+(null!=(o=t.unless.call(e,null!=e?e.showOrgMessage:e,{name:"unless",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?o:"")+" ",r=null!=(r=t.isPublic||(null!=e?e.isPublic:e))?r:s,a={name:"isPublic",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i},o=typeof r===l?r.call(e,a):r,t.isPublic||(o=u.call(e,o,a)),null!=o&&(d+=o),d+"\n"},useData:!0})},function(e,t,n){"use strict";var i=n(38),o=n(3),r=n(116),a=o.Model.extend({idAttribute:"id"}),s=o.Collection.extend({model:a,url:i.room.channelGenerator("/collaborators"),sync:r.sync});e.exports={CollabCollection:s,CollabModel:a}},function(e,t,n){var i=n(370);"string"==typeof i&&(i=[[e.id,i,""]]);n(131)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(130)(),t.push([e.id,"/*\n  THERE IS A LOT OF SPECIFIC LOGIC IN HERE THAT SHOULD BE REMOVED\n  CURRENTLY I CAN'T FIND A POSTCSS PLUGIN WHICH CONVERTS COLORS PROPERLY\n  FOR EXAMPLE darken(10%)\n  AS SUCH THERE IS A LOT OF SPECIFIC CONDITIONALS TO GET THE DESIRED RESULTS\n*/\n\n.button-caribbean {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.6rem;\n  font-weight: 400;\n  line-height: 2.6rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #46bc99;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n}\n\n.button-caribbean:hover {\n  text-decoration: none;\n}\n\n.button-caribbean:hover {\n  background: #3ea17f;\n}\n\n.button-caribbean[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-caribbean[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-caribbean--small {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.2rem;\n  font-weight: 400;\n  line-height: 1.9rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #46bc99;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n}\n\n.button-caribbean--small:hover {\n  text-decoration: none;\n}\n\n.button-caribbean--small:hover {\n  background: #3ea17f;\n}\n\n.button-caribbean--small[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-caribbean--small[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-caribbean--large {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 2.132rem;\n  font-weight: 400;\n  line-height: 3.4rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #46bc99;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n}\n\n.button-caribbean--large:hover {\n  text-decoration: none;\n}\n\n.button-caribbean--large:hover {\n  background: #3ea17f;\n}\n\n.button-caribbean--large[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-caribbean--large[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-jaffa {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.6rem;\n  font-weight: 400;\n  line-height: 2.6rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #f68d42;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n}\n\n.button-jaffa:hover {\n  text-decoration: none;\n}\n\n.button-jaffa:hover {\n  background: #d38043;\n}\n\n.button-jaffa[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-jaffa[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-jaffa--small {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.2rem;\n  font-weight: 400;\n  line-height: 1.9rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #f68d42;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n}\n\n.button-jaffa--small:hover {\n  text-decoration: none;\n}\n\n.button-jaffa--small:hover {\n  background: #d38043;\n}\n\n.button-jaffa--small[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-jaffa--small[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-jaffa--large {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 2.132rem;\n  font-weight: 400;\n  line-height: 3.4rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #f68d42;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n}\n\n.button-jaffa--large:hover {\n  text-decoration: none;\n}\n\n.button-jaffa--large:hover {\n  background: #d38043;\n}\n\n.button-jaffa--large[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-jaffa--large[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-pampas {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.6rem;\n  font-weight: 400;\n  line-height: 2.6rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #f2f0ed;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n  color: black;\n  border: 1px solid #d5d5d5;\n}\n\n.button-pampas:hover {\n  text-decoration: none;\n}\n\n.button-pampas:hover {\n  background: #d5d5d5;\n}\n\n.button-pampas[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-pampas[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-pampas--small {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.2rem;\n  font-weight: 400;\n  line-height: 1.9rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #f2f0ed;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n  color: black;\n  border: 1px solid #d5d5d5;\n}\n\n.button-pampas--small:hover {\n  text-decoration: none;\n}\n\n.button-pampas--small:hover {\n  background: #d5d5d5;\n}\n\n.button-pampas--small[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-pampas--small[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-pampas--large {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 2.132rem;\n  font-weight: 400;\n  line-height: 3.4rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #f2f0ed;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n  color: black;\n  border: 1px solid #d5d5d5;\n}\n\n.button-pampas--large:hover {\n  text-decoration: none;\n}\n\n.button-pampas--large:hover {\n  background: #d5d5d5;\n}\n\n.button-pampas--large[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-pampas--large[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-thunder {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.6rem;\n  font-weight: 400;\n  line-height: 2.6rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #3a3133;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n}\n\n.button-thunder:hover {\n  text-decoration: none;\n}\n\n.button-thunder:hover {\n  background: #1c1819;\n}\n\n.button-thunder[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-thunder[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-thunder--small {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.2rem;\n  font-weight: 400;\n  line-height: 1.9rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #3a3133;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n}\n\n.button-thunder--small:hover {\n  text-decoration: none;\n}\n\n.button-thunder--small:hover {\n  background: #1c1819;\n}\n\n.button-thunder--small[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-thunder--small[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-thunder--large {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 2.132rem;\n  font-weight: 400;\n  line-height: 3.4rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #3a3133;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n}\n\n.button-thunder--large:hover {\n  text-decoration: none;\n}\n\n.button-thunder--large:hover {\n  background: #1c1819;\n}\n\n.button-thunder--large[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-thunder--large[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-ruby {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.6rem;\n  font-weight: 400;\n  line-height: 2.6rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #ed1965;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n  color: #ed1965;\n  background: white;\n  border: 1px solid #f5e0dc;\n}\n\n.button-ruby:hover {\n  text-decoration: none;\n}\n\n.button-ruby:hover {\n  background: #f5e0dc;\n  border: 1px solid #ed1965;\n}\n\n.button-ruby[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-ruby[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-ruby--small {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.2rem;\n  font-weight: 400;\n  line-height: 1.9rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #ed1965;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n  color: #ed1965;\n  background: white;\n  border: 1px solid #f5e0dc;\n}\n\n.button-ruby--small:hover {\n  text-decoration: none;\n}\n\n.button-ruby--small:hover {\n  background: #f5e0dc;\n  border: 1px solid #ed1965;\n}\n\n.button-ruby--small[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-ruby--small[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-ruby--large {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 2.132rem;\n  font-weight: 400;\n  line-height: 3.4rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #ed1965;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n  color: #ed1965;\n  background: white;\n  border: 1px solid #f5e0dc;\n}\n\n.button-ruby--large:hover {\n  text-decoration: none;\n}\n\n.button-ruby--large:hover {\n  background: #f5e0dc;\n  border: 1px solid #ed1965;\n}\n\n.button-ruby--large[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-ruby--large[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-facebook {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.6rem;\n  font-weight: 400;\n  line-height: 2.6rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #3B5998;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n}\n\n.button-facebook:hover {\n  text-decoration: none;\n}\n\n.button-facebook[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-facebook[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-facebook--small {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.2rem;\n  font-weight: 400;\n  line-height: 1.9rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #3B5998;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n}\n\n.button-facebook--small:hover {\n  text-decoration: none;\n}\n\n.button-facebook--small[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-facebook--small[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-facebook--large {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 2.132rem;\n  font-weight: 400;\n  line-height: 3.4rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #3B5998;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n}\n\n.button-facebook--large:hover {\n  text-decoration: none;\n}\n\n.button-facebook--large[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-facebook--large[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-twitter {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.6rem;\n  font-weight: 400;\n  line-height: 2.6rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #55ACEE;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n}\n\n.button-twitter:hover {\n  text-decoration: none;\n}\n\n.button-twitter[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-twitter[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-twitter--small {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.2rem;\n  font-weight: 400;\n  line-height: 1.9rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #55ACEE;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n}\n\n.button-twitter--small:hover {\n  text-decoration: none;\n}\n\n.button-twitter--small[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-twitter--small[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n\n.button-twitter--large {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 2.132rem;\n  font-weight: 400;\n  line-height: 3.4rem;\n  box-sizing: border-box;\n  padding: .8em 3.5em;\n  background: #55ACEE;\n  border: none;\n  border-radius: .5em;\n  outline: none;\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: normal;\n  color: white;\n  text-transform: uppercase;\n  letter-spacing: .1em;\n}\n\n.button-twitter--large:hover {\n  text-decoration: none;\n}\n\n.button-twitter--large[disabled=true] {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n}\n\n.button-twitter--large[disabled=true]:hover {\n  background: #f2f0ed;\n  border: 1px solid #f2f0ed;\n  color: grey;\n  cursor: default;\n}\n",""]);
},function(e,t,n){var i=n(372);"string"==typeof i&&(i=[[e.id,i,""]]);n(131)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(130)(),t.push([e.id,".link--positive {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.6rem;\n  font-weight: 400;\n  line-height: 2.6rem;\n  border: none;\n  background: none;\n  outline: none;\n  color: #46bc99;\n  text-transform: uppercase;\n  font-weight: 400;\n  text-decoration: none;\n  letter-spacing: 0.1em;\n}\n\n.link--positive:hover {\n  cursor: pointer;\n  color: #3ea17f;\n}\n\n.link--negative {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.6rem;\n  font-weight: 400;\n  line-height: 2.6rem;\n  border: none;\n  background: none;\n  outline: none;\n  color: #ed1965;\n  text-transform: uppercase;\n  font-weight: 400;\n  text-decoration: none;\n  letter-spacing: 0.1em;\n}\n\n.link--negative:hover {\n  cursor: pointer;\n  color: #d5145b;\n}\n\n.link--neutral {\n  margin: 0;\n  padding: 0;\n  font-family: 'Source Sans Pro', source-sans-pro, pt sans, calibri, sans-serif;\n  font-size: 1.6rem;\n  font-weight: 400;\n  line-height: 2.6rem;\n  border: none;\n  background: none;\n  outline: none;\n  color: #949494;\n  text-transform: uppercase;\n  font-weight: 400;\n  text-decoration: none;\n  letter-spacing: 0.1em;\n}\n\n.link--neutral:hover {\n  cursor: pointer;\n  color: #858585;\n}\n",""])},function(e,t,n){"use strict";function i(e,t){if(!e)return!1;for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}function o(e){e.stopPropagation(),e.preventDefault()}var r=(n(6),n(4)),a=n(2),s=n(118),l=n(11),c=n(38);n(374);var u=62.5,d=s.ItemView.extend({template:!1,el:"body",ui:{progressBar:"#file-progress-bar",dragOverlay:".js-drag-overlay",uploadForm:"#upload-form"},events:{paste:"handlePaste",dragenter:"onDragEnter",dragleave:"onDragLeave",dragover:"onDragOver",drop:"onDrop"},dragCounter:0,updateProgressBar:function(e){var t=this.ui.progressBar,n=e.value&&e.value.toFixed(0)+"%",i=e.timeout||200;setTimeout(function(){t.css("width",n)},i)},resetProgressBar:function(){this.ui.progressBar.hide(),this.updateProgressBar({value:0,timeout:0})},handleUploadProgress:function(e,t){this.updateProgressBar({value:u+e/t*(100-u),timeout:0})},handleUploadStart:function(){this.ui.progressBar.show()},handleUploadSuccess:function(e){this.resetProgressBar();var t=parseInt(e.fields.numberOfFiles,10);l.triggerParent("user_notification",{title:"Upload complete",text:(t>1?t+" files":"file")+" uploaded successfully."})},handleUploadError:function(e){l.triggerParent("user_notification",{title:"Error Uploading File",text:e.message}),this.resetProgressBar()},isTextDrag:function(e){var t=e.dataTransfer;if(i(t.types,"Files"))return!1;if(!t.files&&t.files.length>0)return!1;var n=t.items;if(!n)return!0;for(var o=0;o<n.length;o++){var r=n[o].kind;if("string"!==r)return!1}return!0},onDragEnter:function(e){e.originalEvent&&(e=e.originalEvent),this.isTextDrag(e)||(this.dragCounter++,this.ui.dragOverlay.toggleClass("hide",!1),o(e))},onDragLeave:function(e){e.originalEvent&&(e=e.originalEvent),this.isTextDrag(e)||(this.dragCounter--,this.ui.dragOverlay.toggleClass("hide",0===this.dragCounter),o(e))},onDragOver:function(e){e.originalEvent&&(e=e.originalEvent),this.isTextDrag(e)||o(e)},onDrop:function(e){if(e.originalEvent&&(e=e.originalEvent),!this.isTextDrag(e)){this.dragCounter=0,this.ui.dragOverlay.toggleClass("hide",!0),o(e);var t=e.dataTransfer.files;this.upload(t)}},isImage:function(e){var t=e.type;return"image/svg+xml"!==t&&t.indexOf("image/")>=0},handlePaste:function(e){e=e.originalEvent||e;var t=e.clipboardData,n=null;if(t&&t.items&&1===t.items.length){if(n=t.items[0].getAsFile(),!n||!this.isImage(n))return;e.preventDefault(),this.upload([n])}},getFileType:function(e){if(!e.length)return"";for(var t=0;t<e.length;t++){var n=e[t];if(!this.isImage(n))return""}return"image"},upload:function(e){if(e.length){var t=this;this.ui.progressBar.show(),this.updateProgressBar({value:0,timeout:0}),this.updateProgressBar({value:u,timeout:200});for(var n={wait:!0,modal:!1,autoSubmit:!1,debug:!1,onStart:this.handleUploadStart.bind(this),onProgress:this.handleUploadProgress.bind(this),onSuccess:this.handleUploadSuccess.bind(this),onError:this.handleUploadError.bind(this)},i=new FormData,o=0;o<e.length;o++){var s=e[o];i.append("file",s)}i.append("numberOfFiles",e.length),c.priv.get("/generate-signature",{room_uri:a.troupe().get("oneToOne")?a.user().get("username"):a.troupe().get("uri"),room_id:a.getTroupeId(),type:this.getFileType(e)}).then(function(e){i.append("signature",e.sig);var o=t.ui.uploadForm;o.find('input[name="params"]').attr("value",e.params),o.unbind("submit.transloadit"),o.transloadit(r.extend(n,{formData:i})),o.submit()})}}});e.exports=d},function(e,t,n){var i,o;i=[n(6)],o=function(e){return function(e){function t(){}function n(e){a=[e]}function i(e,t,n){return e&&e.apply(t.context||t,n)}function o(e){return/\?/.test(e)?"&":"?"}function r(r){function f(e){K++||(Q(),F&&(E[W]={s:[e]}),z&&(e=z.apply(r,[e])),i(j,r,[e,_,r]),i(V,r,[r,_]))}function L(e){K++||(Q(),F&&e!=x&&(E[W]=e),i(N,r,[r,e]),i(V,r,[r,e]))}r=e.extend({},I,r);var O,P,A,D,B,j=r.success,N=r.error,V=r.complete,z=r.dataFilter,$=r.callbackParameter,H=r.callback,U=r.cache,F=r.pageCache,q=r.charset,W=r.url,G=r.data,J=r.timeout,K=0,Q=t;return T&&T(function(e){e.done(j).fail(N),j=e.resolve,N=e.reject}).promise(r),r.abort=function(){!K++&&Q()},i(r.beforeSend,r,[r])===!1||K?r:(W=W||c,G=G?"string"==typeof G?G:e.param(G,r.traditional):c,W+=G?o(W)+G:c,$&&(W+=o(W)+encodeURIComponent($)+"=?"),!U&&!F&&(W+=o(W)+"_"+(new Date).getTime()+"="),W=W.replace(/=\?(&|$)/,"="+H+"$1"),F&&(O=E[W])?O.s?f(O.s[0]):L(O):(k[H]=n,A=e(y)[0],A.id=h+S++,q&&(A[l]=q),M&&M.version()<11.6?(D=e(y)[0]).text="document.getElementById('"+A.id+"')."+m+"()":A[s]=s,R&&(A.htmlFor=A.id,A.event=p),A[g]=A[m]=A[v]=function(e){if(!A[b]||!/i/.test(A[b])){try{A[p]&&A[p]()}catch(t){}e=a,a=0,e?f(e[0]):L(u)}},A.src=W,Q=function(e){B&&clearTimeout(B),A[v]=A[g]=A[m]=null,C[w](A),D&&C[w](D)},C[d](A,P=C.firstChild),D&&C[d](D,P),B=J>0&&setTimeout(function(){L(x)},J)),r)}var a,s="async",l="charset",c="",u="error",d="insertBefore",h="_jqjsp",f="on",p=f+"click",m=f+u,g=f+"load",v=f+"readystatechange",b="readyState",w="removeChild",y="<script>",_="success",x="timeout",k=window,T=e.Deferred,C=e("head")[0]||document.documentElement,E={},S=0,I={callback:h,url:location.href},M=k.opera,R=!!e("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;r.setup=function(t){e.extend(I,t)},e.jsonp=r}(e),!function(e){function t(){this.assemblyId=null,this.instance=null,this.documentTitle=null,this.timer=null,this._options={},this.uploads=[],this.results={},this.ended=null,this.pollStarted=null,this.pollRetries=0,this.seq=0,this.started=!1,this.assembly=null,this.params=null,this.bytesReceivedBefore=0,this.lastPoll=0,this.$params=null,this.$form=null,this.$files=null,this.$fileClones=null,this.$iframe=null,this._lastMSecs=0,this._lastNSecs=0,this._clockseq=0}var n="https:"==document.location.protocol?"https://":"http://",i=n+"api2.transloadit.com/",o={service:i,assets:n+"assets.transloadit.com/",onFileSelect:function(){},onStart:function(){},onProgress:function(){},onUpload:function(){},onResult:function(){},onCancel:function(){},onError:function(){},onSuccess:function(){},interval:2500,pollTimeout:8e3,poll404Retries:15,pollConnectionRetries:3,wait:!1,processZeroFiles:!0,triggerUploadOnFileSelection:!1,autoSubmit:!0,exclude:"",fields:!1,params:null,signature:null,region:"us-east-1",debug:!0};e.fn.transloadit=function(){var n,i,o,r=Array.prototype.slice.call(arguments);if(0!==this.length){if(this.length>1)return void this.each(function(){e.fn.transloadit.apply(e(this),r)});if((1==r.length&&"object"==typeof r[0]||void 0===r[0])&&r.unshift("init"),n=r.shift(),"init"==n?(i=new t,r.unshift(this),this.data("transloadit.uploader",i)):i=this.data("transloadit.uploader"),!i)throw new Error("Element is not initialized for transloadit!");return o=i[n].apply(i,r),void 0===o?this:o}},t.prototype.init=function(t,n){this.$form=t,this.options(e.extend({},o,n||{}));var i=this;t.bind("submit.transloadit",function(){return i.validate(),i.detectFileInputs(),i.checkFileTypes(),i._options.processZeroFiles||0!==i.$files.length?i.getBoredInstance():i.submitForm(),!1}),this._options.triggerUploadOnFileSelection&&t.on("change",'input[type="file"]',function(){t.trigger("submit.transloadit")}),t.on("change",'input[type="file"]',function(){i._options.onFileSelect(e(this).val(),e(this))})},t.prototype.getBoredInstance=function(){function t(){e.jsonp({url:r,timeout:o._options.pollTimeout,callbackParameter:"callback",success:function(e){return e.error?(o.ended=!0,e.url=r,void o._options.onError(e)):(o.instance=e.api2_host,void o.start())},error:function(e,s){if(a&&o._options.service===i&&"https://"!==n)return a=!1,void o._findBoredInstanceUrl(function(e,i){return e?(o.ended=!0,e={error:"BORED_INSTANCE_ERROR",message:"Could not find a bored instance. "+e.message},void o._options.onError(e)):(r=n+"api2."+i+"/instances/bored",void t())});o.ended=!0;var l={error:"CONNECTION_ERROR",message:"There was a problem connecting to the upload server",reason:"JSONP request status: "+s,url:r};o._options.onError(l)}})}var o=this;this.instance=null;var r=this._options.service+"instances/bored",a=!0;t()},t.prototype._findBoredInstanceUrl=function(t){var n=this,i="http://infra-"+this._options.region+".transloadit.com.s3.amazonaws.com/cached_instances.json";e.ajax({url:i,datatype:"json",timeout:3e3,success:function(e){var i=n._shuffle(e.uploaders);n._findResponsiveInstance(i,0,t)},error:function(e,n){var i=new Error("Could not query S3 for cached uploaders");t(i)}})},t.prototype._findResponsiveInstance=function(t,i,o){if(!t[i]){var r=new Error("No responsive uploaders");return o(r)}var a=this,s=t[i];e.jsonp({url:n+s,timeout:3e3,callbackParameter:"callback",success:function(e){o(null,s)},error:function(e,n){a._findResponsiveInstance(t,i+1,o)}})},t.prototype._shuffle=function(e){for(var t,n=[],i=0;i<e.length;i++)t=Math.floor(Math.random()*(i+1)),n[i]=n[t],n[t]=e[i];return n},t.prototype.start=function(){var t=this;this.started=!1,this.ended=!1,this.bytesReceivedBefore=0,this.pollRetries=0,this.seq=0,this.uploads=[],this.results={},this.assemblyId=this._genUuid(),this.$fileClones=e().not(document),this.$files.each(function(){var n=e(this).clone(!0);t.$fileClones=t.$fileClones.add(n),n.insertAfter(this)}),this.$iframe=e('<iframe id="transloadit-'+this.assemblyId+'" name="transloadit-'+this.assemblyId+'"/>').appendTo("body").hide();var i=n+this.instance+"/assemblies/"+this.assemblyId+"?redirect=false";if(this._options.formData){this._options.formData.append("params",this.$form.find("input[name=params]").val());var o=new XMLHttpRequest;o.open("POST",i),o.send(this._options.formData)}else{this.$uploadForm=e('<form enctype="multipart/form-data" />').attr("action",i).attr("target","transloadit-"+this.assemblyId).attr("method","POST").append(this.$files).appendTo("body").hide();var r="[name=params], [name=signature]";this._options.fields===!0?r="*":"string"==typeof this._options.fields&&(r+=", "+this._options.fields);var a=this.$form.find(":input[type!=file]").filter(r),s=a.filter("select");a=a.filter(function(){return!e(this).is("select")}),a=a.filter("[type!=submit]");var l=this.clone(a);if(this._options.params&&!this.$params&&(l=l.add('<input name="params" value=\''+JSON.stringify(this._options.params)+"'>")),this._options.signature&&(l=l.add('<input name="signature" value=\''+this._options.signature+"'>")),"object"==typeof this._options.fields)for(var c in this._options.fields){var u=this._options.fields[c];l=l.add('<input name="'+c+"\" value='"+u+"'>")}l.prependTo(this.$uploadForm),s.each(function(){e('<input type="hidden"/>').attr("name",e(this).attr("name")).attr("value",e(this).val()).prependTo(t.$uploadForm)}),this.$uploadForm.submit()}this.lastPoll=+new Date,setTimeout(function(){t._poll()},300)},t.prototype.clone=function(t){for(var n=t.clone(),i=t.filter("textarea"),o=n.filter("textarea"),r=0;r<i.length;++r)e(o[r]).val(e(i[r]).val());return n},t.prototype.checkFileTypes=function(){function t(e){return/image\/jpg/g.test(e)&&!/image\/jpeg/g.test(e)&&(e+=",image/jpeg"),/image\/jpeg/g.test(e)&&!/image\/jpg/g.test(e)&&(e+=",image/jpg"),-1!==e.indexOf("video/*")&&(e=e.replace(/video\/\*/g,"video/mp4,video/flv,video/avi,video/mpg,video/mov,video/wmv,video/h264,video/mkv,video/ogv")),-1!==e.indexOf("image/*")&&(e=e.replace(/image\/\*/g,"image/png,image/jpeg,image/gif,image/jpg,image/ico")),-1!==e.indexOf("audio/*")&&(e=e.replace(/audio\/\*/g,"audio/aac,audio/mp3,audio/flac,audio/m4a,audio/mmf,audio/3gp,audio/mp4,audio/mpeg,audio/ogg,audio/wav,audio/webm")),e.split(",")}var n=this;this.$files=this.$files.filter(function(){var i=e(this).attr("accept");if(!i)return!0;i=t(i);for(var o=this.value.split(".").pop().toLowerCase(),r=0;r<i.length;r++)if(o==i[r].split("/")[1])return!0;var a={error:"INVALID_FILE_TYPE",message:"Sorry, we don't accept "+o+" files.",reason:"Invalid file selected"};return n._options.onError(a),!1})},t.prototype.detectFileInputs=function(){var e=this.$form.find("input[type=file]").not(this._options.exclude);this._options.processZeroFiles||(e=e.filter(function(){return""!==this.value})),this.$files=e},t.prototype.validate=function(){if(this._options.params)this.params=this._options.params;else{var e=this.$form.find("input[name=params]");if(!e.length)return void alert("Could not find input[name=params] in your form.");this.$params=e;try{this.params=JSON.parse(e.val())}catch(t){return void alert("Error: input[name=params] seems to contain invalid JSON.")}}if(this.params.redirect_url)this.$form.attr("action",this.params.redirect_url);else if(this._options.autoSubmit&&this.$form.attr("action")==this._options.service+"assemblies")return void alert("Error: input[name=params] does not include a redirect_url")},t.prototype._poll=function(t){var i=this;if(!this.ended){var o=/(mozilla)(?:.*? rv:([\w.]+))?/.exec(navigator.userAgent),r=o&&o[1];this.documentTitle=document.title,r&&!this.documentTitle&&(document.title="Loading..."),this.pollStarted=+new Date;var a=n+this.instance+"/assemblies/"+this.assemblyId+(t||"?seq="+this.seq);e.jsonp({url:a,timeout:i._options.pollTimeout,callbackParameter:"callback",success:function(e){if(!i.ended){if(i.assembly=e,"ASSEMBLY_NOT_FOUND"==e.error)return i.pollRetries++,i.pollRetries>i._options.poll404Retries?(document.title=i.documentTitle,i.ended=!0,void i._options.onError(e)):void setTimeout(function(){i._poll()},400);if(e.error)return i.ended=!0,document.title=i.documentTitle,void i._options.onError(e);i.seq=e.last_seq,i.started||(i.started=!0,i._options.onStart(e)),i.pollRetries=0;var t=("ASSEMBLY_UPLOADING"===e.ok,"ASSEMBLY_EXECUTING"===e.ok),n="ASSEMBLY_CANCELED"===e.ok,o="ASSEMBLY_COMPLETED"===e.ok;i._options.onProgress(e.bytes_received,e.bytes_expected,e);for(var r=0;r<e.uploads.length;r++)i._options.onUpload(e.uploads[r],e),i.uploads.push(e.uploads[r]);for(var a in e.results){i.results[a]=i.results[a]||[];for(var s=0;s<e.results[a].length;s++)i._options.onResult(a,e.results[a][s],e),i.results[a].push(e.results[a][s])}if(n)return i.ended=!0,document.title=i.documentTitle,void i._options.onCancel(e);if(o||!i._options.wait&&t)return i.ended=!0,document.title=i.documentTitle,e.uploads=i.uploads,e.results=i.results,i._options.onSuccess(e),void i.submitForm();var l=i.pollStarted-+new Date,c=l<i._options.interval?i._options.interval:l;i.timer=setTimeout(function(){i._poll()},c),i.lastPoll=+new Date}},error:function(e,t){if(!i.ended){if(i.pollRetries++,i.pollRetries>i._options.pollConnectionRetries){document.title=i.documentTitle,i.ended=!0;var n={error:"CONNECTION_ERROR",message:"There was a problem connecting to the upload server",reason:"JSONP request status: "+t,url:a};return void i._options.onError(n)}setTimeout(function(){i._poll()},350)}}})}},t.prototype.stop=function(){document.title=this.documentTitle,this.ended=!0},t.prototype.cancel=function(){if(!this.ended){var t=this;this.$params&&this.$params.prependTo(this.$form),this.$fileClones.each(function(n){var i=e(t.$files[n]).clone(!0),o=e(this);i.insertAfter(o),o.remove()}),clearTimeout(t.timer),this._poll("?method=delete"),"Microsoft Internet Explorer"==navigator.appName&&this.$iframe[0].contentWindow.document.execCommand("Stop"),setTimeout(function(){t.$iframe.remove()},500)}},t.prototype.submitForm=function(){null!==this.assembly&&e("<textarea/>").attr("name","transloadit").text(JSON.stringify(this.assembly)).prependTo(this.$form).hide(),this._options.autoSubmit&&this.$form.unbind("submit.transloadit").submit()},t.prototype.getUTCDatetime=function(){var e=new Date,t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()),n=function(e){return 10>e?"0"+e:e},i=t.getTimezoneOffset(),o=(i>0?"-":"+")+n(parseInt(i/60,10));return i%60!==0&&(o+=n(i%60)),0===i&&(o="Z"),t.getFullYear()+"-"+n(t.getMonth()+1)+"-"+n(t.getDate())+"T"+n(t.getHours())+":"+n(t.getMinutes())+":"+n(t.getSeconds())+o},t.prototype._genUuid=function(e,t,n){function i(e,t){var n=t||0,i=d;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}e=e||{};var o=t&&n||0,r=t||[],a=new Array(16),s=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a},l=s(),c=[1|l[0],l[1],l[2],l[3],l[4],l[5]];this._clockseq=16383&(l[6]<<8|l[7]);for(var u=null!=e.clockseq?e.clockseq:this._clockseq,d=[],h={},f=0;256>f;f++)d[f]=(f+256).toString(16).substr(1),h[d[f]]=f;var p=null!=e.msecs?e.msecs:(new Date).getTime(),m=null!=e.nsecs?e.nsecs:this._lastNSecs+1,g=p-this._lastMSecs+(m-this._lastNSecs)/1e4;if(0>g&&null==e.clockseq&&(u=u+1&16383),(0>g||p>this._lastMSecs)&&null==e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");this._lastMSecs=p,this._lastNSecs=m,this._clockseq=u,p+=122192928e5;var v=(1e4*(268435455&p)+m)%4294967296;r[o++]=v>>>24&255,r[o++]=v>>>16&255,r[o++]=v>>>8&255,r[o++]=255&v;var b=p/4294967296*1e4&268435455;r[o++]=b>>>8&255,r[o++]=255&b,r[o++]=b>>>24&15|16,r[o++]=b>>>16&255,r[o++]=u>>>8|128,r[o++]=255&u;for(var w=e.node||c,y=0;6>y;y++)r[o+y]=w[y];return t?t:i(r)},t.prototype.options=function(t){return 0===arguments.length?this._options:void e.extend(this._options,t)},t.prototype.option=function(e,t){return 1==arguments.length?this._options[e]:void(this._options[e]=t)}}(e),e}.apply(t,i),!(void 0!==o&&(e.exports=o))},function(e,t,n){"use strict";function i(e,t){var n=f(e.size,t);return h.each(n,function(t){return e.preload(t.id,t.lastAccessTime)})}function o(){var e=new u(r.ChatCollection,{idAttribute:"troupeId"}),t=a.getTroupeId(),n=e.preload(t,Date.now()),o=e.get(t),h=new c({collection:o,klass:r.ChatCollection,properties:["loading"]});return a.contextModel().on("change:troupeId",function(){var t=a.getTroupeId(),n=e.get(t);h.switchCollection(n)}),h.on("error",l.bind(null,"chat-collection")),a.isLoggedIn()&&s.syncCollections({chat:h}),n.then(function(){p.postMessage({type:"request:roomList"}),d.once("chat-cache:preload",function(t){i(e,t)})}),h}var r=n(39),a=n(2),s=n(189),l=n(200),c=n(376),u=n(377),d=n(11),h=n(378),f=n(381),p=n(15);if(a.hasFeature("chat-cache")&&p.hasParentFrameSameOrigin()){var m=o();window._chatCollection=m,e.exports=m}else e.exports=n(382)},function(e,t,n){"use strict";function i(e){return function(){return this.collection[e].apply(this.collection,arguments)}}function o(e){this.collection=e&&e.collection||new a.Collection,this._bindToCollection(),Object.defineProperty(this,"length",{get:function(){return this.collection.length}}),Object.defineProperty(this,"models",{get:function(){return this.collection.models}}),Object.defineProperty(this,"model",{get:function(){return this.collection.model}}),Object.defineProperty(this,"comparator",{get:function(){return this.collection.comparator},set:function(e){return this.collection.comparator=e}});var t=e.properties;t&&t.forEach(function(e){Object.defineProperty(this,e,{get:function(){return this.collection[e]},set:function(t){return this.collection[e]=t}})},this);var n=e&&e.klass;if(n&&n.prototype)for(var o in n.prototype){var s=n.prototype[o];r(o,s)&&(this[o]=i(o))}}function r(e,t){return"_"===e[0]||"function"!=typeof t||c.hasOwnProperty(e)||o.prototype.hasOwnProperty(e)||Object.prototype.hasOwnProperty(e)||"constructor"===e||"initialize"===e||"comparator"===e?void 0:!0}var a=n(3),s=n(4),l=a.Collection.prototype,c=a.Events;o.prototype=s.extend({clone:function(){return new o({collection:this.collection.clone()})},destroy:function(){this._unbind()},switchCollection:function(e){if(!e)throw new Error("A valid collection must be passed to ProxyCollection.switchCollection");this.collection!==e&&(this._unbind(),this.collection=e,this._bindToCollection(),this.trigger("reset",this,{switched:!0}))},_onCollectionEvent:function(){this.trigger.apply(this,arguments)},_bindToCollection:function(){this.listenTo(this.collection,"all",this._onCollectionEvent)},_unbind:function(){this.stopListening(this.collection,"all",this._onCollectionEvent)}},c),Object.keys(l).forEach(function(e){var t=l[e];r(e,t)&&(o.prototype[e]=i(e))}),e.exports=o},function(e,t,n){"use strict";function i(e,t){this.idAttribute=t&&t.idAttribute||"id";var n=this.size=t&&t.size||l;this.lookup={},this.pool=r.chain(n).range().map(function(){var t=new o.Model,n=new e([],{contextModel:t,listen:!0});return{model:t,collection:n,access:null}}).value()}var o=n(3),r=n(4),a=n(378),s=n(16)("app:collection-pool"),l=5;i.prototype={get:function(e){if(!e)throw new Error("id required");var t=this.idAttribute,n=this.lookup[e];if(n)return s("Pool hit %s",e),n.access=Date.now(),n.collection;var i=this._findEmpty();if(i)return s("Pool miss, using empty slot for %s",e),i.model.set(t,e),i.access=Date.now(),this.lookup[e]=i,i.collection;var o=this._findLRU(),r=o.model.get(t);return s("Pool miss, replacing slot %s with %s",r,e),delete this.lookup[r],o.model.set(t,e),o.access=Date.now(),this.lookup[e]=o,o.collection},preload:function(e,t){if(!e)throw new Error("id required");var n=this.idAttribute,i=this.lookup[e];if(i)return void s("Pool preload, collection %s already loaded",e);var o=this._findEmpty();return o?(s("Pool preload, loading collection %s",e),o.model.set(n,e),o.access=t||Date.now(),this.lookup[e]=o,new a(function(t){o.collection.once("snapshot",function(){s("Pool preload, collection %s load complete",e),t()})})):void s("Pool preload, ignoring collection %s due to lack of slots",e)},_findEmpty:function(){for(var e=this.idAttribute,t=0;t<this.pool.length;t++){var n=this.pool[t];if(!n.model.get(e))return n}},_findLRU:function(){return r.min(this.pool,function(e){return e.access})}},e.exports=i},,,,function(e,t){"use strict";e.exports=function(e,t){var n=t.filter(function(e){return e.id&&e.lastAccess});return n.sort(function(e,t){return t.lastAccess-e.lastAccess}),n.slice(0,e)}},function(e,t,n){"use strict";var i=n(39),o=n(2),r=n(189),a=n(200),s=new i.ChatCollection(null,{listen:!0});s.on("error",a.bind(null,"chat-collection")),o.isLoggedIn()&&r.syncCollections({chat:s}),window._chatCollection=s,e.exports=s},function(e,t,n){"use strict";var i=n(2),o=n(38),r=n(10),a=n(114),s=n(11),l=n(4),c=n(16)("app:eyeballs");e.exports=function(){function e(e,t){if(!r.get("gitterNoEyeballSignals")&&a.getClientId()&&i.getTroupeId()){var n=a.getClientId();o.post("/v1/eyeballs",{socketId:n,on:e},{dataType:"text",async:!t,global:!1}).fail(function(e){400!==e.status?c("An error occurred while communicating eyeballs"):(c("Eyeballs returned 400. Realtime connection may be dead."),s.trigger("eyeballsInvalid",n))})}}function t(t){f&&(h(),c("Eyeballs off"),f=!1,e(0,t),s.trigger("eyeballStateChange",!1))}function n(){b=Date.now(),w=!1,f||(d(),c("Eyeballs on"),f=!0,e(1),s.trigger("eyeballStateChange",!0))}function u(){w&&n(),v||(v=setTimeout(function(){v=null,b=Date.now()},100))}function d(){_||(_=window.setInterval(function(){window.setTimeout(function(){Date.now()-b>p-m&&(c("inactivity"),w=!0,h(),t())},5)},m))}function h(){_&&(window.clearTimeout(_),_=null)}var f=!0,p=6e4,m=1e4;s.on("change:room",function(){n()}),window.addEventListener("blur",function(){t()},!1),window.addEventListener("focus",function(){n()},!1);var g=window.cordova;g?document.addEventListener("deviceready",function(){function e(){window.setTimeout(function(){var e=a.getClientId();e&&g.exec(function(){},function(){},"EyeballsOff","registerSocket",[e])},0)}s.on("realtime:newConnectionEstablished",e),e(),document.addEventListener("resume",function(){u(),window.setTimeout(function(){n()},0)},!1),document.addEventListener("pause",function(){f=!1},!1)},!1):(window.addEventListener("pageshow",function(){u(),n()},!1),window.addEventListener("pagehide",function(){t()},!1));var v,b=Date.now(),w=!1,y=l.debounce(u,500);document.addEventListener("keydown",y,!1),document.addEventListener("mousemove",y,!1),document.addEventListener("touchstart",y,!1),window.addEventListener("scroll",y,!1),d();var _;return{getEyeBalls:function(){return f}}}()}]);
//# sourceMappingURL=http://beta-internal:8080/job/gitter-webapp-build-step/3478/artifact/output/maps/router-chat.js.map
